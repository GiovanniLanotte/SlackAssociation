name repository,creator user,url_html issue,url_api issue,title,body,state,pull request,data open,updated at
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/1,https://api.github.com/repos/kubernetes/frakti/issues/1,"Add CONTRIBUTING, code-of-conduct and gitignore","Contributing COC and gitignore
",closed,True,2016-06-27 23:06:34,2016-06-28 08:40:07
frakti,resouer,https://github.com/kubernetes/frakti/pull/2,https://api.github.com/repos/kubernetes/frakti/issues/2,Update links in readme to WIP,"Fix a typo, and add a WIP label to api link.
",closed,True,2016-06-28 02:39:14,2016-06-28 08:35:55
frakti,resouer,https://github.com/kubernetes/frakti/pull/3,https://api.github.com/repos/kubernetes/frakti/issues/3,Fix wrong license title,"license title is broken by previous commit
",closed,True,2016-06-28 08:41:56,2016-06-28 08:48:20
frakti,resouer,https://github.com/kubernetes/frakti/pull/4,https://api.github.com/repos/kubernetes/frakti/issues/4,Refactor to new repo template,"Refactored to follow new repo template

Signed-off-by: Harry Zhang harryz@hyper.sh
",closed,True,2016-07-01 10:00:15,2016-07-04 03:13:44
frakti,resouer,https://github.com/kubernetes/frakti/pull/5,https://api.github.com/repos/kubernetes/frakti/issues/5,Add graph and todo,"Added a graph to show ""what is frakti""
",closed,True,2016-07-04 07:06:25,2016-07-04 08:22:19
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/6,https://api.github.com/repos/kubernetes/frakti/issues/6,Remove WIP for Kubelet container runtime API,,closed,True,2016-07-20 06:59:10,2016-07-20 09:56:07
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/7,https://api.github.com/repos/kubernetes/frakti/issues/7,Initial implementation of frakti,"Initial impl of frakti. This PR
- Listen frakti at local socket /var/run/frakti.sock
- Plugin framework of frakti
- Hyper as a plugin of frakti
",closed,True,2016-07-20 07:43:19,2016-08-02 08:22:02
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/8,https://api.github.com/repos/kubernetes/frakti/issues/8,Container Runtime Interface integration with Hyper,"This document tracks the process of the container runtime interface integration with Hyper.
## Frakti core features
- [x] Manage pods/containers/images according to kubelet [new runtime API](https://github.com/kubernetes/kubernetes/tree/master/docs/proposals/runtime-client-server.md)
  - pod sandboxes
    - [x] create pod sandbox
    - [x] list pod sandbox
    - [x] delete pod sandbox #11 
    - [x] get pod sandboxâ€™s status
  - containers
    - [x] create container
    - [x] start container
    - [x] stop container
    - [x] delete container
    - [x] list containers
    - [x] get container status
    - [x] exec in container
    - [x] port forwarding
    - [x] container logging
  - images
    - [x] list images
    - [x] pull image
    - [x] delete image
    - [x] get image status
- [ ] Hack scripts for easily setup a local enviroment
  - [x] hack/local-up-cluster.sh
  - [ ] Vagrant or minikube
- [x] testing
  - [x] Unit tests
  - [x] End-to-end tests
  - [x] Kubernetes node e2e tests
- [x] Cluster deployment
  - [x] Cluster deploy frakti for kubernetes clusters
- [x] Documentation
  - [x] Admin and user guide
  - [x] Frakti specific features which are different from Docker

## Requirements for Hyper
- [x] Container-level APIs: StartContainer/StopContainer https://github.com/hyperhq/hyperd/pull/445

## References
- [Container runtime interface planning](https://github.com/kubernetes/kubernetes/issues/28789)
- [Network plugin for client/server container runtimes](https://github.com/kubernetes/kubernetes/issues/28667)
- [Client/server container runtime proposal](https://github.com/kubernetes/kubernetes/tree/master/docs/proposals/runtime-client-server.md)
",closed,False,2016-07-28 06:47:06,2017-04-13 01:42:25
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/9,https://api.github.com/repos/kubernetes/frakti/issues/9,Orgnize packages to pkg,"CC @resouer 
",closed,True,2016-08-03 06:33:41,2016-08-04 03:10:04
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/10,https://api.github.com/repos/kubernetes/frakti/issues/10,Fix travis CI,"This PR enables CI for frakti and 
- add hack/verify-govet.sh
- add hack/test-go.sh

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.io/reviews/kubernetes/frakti/10)

<!-- Reviewable:end -->
",closed,True,2016-08-09 04:21:16,2016-08-13 01:58:35
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/11,https://api.github.com/repos/kubernetes/frakti/issues/11,add delete pod,"A part of #8 

Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/11)

<!-- Reviewable:end -->
",closed,True,2016-08-17 09:56:38,2016-08-22 06:23:43
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/12,https://api.github.com/repos/kubernetes/frakti/issues/12,add version,"Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/12)

<!-- Reviewable:end -->
",closed,True,2016-08-22 08:29:37,2016-08-23 09:04:54
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/13,https://api.github.com/repos/kubernetes/frakti/issues/13,add stop pod,"Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/13)

<!-- Reviewable:end -->
",closed,True,2016-08-22 08:44:22,2016-08-24 02:43:52
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/14,https://api.github.com/repos/kubernetes/frakti/issues/14,Add images api implementation,"<!-- Reviewable:start -->

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/14)

<!-- Reviewable:end -->
",closed,True,2016-08-23 01:18:51,2016-08-23 11:18:36
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/15,https://api.github.com/repos/kubernetes/frakti/issues/15,Update godep for kubelet runtime API,"This PR: 
-   Update godeps for kubelet runtime API
-   Add pkg/hyper/api for hyperd gRPC API

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/15)

<!-- Reviewable:end -->
",closed,True,2016-08-23 09:34:09,2016-08-24 02:27:00
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/16,https://api.github.com/repos/kubernetes/frakti/issues/16,Add PodSandboxStatus api implementation,"A part of #8 

Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/16)

<!-- Reviewable:end -->
",closed,True,2016-08-24 03:13:28,2016-08-25 14:14:08
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/17,https://api.github.com/repos/kubernetes/frakti/issues/17,Add CreatePodSandbox,"This PR adds CreatePodSandbox for frakti.

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/17)

<!-- Reviewable:end -->
",closed,True,2016-08-24 06:32:00,2016-08-25 01:59:08
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/18,https://api.github.com/repos/kubernetes/frakti/issues/18,correct types to api,"Signed-off-by: HaoZhang crazykev@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/18)

<!-- Reviewable:end -->
",closed,True,2016-08-24 19:04:03,2016-08-25 01:49:06
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/19,https://api.github.com/repos/kubernetes/frakti/issues/19,Make hyperd api pkg name same with hyperd's one,"Or else, hyperd will complain `api.PublicAPI` not defined.

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/19)

<!-- Reviewable:end -->
",closed,True,2016-08-25 14:55:18,2016-08-26 01:50:36
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/20,https://api.github.com/repos/kubernetes/frakti/issues/20,add list pod,"A part of #8 

Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/20)

<!-- Reviewable:end -->
",closed,True,2016-08-26 05:33:21,2016-08-27 06:36:54
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/21,https://api.github.com/repos/kubernetes/frakti/issues/21,add container status,"A part of #8 

Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/21)

<!-- Reviewable:end -->
",closed,True,2016-08-27 17:18:02,2016-09-01 08:20:16
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/22,https://api.github.com/repos/kubernetes/frakti/issues/22,add stop container,"Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/22)

<!-- Reviewable:end -->
",closed,True,2016-09-01 09:00:23,2016-09-14 07:50:39
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/23,https://api.github.com/repos/kubernetes/frakti/issues/23,Add e2e test framework in frakti,"1. add e2e test framework
2. add some scripts to build and run e2e tests
3. add a simple create podsandbox e2e test case as an example
4. fix some bugs in create podsandbox
5. add docs, describing how to run e2e tests

Ready for review. @feiskyer @resouer

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/23)

<!-- Reviewable:end -->
",closed,True,2016-09-04 07:06:04,2016-09-08 05:50:28
frakti,heartlock,https://github.com/kubernetes/frakti/pull/24,https://api.github.com/repos/kubernetes/frakti/issues/24,modify parameter of parseSandboxName(),"Signed-off-by: heartlock 21521209@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/24)

<!-- Reviewable:end -->
",closed,True,2016-09-13 03:18:33,2016-09-13 05:10:14
frakti,heartlock,https://github.com/kubernetes/frakti/pull/25,https://api.github.com/repos/kubernetes/frakti/issues/25,add podsandbox test case,"Signed-off-by: heartlock 21521209@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/25)

<!-- Reviewable:end -->
",closed,True,2016-09-13 06:57:26,2016-09-16 01:50:10
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/26,https://api.github.com/repos/kubernetes/frakti/issues/26,e2e image test,"1. ImageList will return digest only image.
2. make image pulling timeout related with pulling progress, if it stuck(without progress) over 1 minute, context will be cancelled.
3. add e2e image test cases

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/26)

<!-- Reviewable:end -->
",closed,True,2016-09-14 02:21:07,2016-09-19 05:36:14
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/27,https://api.github.com/repos/kubernetes/frakti/issues/27,add list containers,"Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/27)

<!-- Reviewable:end -->
",closed,True,2016-09-14 08:39:19,2016-09-19 05:34:21
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/28,https://api.github.com/repos/kubernetes/frakti/issues/28,Add start kubernetes with frakti to readme,"<!-- Reviewable:start -->

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/28)

<!-- Reviewable:end -->
",closed,True,2016-09-19 10:29:27,2016-09-19 10:42:06
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/29,https://api.github.com/repos/kubernetes/frakti/issues/29,Add create container,"Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/29)

<!-- Reviewable:end -->
",closed,True,2016-09-30 07:32:14,2016-11-16 09:16:14
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/30,https://api.github.com/repos/kubernetes/frakti/issues/30,Add Go Report,"<!-- Reviewable:start -->

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/30)

<!-- Reviewable:end -->
",closed,True,2016-10-10 03:35:30,2016-10-10 03:45:55
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/31,https://api.github.com/repos/kubernetes/frakti/issues/31,Update k8s related pkg and use k8s cri client as e2e test client,"- [x] Update k8s related pkg
- [x] use k8s cri client as e2e test client

Signed-off-by: Xianglin Gao xlgao@zju.edu.cn

<!-- Reviewable:start -->

---

This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/31)

<!-- Reviewable:end -->
",closed,True,2016-10-20 08:17:54,2016-10-24 09:33:57
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/32,https://api.github.com/repos/kubernetes/frakti/issues/32,fix the setps to start k8s with frakti,"Cause the code in k8s has changed, so update readme to fix the setps to start k8s with frakti.

Signed-off-by: Xianglin Gao <xlgao@zju.edu.cn>

<!-- Reviewable:start -->

---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/32)
<!-- Reviewable:end -->
",closed,True,2016-11-04 08:50:21,2016-11-04 11:38:24
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/33,https://api.github.com/repos/kubernetes/frakti/issues/33,Fix timestamp,"CRI requires all timestamps in nanoseconds instead of seconds.

cc @resouer

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/33)
<!-- Reviewable:end -->
",closed,True,2016-11-14 06:29:12,2016-11-14 06:46:56
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/34,https://api.github.com/repos/kubernetes/frakti/issues/34,Add status implementation ,"CRI adds a new Status rpc interface, we should implement it.

cc/ @resouer

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/34)
<!-- Reviewable:end -->
",closed,True,2016-11-14 07:40:03,2016-11-15 05:40:39
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/35,https://api.github.com/repos/kubernetes/frakti/issues/35,Enable experimental cri when starting kubernetes cluster,"It is required after https://github.com/kubernetes/kubernetes/pull/36319.

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/35)
<!-- Reviewable:end -->
",closed,True,2016-11-16 02:46:26,2016-11-16 03:01:07
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/36,https://api.github.com/repos/kubernetes/frakti/issues/36,Returns nil instead of error when image not found,"

<!-- Reviewable:start -->
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/36)
<!-- Reviewable:end -->
",closed,True,2016-11-16 02:57:04,2016-11-16 04:40:56
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/37,https://api.github.com/repos/kubernetes/frakti/issues/37,Fix pkg alias to align with golang convention,"Fix pkg alias to align with golang convention https://blog.golang.org/package-names

cc/ @resouer

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/37)
<!-- Reviewable:end -->
",closed,True,2016-11-16 03:26:26,2016-11-16 05:18:56
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/38,https://api.github.com/repos/kubernetes/frakti/issues/38,Fix json unmarshal in getAnnotationsFromLabels,"Should use pointer in `json.Unmarshal`.

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/38)
<!-- Reviewable:end -->
",closed,True,2016-11-16 06:17:41,2016-11-16 08:40:59
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/39,https://api.github.com/repos/kubernetes/frakti/issues/39,Get cpu/memory from pod-level cgroups,"Refer https://github.com/kubernetes/kubernetes/pull/31546 and https://github.com/kubernetes/kubernetes/blob/master/docs/proposals/pod-resource-management.md.

Notes: scripts to enable pod-level cgroups in local cluster:

```sh
export KUBERNETES_PROVIDER=local
# enable cri
export CONTAINER_RUNTIME=remote
export EXPERIMENTAL_CRI=true
export CONTAINER_RUNTIME_ENDPOINT=/var/run/frakti.sock
# also enable pod-level cgroups
export EXPERIMENTAL_CGROUPS_PER_QOS=true
export CGROUP_ROOT=/

hack/local-up-cluster.sh
```",closed,False,2016-11-16 07:25:01,2017-01-04 03:31:56
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/40,https://api.github.com/repos/kubernetes/frakti/issues/40,Add support for container logging,"The expected container log path is `PodSandboxConfig.LogDirectory/ContainerConfig.LogPath`

```
    // Path relative to PodSandboxConfig.LogDirectory for container to store
    // the log (STDOUT and STDERR) on the host.
    // E.g.,
    //     PodSandboxConfig.LogDirectory = `/var/log/pods/<podUID>/`
    //     ContainerConfig.LogPath = `containerName_Instance#.log`
    //
    // WARNING: Log management and how kubelet should interface with the
    // container logs are under active discussion in
    // https://issues.k8s.io/24677. There *may* be future change of direction
    // for logging as the discussion carries on.
    optional string log_path = 11;
```

cc/ @gnawux ",closed,False,2016-11-16 09:12:58,2017-01-11 07:58:58
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/41,https://api.github.com/repos/kubernetes/frakti/issues/41,Add support for streaming requests (attach/exec/port-forward),"Refer https://github.com/kubernetes/kubernetes/issues/29579.

- [x] execsync
- [x] exec
- [x] attach
- [ ] port-forward

This could be done by using [kubelet streaming liberay](https://github.com/kubernetes/kubernetes/tree/master/pkg/kubelet/server/streaming).",closed,False,2016-11-17 05:38:07,2016-11-30 11:16:23
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/42,https://api.github.com/repos/kubernetes/frakti/issues/42,Implements start container.,"This PR makes a workaround to start container by restarting the pod.

```sh
$ cluster/kubectl.sh run nginx --image=nginx
deployment ""nginx"" created

$ cluster/kubectl.sh describe pods
Name:		nginx-701339712-5helf
Namespace:	default
Node:		127.0.0.1/127.0.0.1
Start Time:	Thu, 17 Nov 2016 06:06:56 +0000
Labels:		pod-template-hash=701339712
		run=nginx
Status:		Running
IP:		192.168.140.50
Controllers:	ReplicaSet/nginx-701339712
Containers:
  nginx:
    Container ID:	hyper://e1e5988b92d87e1c878f35c81d744d0503b1e521cd61484a3fa203db6754e067
    Image:		nginx
    Image ID:		sha256:05a60462f8bafb215ddc5c20a364b5fb637670200a74a5bb13a1b23f64515561
    Port:
    State:		Running
      Started:		Thu, 17 Nov 2016 06:07:06 +0000
    Ready:		True
    Restart Count:	0
    Volume Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-w1ve3 (ro)
    Environment Variables:	<none>
Conditions:
  Type		Status
  Initialized 	True
  Ready 	True
  PodScheduled 	True
Volumes:
  default-token-w1ve3:
    Type:	Secret (a volume populated by a Secret)
    SecretName:	default-token-w1ve3
QoS Class:	BestEffort
Tolerations:	<none>
Events:
  FirstSeen	LastSeen	Count	From			SubObjectPath		Type		Reason		Message
  ---------	--------	-----	----			-------------		--------	------		-------
  53s		53s		1	{default-scheduler }				Normal		Scheduled	Successfully assigned nginx-701339712-5helf to 127.0.0.1
  53s		53s		1	{kubelet 127.0.0.1}				Normal		SandboxReceived	Pod sandbox received, it will be created.
  48s		48s		1	{kubelet 127.0.0.1}	spec.containers{nginx}	Normal		Pulling		pulling image ""nginx""
  47s		47s		1	{kubelet 127.0.0.1}	spec.containers{nginx}	Normal		Pulled		Successfully pulled image ""nginx""
  47s		47s		1	{kubelet 127.0.0.1}	spec.containers{nginx}	Normal		Created		Created container with id e1e5988b92d87e1c878f35c81d744d0503b1e521cd61484a3fa203db6754e067
  43s		43s		1	{kubelet 127.0.0.1}	spec.containers{nginx}	Normal		Started		Started container with id e1e5988b92d87e1c878f35c81d744d0503b1e521cd61484a3fa203db6754e067
```

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/42)
<!-- Reviewable:end -->
",closed,True,2016-11-17 06:14:28,2016-11-18 10:02:04
frakti,resouer,https://github.com/kubernetes/frakti/issues/43,https://api.github.com/repos/kubernetes/frakti/issues/43,Consider filter out unnecessary pods in ListPodSandbox  ,"For now we will list all pods (containers) managed by hyperd, thus user created pod will also be parsed by frakti and report `failed to parse container name`. 

We need to consider add a filter to it. (e.g. special prefix?)",closed,False,2016-11-21 07:16:32,2016-11-21 13:05:05
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/44,https://api.github.com/repos/kubernetes/frakti/issues/44,Continue the loop on name parse error,"Continue the loop on name parse error, assuming the errored container or sandbox is not managed by frakti.

Fixes #43.

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/44)
<!-- Reviewable:end -->
",closed,True,2016-11-21 12:21:17,2016-11-21 13:05:06
frakti,resouer,https://github.com/kubernetes/frakti/pull/45,https://api.github.com/repos/kubernetes/frakti/issues/45,Return err only instead,"resp is nil in grpc when there's error, this will cause nil pointer

cc @feiskyer

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/45)
<!-- Reviewable:end -->
",closed,True,2016-11-22 06:52:59,2016-11-22 08:22:52
frakti,resouer,https://github.com/kubernetes/frakti/pull/46,https://api.github.com/repos/kubernetes/frakti/issues/46,Pod level QoS support in frakti,"Fix: https://github.com/kubernetes/frakti/issues/39
1. Add a dependency to get system cgroup mount root
The dependency is: `github.com/opencontainers/runc/libcontainer/cgroups`
We need to avoid import `kubelet/cm`,  `kubelet/qos` directly since there's conflicts.
2. Read cgroup value set by Pod level QoS in kubelet, deal with BE independently (set default CPU & MEM instead)

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/46)
<!-- Reviewable:end -->
",closed,True,2016-11-22 08:18:28,2016-11-23 06:02:39
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/47,https://api.github.com/repos/kubernetes/frakti/issues/47,Implement ExecSync api,"1. move streaming related api (#41) to a separate file
2. vendor `kubelet/util/ioutils` and `docker/pkg/stdcopy` to implement io with hyper container.
3. implement(actually copy from hyperhq/hyper) stdout extractor for hyper
4. implement ExecSync api releated code.
5. add test case test for exec success and failure.

PTAL @feiskyer

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/47)
<!-- Reviewable:end -->
",closed,True,2016-11-23 04:57:02,2016-11-24 01:16:09
frakti,resouer,https://github.com/kubernetes/frakti/pull/48,https://api.github.com/repos/kubernetes/frakti/issues/48,Resource value has been fixed on upstream,"Tested on latest k8s master, parameter like `512m` also works, it will be translated to `512M`.

Remove this outdated comment.

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/48)
<!-- Reviewable:end -->
",closed,True,2016-11-23 07:39:58,2016-11-23 08:06:27
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/49,https://api.github.com/repos/kubernetes/frakti/issues/49,Implement exec/attach api,"part of #41 

- [x] add streaming server support
- [x] add releated hyper client
- [x] implement exec api
- [x] implement attach api
- [x] add some test case in e2e

<!-- Reviewable:start -->
---
This change is [<img src=""https://reviewable.kubernetes.io/review_button.svg"" height=""34"" align=""absmiddle"" alt=""Reviewable""/>](https://reviewable.kubernetes.io/reviews/kubernetes/frakti/49)
<!-- Reviewable:end -->
",closed,True,2016-11-25 08:33:07,2016-11-30 10:58:28
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/50,https://api.github.com/repos/kubernetes/frakti/issues/50,Support tty resize in exec and attach,This is because of lacking TTYResize in hyper api.,closed,False,2016-11-30 11:00:12,2018-08-09 22:31:36
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/51,https://api.github.com/repos/kubernetes/frakti/issues/51,Whether/How to support port-forwarding,Hypernetes doesn't support port forwarding. We should decide whether/how we could support it in frakti.,closed,False,2016-11-30 11:16:06,2017-03-09 11:37:16
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/52,https://api.github.com/repos/kubernetes/frakti/issues/52,Add TTY flag to AttachRequest,"update attach api since https://github.com/kubernetes/kubernetes/pull/36615 has merged.
fix a coding issue I left before.

If there is anything I could fix related with recent update in CRI, please @feiskyer notify me.",closed,True,2016-12-05 15:59:22,2016-12-06 02:30:31
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/53,https://api.github.com/repos/kubernetes/frakti/issues/53,Kubectl exec: connection refused,"When enabled frakti with kubelet, `kubectl exec` failed with errors:

```
cluster/kubectl.sh exec busybox-983667326-wlbt7 ip addr
Error from server: error dialing backend: dial tcp 172.16.1.134:22521: getsockopt: connection refused
```",closed,False,2016-12-06 08:34:11,2016-12-06 13:06:52
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/54,https://api.github.com/repos/kubernetes/frakti/issues/54,Kubectl attach: pod busybox-983667326-wlbt7_default not found,"When enabled frakti with kubelet, `kubectl attach` failed with errors:

```
# cluster/kubectl.sh get pods
NAME                      READY     STATUS    RESTARTS   AGE
busybox-983667326-wlbt7   1/1       Running   0          21m
# cluster/kubectl.sh attach busybox-983667326-wlbt7
If you don't see a command prompt, try pressing enter.
error: unable to upgrade connection: pod busybox-983667326-wlbt7_default not found
```

Kubelet is panic while doing attach:

```
I1206 08:36:42.017475   31088 server.go:741] POST /attach/default/busybox-983667326-wlbt7/busybox?error=1&output=1: (3.672091ms) 500
goroutine 1433 [running]:
k8s.io/kubernetes/pkg/httplog.(*respLogger).recordStatus(0xc42017cc40, 0x1f4)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/pkg/httplog/log.go:219 +0xbb
k8s.io/kubernetes/pkg/httplog.(*respLogger).WriteHeader(0xc42017cc40, 0x1f4)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/pkg/httplog/log.go:198 +0x35
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*Response).WriteHeader(0xc420bb8f00, 0x1f4)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/response.go:200 +0x41
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*Response).WriteErrorString(0xc420bb8f00, 0x1f4, 0xc4212ae180, 0x2d, 0xc421956180, 0x1f)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/response.go:180 +0x46
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*Response).WriteError(0xc420bb8f00, 0x1f4, 0x5b36f60, 0xc421326e10, 0x0, 0xc420bdc07d)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/response.go:165 +0x78
k8s.io/kubernetes/pkg/kubelet/server.(*Server).getAttach(0xc4200a35e0, 0xc4201fac00, 0xc420bb8f00)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/pkg/kubelet/server/server.go:611 +0x1fb
k8s.io/kubernetes/pkg/kubelet/server.(*Server).(k8s.io/kubernetes/pkg/kubelet/server.getAttach)-fm(0xc4201fac00, 0xc420bb8f00)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/pkg/kubelet/server/server.go:323 +0x3e
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*Container).dispatch.func6(0xc4201fac00, 0xc420bb8f00)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/container.go:267 +0x3e
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*FilterChain).ProcessFilter(0xc4201faea0, 0xc4201fac00, 0xc420bb8f00)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/filter.go:21 +0x95
k8s.io/kubernetes/pkg/kubelet/server.(*Server).InstallAuthFilter.func1(0xc4201fac00, 0xc420bb8f00, 0xc4201faea0)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/pkg/kubelet/server/server.go:249 +0x151
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*FilterChain).ProcessFilter(0xc4201faea0, 0xc4201fac00, 0xc420bb8f00)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/filter.go:19 +0x68
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*Container).dispatch(0xc420f78000, 0x5b5b920, 0xc42017cc40, 0xc421779d10)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/container.go:269 +0x996
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*Container).(k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.dispatch)-fm(0x5b5b920, 0xc42017cc40, 0xc421779d10)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/container.go:120 +0x48
net/http.HandlerFunc.ServeHTTP(0xc4204ce610, 0x5b5b920, 0xc42017cc40, 0xc421779d10)
	/usr/local/go/src/net/http/server.go:1726 +0x44
net/http.(*ServeMux).ServeHTTP(0xc420e69c50, 0x5b5b920, 0xc42017cc40, 0xc421779d10)
	/usr/local/go/src/net/http/server.go:2022 +0x7f
k8s.io/kubernetes/vendor/github.com/emicklei/go-restful.(*Container).ServeHTTP(0xc420f78000, 0x5b5b920, 0xc42017cc40, 0xc421779d10)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/vendor/github.com/emicklei/go-restful/container.go:287 +0x4d
k8s.io/kubernetes/pkg/kubelet/server.(*Server).ServeHTTP(0xc4200a3590, 0x5b5b920, 0xc42017cc40, 0xc421779d10)
	/gopath/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/pkg/kubelet/server/server.go:740 +0x10e
net/http.serverHandler.ServeHTTP(0xc4203ad600, 0x5b619a0, 0xc42121ed00, 0xc421779d10)
	/usr/local/go/src/net/http/server.go:2202 +0x7d
net/http.(*conn).serve(0xc420924300, 0x5b646a0, 0xc4216de1c0)
	/usr/local/go/src/net/http/server.go:1579 +0x4b7
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2293 +0x44d

logging error output: ""pod busybox-983667326-wlbt7_default not found""
```",closed,False,2016-12-06 08:39:49,2016-12-06 12:02:19
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/55,https://api.github.com/repos/kubernetes/frakti/issues/55,Start streaming server,Fixes #53.,closed,True,2016-12-06 11:14:27,2016-12-06 13:06:52
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/56,https://api.github.com/repos/kubernetes/frakti/issues/56,Service is not accessible,"Kubernetes service is not accessible after pod created, it is related with a hyperd bug introduced recently https://github.com/hyperhq/hyperd/issues/468.",closed,False,2016-12-13 06:36:45,2017-01-19 07:46:51
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/57,https://api.github.com/repos/kubernetes/frakti/issues/57,Update Start/Remove container API,"Main:
Since https://github.com/hyperhq/hyperd/pull/469 have been merged, update the workaround StartContainer api to a normal one. And implement RemoveContainer also.

Others:
1. remove a 2s sleep workaround in e2e test case to see whether it's still a problem.
2. update time layout corresponding to hyperd.",closed,True,2016-12-19 12:19:35,2016-12-21 03:29:37
frakti,resouer,https://github.com/kubernetes/frakti/issues/58,https://api.github.com/repos/kubernetes/frakti/issues/58,Support CNI network plugin in Frakti,"Need to support CNI plugin in Kubernetes +  Frakti. The implementation requires finding a way to generate network configuration from CNI and pass these information to hyperd in expected syntax.

A very similar approach is CNI plugin support in CRI-O, please check these for details: 

https://github.com/kubernetes-incubator/cri-o/pull/237
https://github.com/kubernetes-incubator/cri-o#setup-cni-networking

TODOs:

- [x] Basic cni network plugin support #62 
- [x] Checkpointing network info
- [x] CNI configure examples
- [x] CNI e2e tests
- [ ] ~~deployment, e.g. by `make install`~~
",closed,False,2016-12-21 08:25:13,2018-08-09 22:31:36
frakti,resouer,https://github.com/kubernetes/frakti/pull/59,https://api.github.com/repos/kubernetes/frakti/issues/59,Add image service endpoint,The latest k8s requires IMAGE_SERVICE_ENDPOINT set.,closed,True,2016-12-23 07:20:00,2016-12-23 09:02:02
frakti,resouer,https://github.com/kubernetes/frakti/pull/60,https://api.github.com/repos/kubernetes/frakti/issues/60,Enable container volume for frakti,"1. Generate `volDetail` based on Mounts
2. Generate `UserVolumeReference` for container spec
3. Add e2e test for volume container

NOTE: This can not work unless workaround https://github.com/hyperhq/hyperd/issues/487 ( for example, remove volume Validate(), will also fix it soon)",closed,True,2016-12-28 14:52:07,2017-01-10 11:06:26
frakti,YaoZengzeng,https://github.com/kubernetes/frakti/pull/61,https://api.github.com/repos/kubernetes/frakti/issues/61,Cni network plugin for frakti,Cni network plugin for frakti ,closed,True,2017-01-04 08:25:29,2017-01-06 07:00:50
frakti,YaoZengzeng,https://github.com/kubernetes/frakti/pull/62,https://api.github.com/repos/kubernetes/frakti/issues/62,Cni integration,,closed,True,2017-01-06 06:50:37,2017-01-19 09:04:31
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/63,https://api.github.com/repos/kubernetes/frakti/issues/63,fix typo,,closed,True,2017-01-10 08:56:36,2017-01-10 12:15:01
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/64,https://api.github.com/repos/kubernetes/frakti/issues/64,Add support for container logging,Fixes #40 ,closed,True,2017-01-10 09:49:58,2017-01-11 07:58:58
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/65,https://api.github.com/repos/kubernetes/frakti/issues/65,Add log test,"1. Remove useless code about e2e.
2. Remove runv in build hyperd, since we do not need it anymore.
3. Add test for log.",closed,True,2017-01-18 11:05:32,2017-01-19 09:07:16
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/66,https://api.github.com/repos/kubernetes/frakti/issues/66,Create pod failed: No command specified,"Encountered when verifying PR #62 by running `kubectl run --image=nginx nginx`:

```
I0118 11:38:52.943145   23702 manager.go:177] CreateContainer with request pod_sandbox_id:""k8s_POD.0_nginx-2932712833-gc82w_default_78e43fe8-dd72-11e6-b3f3-fa163ea7515e_a76f41fe"" config:<metadata:<name:""nginx"" attempt:0 > image:<image:"""" > working_dir:"""" envs:<key:""KUBERNETES_SERVICE_HOST"" value:""10.0.0.1"" > envs:<key:""KUBERNETES_SERVICE_PORT"" value:""443"" >....
E0118 11:38:52.943961   23702 container.go:45] Create container nginx in pod k8s_POD.0_nginx-2932712833-gc82w_default_78e43fe8-dd72-11e6-b3f3-fa163ea7515e_a76f41fe failed: rpc error: code = 2 desc = No command specified
```

The problem is `image:<image:"""" >`, which expected to be imageRef of nginx image.

cc/ @resouer @YaoZengzeng",closed,False,2017-01-18 11:50:17,2017-01-19 07:37:59
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/67,https://api.github.com/repos/kubernetes/frakti/issues/67,Update kubernetes vendor,This PR updates kubernetes vendor and also fixes #66 #56.,closed,True,2017-01-18 12:54:17,2017-01-19 07:37:59
frakti,resouer,https://github.com/kubernetes/frakti/issues/68,https://api.github.com/repos/kubernetes/frakti/issues/68,Use filter to get image list from hyperd,"Currently filter does not work properly, we are temporarily list all images and skip filter:
https://github.com/kubernetes/frakti/pull/67/files#diff-f7ec4be94a67a866942db2ebd145d763R278

This should be fixed as soon as hyperd being updated.",closed,False,2017-01-19 07:58:59,2017-01-19 09:38:06
frakti,heartlock,https://github.com/kubernetes/frakti/issues/69,https://api.github.com/repos/kubernetes/frakti/issues/69,cni integration support non bridge plugin,"Now frakti cni integration only support bridge plugin. I think it is necessary to support non bridge plugins like macvlan, calico etc. @feiskyer ",closed,False,2017-01-21 07:55:22,2017-08-10 03:08:10
frakti,heartlock,https://github.com/kubernetes/frakti/pull/70,https://api.github.com/repos/kubernetes/frakti/issues/70,Implement frakti Checkpoint,,closed,True,2017-01-23 15:37:25,2017-01-25 09:01:13
frakti,heartlock,https://github.com/kubernetes/frakti/pull/71,https://api.github.com/repos/kubernetes/frakti/issues/71,add cni configure example,,closed,True,2017-01-25 12:27:04,2017-02-02 12:42:26
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/72,https://api.github.com/repos/kubernetes/frakti/issues/72,Upgrade CRI to proto3,CRI has changed its API to proto3. We should upgrade our vendor.,closed,False,2017-02-04 03:46:04,2017-02-10 14:06:12
frakti,heartlock,https://github.com/kubernetes/frakti/pull/73,https://api.github.com/repos/kubernetes/frakti/issues/73,fix #72 Upgrade CRI to proto3 ,"Update CRI in frakti to proto v3

Ref: https://github.com/kubernetes/kubernetes/pull/39158",closed,True,2017-02-06 08:03:18,2017-02-10 14:06:24
frakti,heartlock,https://github.com/kubernetes/frakti/pull/74,https://api.github.com/repos/kubernetes/frakti/issues/74,cni e2e test,"step 1: configure cni in test-e2e.sh
step 2: add cni e2e test case",closed,True,2017-02-10 02:08:54,2017-02-13 06:19:49
frakti,kfox1111,https://github.com/kubernetes/frakti/issues/75,https://api.github.com/repos/kubernetes/frakti/issues/75,hybrid mode,"I really like the idea of being able to schedule pods into lightweight vm's. There are times though when having access to the underlying node is needed. So its rather awkward to only have one at a time. It would be awesome if the docker backend and hyper backend could co'exist on the host at the same time, and pick one or the other based on pod annotation. You could then even possibly use kubernetes itself, with a daemonset that's docker based, to enable and manage hyper support on a kubernetes cluster. Looking at hyper a bit, it looks like it could containerize nicely.
",closed,False,2017-02-12 17:22:37,2017-03-21 01:44:06
frakti,YaoZengzeng,https://github.com/kubernetes/frakti/pull/76,https://api.github.com/repos/kubernetes/frakti/issues/76,delete ns listener,,closed,True,2017-02-17 07:11:15,2017-02-21 03:35:06
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/77,https://api.github.com/repos/kubernetes/frakti/issues/77,Make Runtime api same as kubernetes/pkg/kubelet/api.RuntimeService,"And also use k8s util ExitError as wrapper for exitCode.

This PR will help make support multiple runtime easier.

Signed-off-by: Crazykev <crazykev@zju.edu.cn>",closed,True,2017-02-17 10:59:31,2017-03-06 03:24:27
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/78,https://api.github.com/repos/kubernetes/frakti/issues/78,Update README,`EXPERIMENTAL_CRI` is not required now.,closed,True,2017-02-21 02:04:20,2017-02-21 03:34:20
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/79,https://api.github.com/repos/kubernetes/frakti/issues/79,Add go v1.8 to travis,,closed,True,2017-02-21 03:38:54,2017-02-21 06:35:50
frakti,fate-grand-order,https://github.com/kubernetes/frakti/pull/80,https://api.github.com/repos/kubernetes/frakti/issues/80,"fix misspell ""destroy"" in sandbox.go",,closed,True,2017-02-21 14:45:57,2017-02-21 15:10:07
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/81,https://api.github.com/repos/kubernetes/frakti/issues/81,Check the response of PodRemove,Check the response of `hyper.PodRemove` and fix potential panic.,closed,True,2017-03-06 06:39:12,2017-03-06 07:45:50
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/82,https://api.github.com/repos/kubernetes/frakti/issues/82,Add support for port forwarding,"This PR adds port forwarding for frakti.

Fixes #51.

Depending on https://github.com/hyperhq/hyperd/pull/533.",closed,True,2017-03-06 14:01:11,2017-03-09 14:41:37
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/83,https://api.github.com/repos/kubernetes/frakti/issues/83,Only filter images when ImageSpec.Image is not null,Only filter images when ImageSpec.Image is not null.,closed,True,2017-03-09 11:23:00,2017-03-14 12:17:55
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/84,https://api.github.com/repos/kubernetes/frakti/issues/84,Add tty resize support in attach/exec,"vendor k8s.io/kubernetes/pkg/kubelet/container to reuse `HandleResizing()`
since we need to vendor dockershim later, it should be fine to vendor so much code here.

Also lower lower k8s.io/client-go 1 commit to be compatible with apimachinery(according to update time in client-go and apimachinery repo)

@feiskyer PTAL",closed,True,2017-03-13 05:40:49,2017-03-13 07:02:03
frakti,YaoZengzeng,https://github.com/kubernetes/frakti/pull/85,https://api.github.com/repos/kubernetes/frakti/issues/85,K8s cni compatible,make frakti's cni version compatible with k8s,closed,True,2017-03-13 07:29:48,2017-03-13 10:13:58
frakti,resouer,https://github.com/kubernetes/frakti/issues/86,https://api.github.com/repos/kubernetes/frakti/issues/86,/var/lib/frakti/sandbox does not automatically create,"In fresh new environment:
```
E0314 02:26:12.316677   11713 hyper_checkpoint.go:119] Failed to list checkpoint store: open /var/lib/frakti/sandbox: no such file or directory
```

@YaoZengzeng Is this directory expected to automatically created?",closed,False,2017-03-14 02:29:07,2017-03-15 01:39:12
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/87,https://api.github.com/repos/kubernetes/frakti/issues/87,Clean up sandbox checkpoint and network plugin properly,"Currently, sandbox checkpoint is only removed after the pod is deleted successfully. However, if the hyper pod has already been removed outside, the checkpoint will be left over and kubelet will always fail on stopping sandbox.

We should ensure checkpoint and network plugin are cleaned up properly once frakti has detected the sandbox has already been non-exist.",closed,False,2017-03-14 04:55:46,2017-03-16 02:19:45
frakti,heartlock,https://github.com/kubernetes/frakti/pull/88,https://api.github.com/repos/kubernetes/frakti/issues/88,fix issue#86 create /var/lib/frakti/sandbox when init checkpoint,fix #86 ,closed,True,2017-03-14 07:51:29,2017-03-15 01:39:12
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/89,https://api.github.com/repos/kubernetes/frakti/issues/89,Connect hyperd api with reconnection,"This PR adds reconnection for hyperd API, or else frakti will lose connection when hyperd is restarted.",closed,True,2017-03-14 12:19:02,2017-03-14 13:00:47
frakti,heartlock,https://github.com/kubernetes/frakti/pull/90,https://api.github.com/repos/kubernetes/frakti/issues/90,fix #87 clean up checkpoint once sandbox non-exist,fix #87 ,closed,True,2017-03-15 06:33:10,2017-03-16 02:19:45
frakti,Crazykev,https://github.com/kubernetes/frakti/issues/91,https://api.github.com/repos/kubernetes/frakti/issues/91,Run podsandbox panic,"```
I0315 20:12:03.360743   12416 manager.go:107] RunPodSandbox with request &RunPodSandboxRequest{Config:&PodSandboxConfig{Metadata:&PodSandboxMetadata{Name:busybox,Uid:c57bea76-08a6-11e7-a282-4ccc6a36dc71,Namespace:default,Attempt:0,},Hostname:busybox,LogDirectory:/var/log/pods/c57bea76-08a6-11e7-a282-4ccc6a36dc71,DnsConfig:&DNSConfig{Servers:[8.8.8.8],Searches:[],Options:[ndots:5],},PortMappings:[&PortMapping{Protocol:TCP,ContainerPort:8080,HostPort:0,HostIp:,}],Labels:map[string]string{io.kubernetes.pod.name: busybox,io.kubernetes.pod.namespace: default,io.kubernetes.pod.uid: c57bea76-08a6-11e7-a282-4ccc6a36dc71,name: busybox,},Annotations:map[string]string{kubernetes.io/config.seen: 2017-03-14T19:10:02.897218293+08:00,kubernetes.io/config.source: api,},Linux:&LinuxPodSandboxConfig{CgroupParent:/kubepods/besteffort/podc57bea76-08a6-11e7-a282-4ccc6a36dc71,SecurityContext:&LinuxSandboxSecurityContext{NamespaceOptions:&NamespaceOption{HostNetwork:false,HostPid:false,HostIpc:false,},SelinuxOptions:nil,RunAsUser:nil,ReadonlyRootfs:false,SupplementalGroups:[],Privileged:false,},},},}
I0315 20:12:03.363198   12416 network.go:66] Get interface information in container ns, skip non-veth device lo
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x48b8d2]

goroutine 31 [running]:
panic(0x15fb640, 0xc4200140b0)
	/usr/local/go/src/runtime/panic.go:500 +0x1a1
k8s.io/frakti/pkg/hyper.networkInfoFromNs(0x2320f00, 0xc420478370, 0x37)
	/home/crazykev/go-project/src/k8s.io/frakti/pkg/hyper/network.go:46 +0xa2
k8s.io/frakti/pkg/hyper.(*Runtime).RunPodSandbox(0xc4203a5b40, 0xc4203b22a0, 0x1d, 0xc42053da40, 0x1, 0x1)
	/home/crazykev/go-project/src/k8s.io/frakti/pkg/hyper/sandbox.go:62 +0x49b
k8s.io/frakti/pkg/manager.(*FraktiManager).RunPodSandbox(0xc4203a5c40, 0x7f4f39ec7000, 0xc4202bacc0, 0xc42008c260, 0x0, 0x1d8, 0x1d8)
	/home/crazykev/go-project/src/k8s.io/frakti/pkg/manager/manager.go:109 +0x123
k8s.io/frakti/vendor/k8s.io/kubernetes/pkg/kubelet/api/v1alpha1/runtime._RuntimeService_RunPodSandbox_Handler(0x176a820, 0xc4203a5c40, 0x7f4f39ec7000, 0xc4202bacc0, 0xc42022d810, 0x0, 0x0, 0x0, 0x523f10, 0xc4204a0070)
	/home/crazykev/go-project/src/k8s.io/frakti/vendor/k8s.io/kubernetes/pkg/kubelet/api/v1alpha1/runtime/api.pb.go:2300 +0x27d
k8s.io/frakti/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc420418f00, 0x2322ee0, 0xc420490a20, 0xc4200bbe00, 0xc4203f74d0, 0x22fc818, 0xc4202bac90, 0x0, 0x0)
	/home/crazykev/go-project/src/k8s.io/frakti/vendor/google.golang.org/grpc/server.go:608 +0xc50
k8s.io/frakti/vendor/google.golang.org/grpc.(*Server).handleStream(0xc420418f00, 0x2322ee0, 0xc420490a20, 0xc4200bbe00, 0xc4202bac90)
	/home/crazykev/go-project/src/k8s.io/frakti/vendor/google.golang.org/grpc/server.go:766 +0x6b0
k8s.io/frakti/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc4204bbab0, 0xc420418f00, 0x2322ee0, 0xc420490a20, 0xc4200bbe00)
	/home/crazykev/go-project/src/k8s.io/frakti/vendor/google.golang.org/grpc/server.go:419 +0xab
created by k8s.io/frakti/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/home/crazykev/go-project/src/k8s.io/frakti/vendor/google.golang.org/grpc/server.go:420 +0xa3
```",closed,False,2017-03-15 12:21:41,2017-03-16 07:30:21
frakti,YaoZengzeng,https://github.com/kubernetes/frakti/pull/92,https://api.github.com/repos/kubernetes/frakti/issues/92,fix the bug that result is nil if no cni plugin provided,"Maybe I forgot to refresh my last pr #85 , after I fixed this bug.
I'm so sorry for my negligenceã€‚

Signed-off-by: Yao Zengzeng <yaozengzeng@zju.edu.cn>",closed,True,2017-03-16 05:18:50,2017-03-16 05:30:15
frakti,resouer,https://github.com/kubernetes/frakti/pull/93,https://api.github.com/repos/kubernetes/frakti/issues/93,Enable frakti to mix docker runtime with hyper runtime,"Fixes #75 

**Special Note:**
Also fixed bug: version of `apimachinery` pkg in current frakti is wrong, which is introduced by #73
The right way to fix this is making sure version of apimachinery is set by client-go (step 3):
1. (optional) under `$GOPATH/src/k8s.io/frakti`, `godep restore`
2. (optional) under `$GOPATH/src/k8s.io/kubernetes`, `godep restore`
3. under `$GOPATH/src/k8s.io/client-go`, `godep restore`
4. under `$GOPATH/src/k8s.io/frakti`, `godep save ./...`

Considering add this to godep save script in `hack`.

**Implementation details:**

Any pod: 
1. with annotation `runtime.frakti.alpha.kubernetes.io/OSContainer`
2. is configured to use host namespace (net, pid, ipc)

will be handled by build-in dockershim, which name is `alternative runtime`.

Special note for dockershim as alternative runtime:
1. individual streaming server is used for it.
2. CNI plugin will be re-used by alternative runtime, and it will fail if no CNI plugin provided (since in the future `kubenet` will be changed to CNI so we think this is OK).

Two tricks are included in this PR:
1. When restarted, frakti will have to load all containers from hyperd and dockerd to update alternative runtime cache. Please note, dockershim is able to filter out non-k8s managed containers.
2. Image operations (pull, list, remove) are executed parallel for two runtimes. So we only returns **Intersection** (suggested by @Crazykev ) of two runtimes as the view of frakti's image list.

I am not sure if we want to make alternative runtime optional (there's a TODO to address).
 
cc @feiskyer @gnawux",closed,True,2017-03-17 07:10:54,2017-03-20 14:17:50
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/94,https://api.github.com/repos/kubernetes/frakti/issues/94,Avoid panic when image spec in filter is nil,"cc @feiskyer 

Signed-off-by: Xianglin Gao <xlgao@zju.edu.cn>",closed,True,2017-03-17 07:17:37,2017-03-17 07:29:59
frakti,resouer,https://github.com/kubernetes/frakti/issues/95,https://api.github.com/repos/kubernetes/frakti/issues/95,Pod level resource need to be updated in frakti,"The design doc of pod level resource has been updated with more details, and there's something different from our original design:

according to https://github.com/kubernetes/community/blob/master/contributors/design-proposals/pod-resource-management.md#burstable-qos, there's chance that a BU pod does not have memory limit, so it's mem limit will be set to node's available resource. But frakti will keep using this value (which is obvious too big), it would be wrong.

Need to figure out this use case and set default value instead (may need to import qos pkg).",closed,False,2017-03-19 09:16:11,2017-03-22 23:28:14
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/96,https://api.github.com/repos/kubernetes/frakti/issues/96,update godep-save.sh to enable restore some pkg before save,"Add pre-restore mechanism in godep-save.sh, make sure we correctly update pkg like `k8s.io/client-go`. 
as @resouer mentioned in #93 .

This is enabled by adding `--pre-restore` flag, since we only need this when update these particular pkg. 

Signed-off-by: Crazykev <crazykev@zju.edu.cn>",closed,True,2017-03-20 06:51:17,2017-03-21 01:57:00
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/97,https://api.github.com/repos/kubernetes/frakti/issues/97,Create logs dir automatically if it doesn't exist,,closed,False,2017-03-21 03:48:20,2017-03-23 06:26:24
frakti,resouer,https://github.com/kubernetes/frakti/issues/98,https://api.github.com/repos/kubernetes/frakti/issues/98,Considering support systemd cgroups in frakti,"Since we now have docker as alternative runtime. We should consider support systemd cgroups in frakti because in many distribution (e.g. CentOS), dockerd use systemd as default.

Or, we should let user know that only cgroupfs mode of dockerd is supported at least.",closed,False,2017-03-21 06:16:27,2017-03-22 09:44:14
frakti,resouer,https://github.com/kubernetes/frakti/issues/99,https://api.github.com/repos/kubernetes/frakti/issues/99,Integrate Unikernels runtime by using frakti,"**This is a issue for Google Summer of Code 2017, view docs [here](https://docs.google.com/document/d/1Vld4j0B-wk1A1827gIc5fzWHJlzQVqcYQnCAKJwe_ZM/edit).**

Frakti is a well-designed CRI implementation for hypervisor-based runtimes, it would be not so hard to have Unikernels runtime into its picture.

A build-in `unikshim`(or any other name) for frakti need to be developed to manage Unikernels workloads.

**Implementation Tips:**

1. The workflow will be like:
```
kubelet -> frakti -> hypervisor manager (libvirt or QEMU) -> Unikernels machines
```

2. frakti has already implemented Kubernetes resource model, CNI network, native volumes, so most of upper-layer concepts from Kubernetes can be easily fit to Unikernels container.

**Goals**

1. A PoC that can manage Unikernels workload lifecycle with Kubernetes.
2. All pod level validation tests should be passed by using [cri-tools](https://github.com/kubernetes-incubator/cri-tools)
3. Only `one-pod-one-container` model is required.
4. Only consider using CNI bridge mode network.

**Nice To Have**

1. Implementation of container level API in `unikshim`.

**Non Goals**

1. Supporting all kinds of CNI plugins other than bridge mode
2. Supporting all kinds of volume plugins other than `emptyDir` and `hostPath`.
3. Any other features not in the scope of CRI implementation (not covered by CRI validation tests in cri-tools)",closed,False,2017-03-21 08:20:11,2018-03-17 17:25:17
frakti,Crazykev,https://github.com/kubernetes/frakti/issues/100,https://api.github.com/repos/kubernetes/frakti/issues/100,Force kill container if timeout,"Current implement `StopContainer()` only cancel request when timeout, this forcibly kill container should guaranteed by underlying runtime, will fix this after https://github.com/hyperhq/hyperd/pull/559 merged",closed,False,2017-03-21 08:55:46,2017-03-27 13:42:16
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/101,https://api.github.com/repos/kubernetes/frakti/issues/101,Make frakti flags more comfortable,"Make frakti flags more comfortable by using`github.com/spf13/pflag`.

cc @resouer ",closed,True,2017-03-21 09:56:56,2017-03-22 01:48:54
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/102,https://api.github.com/repos/kubernetes/frakti/issues/102,Add cluster deploy guide,,closed,True,2017-03-21 10:23:57,2017-03-22 05:05:55
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/103,https://api.github.com/repos/kubernetes/frakti/issues/103,Support systemd cgroup driver,Signed-off-by: Crazykev <crazykev@zju.edu.cn>,closed,True,2017-03-22 09:16:39,2017-03-22 10:02:32
frakti,resouer,https://github.com/kubernetes/frakti/pull/104,https://api.github.com/repos/kubernetes/frakti/issues/104,Fixes cgroups for burstable,Fixes: #95 ,closed,True,2017-03-22 14:57:45,2017-03-23 01:38:51
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/105,https://api.github.com/repos/kubernetes/frakti/issues/105,Upgrade to CNI v0.5.1,"Many CNI Plugins don't properly support DEL (See https://github.com/kubernetes/kubernetes/issues/43488 for more details).

We should upgrade to CNI v0.5.1 after https://github.com/kubernetes/kubernetes/pull/43546 is merged. ",closed,False,2017-03-22 23:45:16,2017-03-23 05:25:03
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/106,https://api.github.com/repos/kubernetes/frakti/issues/106,Redundant flags because of introducing dockershim,"There are many redundant flags because of introducing dockershim. We should clean them up.

```
      --storage-driver-buffer-duration duration   Writes in the storage driver will be buffered for this duration, and committed to the non memory backends as a single transaction (default 1m0s)
      --storage-driver-db string                  database name (default ""cadvisor"")
      --storage-driver-host string                database host:port (default ""localhost:8086"")
      --storage-driver-password string            database password (default ""root"")
      --storage-driver-secure                     use secure connection with database
      --storage-driver-table string               table name (default ""stats"")
      --storage-driver-user string                database username (default ""root"")
```",closed,False,2017-03-22 23:48:40,2017-03-23 06:25:38
frakti,resouer,https://github.com/kubernetes/frakti/pull/107,https://api.github.com/repos/kubernetes/frakti/issues/107,Fix log-dir and create path,"Fixes #106 #97 

I copied `flags.go` out of vendor because we can only call `Hidden` before `Parse()`. So we have to modify `flags.go`.",closed,True,2017-03-23 02:48:21,2017-03-23 06:59:48
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/108,https://api.github.com/repos/kubernetes/frakti/issues/108,warning: failed to create symbolic link for host-networked pods,"When creating a pod with host network, it failed to create symbolic link for logs (warning).

pod config 

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: pod
  labels:
    name: pod
spec:
  hostNetwork: true
  dnsPolicy: ClusterFirst
  containers:
  - name: nginx
    image: nginx
```

Kubelet events:

```
df21b37c7a7f3aff14ba2034b76d4896406cf501cc59f80b74b49e032934
  36m		36m		1	kubelet, instance-2	spec.containers{nginx}	Warning		Failed		Failed to start container with id a741df21b37c7a7f3aff14ba2034b76d4896406cf501cc59f80b74b49e032934 with error: rpc error: code = 2 desc = failed to create symbolic link ""/var/log/pods/318a363b-0f73-11e7-9e6c-42010a8c0003/nginx_0.log"" to the container log file """" for container ""a741df21b37c7a7f3aff14ba2034b76d4896406cf501cc59f80b74b49e032934"": symlink  /var/log/pods/318a363b-0f73-11e7-9e6c-42010a8c0003/nginx_0.log: no such file or directory
  36m		36m		1	kubelet, instance-2			Warning		FailedSync	Error syncing pod, skipping: failed to ""StartContainer"" for ""nginx"" with rpc error: code = 2 desc = failed to create symbolic link ""/var/log/pods/318a363b-0f73-11e7-9e6c-42010a8c0003/nginx_0.log"" to the container log file """" for container ""a741df21b37c7a7f3aff14ba2034b76d4896406cf501cc59f80b74b49e032934"": symlink  /var/log/pods/318a363b-0f73-11e7-9e6c-42010a8c0003/nginx_0.log: no such file or directory: ""Start Container Failed""
```",closed,False,2017-03-23 03:26:47,2017-04-19 07:06:55
frakti,resouer,https://github.com/kubernetes/frakti/issues/109,https://api.github.com/repos/kubernetes/frakti/issues/109,Kubernetes node e2e tests,"Node e2e test (conformance) results of latest **frakti** on master branch + **hyperd 0.8.0.1** + **Kubernetes v160-beta.4**.

The test command is:
```
make test-e2e-node PARALLELISM=2 TEST_ARGS='--kubelet-flags=""--container-runtime=remote --container-runtime-endpoint=/var/run/frakti.sock --feature-gates=AllAlpha=true,Accelerators=false""' FOCUS=""\[Conformance\]""
```
The node e2e result is:

```
Summarizing 9 Failures:

[Fail] [k8s.io] EmptyDir volumes [It] should support (non-root,0644,tmpfs) [Conformance] [Volume] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e/framework/util.go:2197

[Fail] [k8s.io] EmptyDir volumes [It] should support (non-root,0777,default) [Conformance] [Volume] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e/framework/util.go:2197

[Fail] [k8s.io] Projected [It] should project all components that make up the projection API [Conformance] [Volume] [Projection] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e/framework/util.go:2197

[Fail] [k8s.io] EmptyDir volumes [It] should support (non-root,0644,default) [Conformance] [Volume] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e/framework/util.go:2197

[Fail] [k8s.io] EmptyDir volumes [It] should support (non-root,0666,default) [Conformance] [Volume] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e/framework/util.go:2197

[Fail] [k8s.io] KubeletManagedEtcHosts [It] should test kubelet managed /etc/hosts file [Conformance] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e/framework/exec_util.go:107

[Fail] [k8s.io] EmptyDir volumes [It] should support (non-root,0777,tmpfs) [Conformance] [Volume] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e/framework/util.go:2197

[Fail] [k8s.io] Kubelet when scheduling a read only busybox container [It] it should not write to root filesystem [Conformance] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e_node/kubelet_test.go:151

[Fail] [k8s.io] EmptyDir volumes [It] should support (non-root,0666,tmpfs) [Conformance] [Volume] 
/root/go-project/src/k8s.io/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/e2e/framework/util.go:2197

Ran 121 of 211 Specs in 1987.027 seconds
FAIL! -- 112 Passed | 9 Failed | 0 Pending | 90 Skipped 
```
In the 9 failed issues:
6 issues related mound volume with specified mode, which seems buggy in hyperd.
1 issue is know issue of hyperd https://github.com/hyperhq/hyperd/issues/564
2 issues still have no clear root cause found

cc @feiskyer",closed,False,2017-03-23 11:16:10,2017-06-26 01:54:40
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/110,https://api.github.com/repos/kubernetes/frakti/issues/110,Support CNI network plugins setting dynamically,"The current frakti requires CNI plugins set before starting. However, with latest kubeadm and kubernetes, network plugins may be initialized dynamically.

Related upstream issue: https://github.com/kubernetes/kubernetes/pull/43474.",closed,False,2017-03-23 12:03:10,2017-03-28 02:19:53
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/111,https://api.github.com/repos/kubernetes/frakti/issues/111,Add CHANGELOG.md,,closed,True,2017-03-23 12:24:31,2017-03-23 12:25:09
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/112,https://api.github.com/repos/kubernetes/frakti/issues/112,Update deploy docs,,closed,True,2017-03-23 12:28:24,2017-03-23 13:19:29
frakti,heartlock,https://github.com/kubernetes/frakti/pull/113,https://api.github.com/repos/kubernetes/frakti/issues/113,setting cni network plugins dynamically,"fix #110 
if we want to use https://github.com/kubernetes/kubernetes/pull/43474 in dockershim in frakti, kubernetes vendor must be updated. @feiskyer ",closed,True,2017-03-23 15:02:12,2017-03-28 02:19:53
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/114,https://api.github.com/repos/kubernetes/frakti/issues/114,Enable force kill container if timeout,"ref: #100 
Signed-off-by: Crazykev <crazykev@zju.edu.cn>",closed,True,2017-03-27 12:11:45,2017-03-27 12:54:07
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/115,https://api.github.com/repos/kubernetes/frakti/issues/115,Support dns domain and options,"Currently, only nameserver is set in `/etc/resolv.conf`. We should also set dns search domain and options.

Expected `/etc/resolv.conf` example:

```
search default.svc.cluster.local svc.cluster.local cluster.local home
nameserver 10.96.0.10
options ndots:5
```",closed,False,2017-03-28 02:22:26,2017-04-10 13:39:10
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/116,https://api.github.com/repos/kubernetes/frakti/issues/116,remove/stop not exist pod return success,Signed-off-by: Crazykev <crazykev@zju.edu.cn>,closed,True,2017-03-30 09:33:22,2017-03-30 14:24:15
frakti,xlgao-zju,https://github.com/kubernetes/frakti/issues/117,https://api.github.com/repos/kubernetes/frakti/issues/117,Stop container time out,"When I use cri-tools to test frakti(docker runtime), I find stop container will time out.

```
â€¢ Failure [60.490 seconds]
[k8s.io] Container
/home/xlgao/gocode/src/github.com/kubernetes-incubator/cri-tools/pkg/framework/framework.go:72
  runtime should support basic operations on container
  /home/xlgao/gocode/src/github.com/kubernetes-incubator/cri-tools/pkg/validate/container.go:111
    runtime should support stopping container [Conformance] [It]
    /home/xlgao/gocode/src/github.com/kubernetes-incubator/cri-tools/pkg/validate/container.go:89

    Mar 31 17:04:17.269: stop container ""0924ab698482d90591ff93552a44144340836760c04929370e834bd41abcef7d"" timeout.
    

    /home/xlgao/gocode/src/github.com/kubernetes-incubator/cri-tools/pkg/validate/container.go:215

```",closed,False,2017-03-31 11:26:03,2017-04-12 07:47:34
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/118,https://api.github.com/repos/kubernetes/frakti/issues/118,Avoid panic when labels are nil,"Frakti will panic, when we annotation is not nil but labels are nil.

/cc @feiskyer 

Signed-off-by: Xianglin Gao <xlgao@zju.edu.cn>",closed,True,2017-04-01 08:12:52,2017-04-01 15:07:37
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/119,https://api.github.com/repos/kubernetes/frakti/issues/119,Support dns options and searches,"Closes #115.

cc @resouer ",closed,True,2017-04-07 02:59:20,2017-04-10 13:51:42
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/120,https://api.github.com/repos/kubernetes/frakti/issues/120,Enable full exec command failed tests,"The test is disabled at [#119](https://github.com/kubernetes/frakti/pull/119/files#diff-a1420ece84f1e6c17e782f06c394ad94R71) because of https://github.com/hyperhq/hyperd/issues/604. 

We should enable it again after https://github.com/hyperhq/hyperd/issues/604 is fixed.",closed,False,2017-04-13 01:40:59,2017-04-19 07:06:16
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/121,https://api.github.com/repos/kubernetes/frakti/issues/121,[NEED TEST]Check stderr in streaming test since upstream fixed,"Ref: #120 
Signed-off-by: Crazykev <crazykev@zju.edu.cn>",closed,True,2017-04-18 02:37:01,2017-04-19 07:06:08
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/122,https://api.github.com/repos/kubernetes/frakti/issues/122,Support port mapping,CNI doesn't do port-mapping today. We could support port mapping via iptables.,closed,False,2017-04-21 06:28:42,2017-06-09 03:32:01
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/123,https://api.github.com/repos/kubernetes/frakti/issues/123,kubectl attach broken,"Test ENV:
kubernetes 1.6 + frakti + hyperd

Issue:
`kubectl attach` does not return anything

Expected:
`kubectl attach` should return process output in the container",closed,False,2017-04-21 06:31:13,2017-04-24 06:52:41
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/124,https://api.github.com/repos/kubernetes/frakti/issues/124,nosuchimagehash: No such image: busybox@sha256:32f093055929dbc23dec4d03e09dfe971f5973a9ca5cf059cbfb644c206aa83f,"This is problem caused by hyperd, related with https://github.com/hyperhq/hyperd/issues/613.",closed,False,2017-04-21 06:32:55,2017-05-03 09:38:57
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/125,https://api.github.com/repos/kubernetes/frakti/issues/125,Fix hostPid support,"We should update dockershim vendor to support hostPid.

Refer https://github.com/kubernetes/kubernetes/pull/44097, which already part kubernetes v1.6.2.",closed,False,2017-04-21 08:05:17,2017-04-26 10:22:52
frakti,xlgao-zju,https://github.com/kubernetes/frakti/pull/126,https://api.github.com/repos/kubernetes/frakti/issues/126,Update vendor,close #125 ,closed,True,2017-04-25 09:42:23,2017-04-26 10:49:41
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/127,https://api.github.com/repos/kubernetes/frakti/issues/127,Enhance test,"1. Increase frakti log level in e2e test for debug purpose, since recently we have some random stuck issue in travis.
2. fix some script bug in setup hyper",closed,True,2017-04-25 11:28:45,2017-04-26 10:51:13
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/128,https://api.github.com/repos/kubernetes/frakti/issues/128,Install CNI by clone instead of go install,,closed,True,2017-04-26 05:20:41,2017-04-26 09:59:34
frakti,heartlock,https://github.com/kubernetes/frakti/pull/129,https://api.github.com/repos/kubernetes/frakti/issues/129,[WIP]Add e2e test for streaming,,closed,True,2017-04-27 06:25:56,2017-04-27 09:02:20
frakti,resouer,https://github.com/kubernetes/frakti/pull/130,https://api.github.com/repos/kubernetes/frakti/issues/130,Use new frakti png,"A new frakti img with multiple runtimes supported

cc @feiskyer ",closed,True,2017-04-28 02:42:12,2017-04-28 08:44:55
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/131,https://api.github.com/repos/kubernetes/frakti/issues/131,Kubeadm init - Does not complete,"(Are the deployment instructions even up to date? starting to see some steps left out)

Using Centos 7.3 with usual repo updates

Follow the deployment steps per : https://github.com/kubernetes/frakti/blob/master/docs/deploy.md

Using 3 VMs (1 master, 2 minons) or that's the plan

By the way the repos are updated with current 1.6.2, the ""note"" below the yum install references an older 1.6.0-beta 4

On master run kubeadm init --pod-network-cidr 10.244.0.0/16 --kubernetes-version stable (latest gives 1.7 alpha)

kubeadm does all of the preflight checks and as expected everything passes. Note there should be a step prior to running this that enables and starts kubelet service, otherwise the warning will pop up.

result... hung at:
[apiclient] Created API client, waiting for the control plane to become ready

No docker images are pulled, no docker containers appear to be running or created

First time I have had issues with kubeadm under a normal docker based install over attempting a fresh Frakti one. These are all fresh VMs so nothing legacy on them other than Centos 7.3. FOllowed deployment instructions exactly.

DB

Also curious as to why this has two Hypervisor entries: refer to Hypervisor=libvert and Hypervisor=qemu, is this not redundant and would the config not read the second entry?

echo -e ""Hypervisor=libvirt\n\
Kernel=/var/lib/hyper/kernel\n\
Initrd=/var/lib/hyper/hyper-initrd.img\n\
Hypervisor=qemu\n\
StorageDriver=overlay\n\
gRPCHost=127.0.0.1:22318"" > /etc/hyper/config

Another thing to note is kubelet failed:

-- Unit kubelet.service has begun starting up.
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.355299    2726 feature_gate.go:144] feature gates: map[DynamicVolumeProvisioning:true TaintBasedE
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.359676    2726 server.go:232] Starting Kubelet configuration sync loop
May 01 18:14:33 kube01 kubelet[2726]: E0501 18:14:33.359702    2726 server.go:407] failed to init dynamic Kubelet configuration sync: cloud provider w
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.375962    2726 manager.go:143] cAdvisor running in container: ""/""
May 01 18:14:33 kube01 kubelet[2726]: W0501 18:14:33.476000    2726 manager.go:151] unable to connect to Rkt api service: rkt: cannot tcp Dial rkt api
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.550699    2726 fs.go:117] Filesystem partitions: map[/dev/vda1:{mountpoint:/ major:253 minor:1 fs
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.552778    2726 manager.go:198] Machine: {NumCores:2 CpuFrequency:2399998 MemoryCapacity:397522534
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.588629    2726 manager.go:204] Version: {KernelVersion:3.10.0-514.16.1.el7.x86_64 ContainerOsVers
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.589372    2726 server.go:509] --cgroups-per-qos enabled, but --cgroup-root was not specified.  de
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.591154    2726 container_manager_linux.go:245] container manager verified user specified cgroup-r
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.591188    2726 container_manager_linux.go:250] Creating Container Manager object based on Node Co
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.591400    2726 kubelet.go:255] Adding manifest file: /etc/kubernetes/manifests
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.591442    2726 kubelet.go:265] Watching apiserver
May 01 18:14:33 kube01 kubelet[2726]: E0501 18:14:33.597608    2726 reflector.go:190] k8s.io/kubernetes/pkg/kubelet/kubelet.go:382: Failed to list *v1
May 01 18:14:33 kube01 kubelet[2726]: E0501 18:14:33.597697    2726 reflector.go:190] k8s.io/kubernetes/pkg/kubelet/config/apiserver.go:46: Failed to 
May 01 18:14:33 kube01 kubelet[2726]: E0501 18:14:33.597777    2726 reflector.go:190] k8s.io/kubernetes/pkg/kubelet/kubelet.go:390: Failed to list *v1
May 01 18:14:33 kube01 kubelet[2726]: W0501 18:14:33.598688    2726 kubelet_network.go:63] Hairpin mode set to ""promiscuous-bridge"" but container runt
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.598721    2726 kubelet.go:494] Hairpin mode set to ""none""
May 01 18:14:33 kube01 kubelet[2726]: I0501 18:14:33.598922    2726 remote_runtime.go:41] Connecting to runtime service /var/run/frakti.sock
May 01 18:14:33 kube01 kubelet[2726]: 2017/05/01 18:14:33 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""t
May 01 18:14:33 kube01 kubelet[2726]: E0501 18:14:33.599459    2726 remote_runtime.go:63] Version from runtime service failed: rpc error: code = 14 de
May 01 18:14:33 kube01 kubelet[2726]: 2017/05/01 18:14:33 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""t
May 01 18:14:33 kube01 kubelet[2726]: E0501 18:14:33.600929    2726 kuberuntime_manager.go:154] Get runtime version failed: rpc error: code = 14 desc 
May 01 18:14:33 kube01 kubelet[2726]: error: failed to run Kubelet: failed to create kubelet: rpc error: code = 14 desc = grpc: the connection is unav
May 01 18:14:33 kube01 systemd[1]: kubelet.service: main process exited, code=exited, status=1/FAILURE
May 01 18:14:33 kube01 systemd[1]: Unit kubelet.service entered failed state.
May 01 18:14:33 kube01 systemd[1]: kubelet.service failed.
",closed,False,2017-05-01 17:57:31,2017-05-09 16:26:35
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/132,https://api.github.com/repos/kubernetes/frakti/issues/132,Fix deploy guides,This PR fixes deploy guides with latest v0.2 release.,closed,True,2017-05-02 01:39:03,2017-05-02 01:58:45
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/133,https://api.github.com/repos/kubernetes/frakti/issues/133,Add all in one deployment of kubernetes with frakti,cc @resouer ,closed,True,2017-05-03 04:03:52,2017-05-03 06:59:02
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/134,https://api.github.com/repos/kubernetes/frakti/issues/134,Exec command failed via crictl,"```
# crictl exec $cid ps aux
PID   USER     TIME   COMMAND
    1 root       0:00 /init
    3 root       0:00 top
    4 root       0:00 ps aux
execing command in container failed: command terminated with exit code 0
```",closed,False,2017-05-05 10:20:21,2017-05-17 12:04:26
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/135,https://api.github.com/repos/kubernetes/frakti/issues/135,AllinOne - No need to taint master,"Why is there a taint of the master in the allinone.sh script. I'd recommend leaving it out and letting the end user decide. By default the master should not have pods scheduled unless it's explicitly called out

Just a suggestion. I can see this if it is just a 1 node install so makes sense to test things. Maybe the option to specify.

Would you mind if I work with this script and extend it with options? By the way great work on frakti

For the allinone with Centos 7 a line:

echo 1 >/proc/sys/net/bridge/bridge-nf-call-iptables

Will need to be added for nodes to join. And probably for the master as well. Additionally I have found that some Centos 7 distros for some reason are not disabling selinux so /etc/selinux/config set SELINUX=disabled

DB",closed,False,2017-05-05 18:58:03,2017-05-05 20:00:30
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/136,https://api.github.com/repos/kubernetes/frakti/issues/136,No route to host/connection refused,"Performed a fresh install as before, clean Centos 7.3 VM , 1 master, 2 nodes

Everything looked good. Launched heapster, influxdb, grafana, dashboard

ran kubectl proxy as usual , default 127.0.0.1:8001

Accessing the dashboard:
http://localhost:8001/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy/
yields - Error: 'dial tcp 10.244.1.3:9090: getsockopt: no route to host' Trying to reach: 'http://10.244.1.3:9090/'

Accessing grafana:
http://localhost:8001/api/v1/proxy/namespaces/kube-system/services/monitoring-grafana/
yields - http://localhost:8001/api/v1/proxy/namespaces/kube-system/services/monitoring-grafana/

I will leave this cluster up for troubleshooting for the time being

DB",closed,False,2017-05-05 20:20:13,2017-05-09 18:50:36
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/137,https://api.github.com/repos/kubernetes/frakti/issues/137,Switch to kubernetes stable release,"Kubernetes unstable release breaks occasionally, this PR switches the deployment to stable version.

This PR also adds guide for setting subnet routes.",closed,True,2017-05-08 01:34:38,2017-05-09 14:21:23
frakti,resouer,https://github.com/kubernetes/frakti/issues/138,https://api.github.com/repos/kubernetes/frakti/issues/138,Update vendor dockershim,"To fix the nil pointer here: https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/dockershim/security_context.go#L129

cc @Crazykev Watch out for `staging` part",closed,False,2017-05-09 12:25:23,2017-05-11 13:32:35
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/139,https://api.github.com/repos/kubernetes/frakti/issues/139,Frakti - No networks found,"After running the allinone.sh, kubeadm init completes as expect. However, in checking service status, frakti shows this:

â— frakti.service - Hypervisor-based container runtime for Kubernetes
   Loaded: loaded (/usr/lib/systemd/system/frakti.service; enabled; vendor preset: disabled)
   Active: active (running) since Tue 2017-05-09 18:12:23 UTC; 3min 56s ago
     Docs: https://github.com/kubernetes/frakti
 Main PID: 3199 (frakti)
   CGroup: /system.slice/frakti.service
           â””â”€3199 /usr/bin/frakti --v=3 --log-dir=/var/log/frakti --logtostderr=false --cgroup-driver=systemd --listen=/var/run/frakti.sock --strea...

May 09 18:12:23 kube01 systemd[1]: Started Hypervisor-based container runtime for Kubernetes.
May 09 18:12:23 kube01 systemd[1]: Starting Hypervisor-based container runtime for Kubernetes...
May 09 18:12:23 kube01 frakti[3199]: E0509 18:12:23.563497    3199 ocicni.go:110] error updating cni config: No networks found in /etc/cni/net.d
May 09 18:12:23 kube01 frakti[3199]: E0509 18:12:23.571272    3199 ocicni.go:110] error updating cni config: No networks found in /etc/cni/net.d
May 09 18:12:24 kube01 systemd[1]: [/usr/lib/systemd/system/frakti.service:8] Unknown lvalue 'TasksMax' in section 'Service'
May 09 18:12:38 kube01 systemd[1]: [/usr/lib/systemd/system/frakti.service:8] Unknown lvalue 'TasksMax' in section 'Service'
[root@kube01 ~]# ls /etc/cni/net.d
10-mynet.conf  99-loopback.conf
",closed,False,2017-05-09 18:18:13,2017-05-09 18:22:14
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/140,https://api.github.com/repos/kubernetes/frakti/issues/140,Fixes of switching to kubernetes stable release,"#137 switches to kubernetes stable release, but it doesn't fix all docs.

This PR fixes all places and also disables selinux.",closed,True,2017-05-10 09:02:23,2017-05-10 13:20:21
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/141,https://api.github.com/repos/kubernetes/frakti/issues/141,Automated cherry pick #140,,closed,True,2017-05-11 03:18:36,2017-05-11 13:11:55
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/142,https://api.github.com/repos/kubernetes/frakti/issues/142,Update vendors to keep dockershim update,"Ref: #138 
Update kubernetes vendor and other kubernetes related vendors.
There is something need to clarify:
1. There is some in-compatible if we only update kubernetes vendor, So I also update a lot of kubernetes related vendors, ie grpc and cni.
2. Thanks @YaoZengzeng help update cni lib based on cni 0.5
3. I also add a commit to make frakti root directory configurable, and configure dockershim(alternative runtime)'s root dir based on frakti's.

/cc @feiskyer & @resouer  PTAL and I'll continue to run node test based on this patch.",closed,True,2017-05-11 11:01:25,2017-05-11 13:37:03
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/143,https://api.github.com/repos/kubernetes/frakti/issues/143,Switch to critest in travis CI,"We could switch most tests to critest, while only keep some frakti-specific tests.",closed,False,2017-05-11 13:11:32,2017-05-26 12:28:56
frakti,heartlock,https://github.com/kubernetes/frakti/pull/144,https://api.github.com/repos/kubernetes/frakti/issues/144,Add logpath in container status,@feiskyer  Ready for review!,closed,True,2017-05-16 14:27:22,2017-05-17 01:14:07
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/145,https://api.github.com/repos/kubernetes/frakti/issues/145,Filter CodeExitError type error in Exec streaming API,"close #134 
```
# crictl info
Version:  0.1.0
RuntimeName:  hyper
RuntimeVersion:  0.8.1
RuntimeApiVersion:  0.1.0
# crictl exec -i -t 65c58ed5a447e67f887d9ac285a8f239670bce9ef8cd4f6655e8fdc7ba113845 sh
/ # ls
ls
bin   dev   etc   home  lib   proc  root  sys   tmp   usr   var
/ # exit
exit
```
/cc @feiskyer 

Signed-off-by: Crazykev <crazykev@zju.edu.cn>",closed,True,2017-05-17 10:44:04,2017-05-17 12:11:43
frakti,heartlock,https://github.com/kubernetes/frakti/pull/146,https://api.github.com/repos/kubernetes/frakti/issues/146,Switch to critest,"Signed-off-by: heartlock <21521209@zju.edu.cn>
Closes: #143 

- [x] Step1: enable critest in travis CI
- [x] Step2: delete reduplicate test case in the old e2e test framwork, only keep frakti-specific tests

@feiskyer But critest still test fail with frakti. @xlgao-zju Please read travis CI log.",closed,True,2017-05-17 14:44:32,2017-05-26 13:28:21
frakti,heartlock,https://github.com/kubernetes/frakti/pull/147,https://api.github.com/repos/kubernetes/frakti/issues/147,set force when remove image,"Signed-off-by: heartlock <21521209@zju.edu.cn>
@feiskyer Fix critest image test fail.
ref: #146 ",closed,True,2017-05-18 06:00:57,2017-05-18 06:25:23
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/148,https://api.github.com/repos/kubernetes/frakti/issues/148,Add critest,Another try of #143.,closed,True,2017-05-19 08:06:55,2017-05-19 08:40:22
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/149,https://api.github.com/repos/kubernetes/frakti/issues/149,Improve unit tests,We should improve unit tests coverage.,open,False,2017-05-20 00:02:57,2018-02-08 01:31:28
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/150,https://api.github.com/repos/kubernetes/frakti/issues/150,[Question] Calico or Flannel,"I'm thinking about spinning this back up across physical machines, about 5 HP Proliants to test. Where are things with supporting Calico or Flannel CNI?

Thanks
DB",closed,False,2017-05-20 23:09:49,2018-08-09 22:31:37
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/151,https://api.github.com/repos/kubernetes/frakti/issues/151,"[Question] Frakti with Rook.io , error","On a separate system I've installed Kubernetes with kubeadm 1.6.2 & 1.6.4. On the system with standard Kubernetes (non-frakti) Rook.io installs and runs. The rook operator succeeds and runs. On the system with Kubernetes based on Frakti I noticed that the rook operator fails yielding CrashLoopBackOff and no logs generated. Is there some behavior that prevents this from working. I know that on each node, ceph-common is to be installed. Is this an issue where the hypervisor is isolated and does not have access to such modules?

Thanks
DB",closed,False,2017-05-23 15:16:57,2017-06-21 01:51:46
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/152,https://api.github.com/repos/kubernetes/frakti/issues/152,Make default cpu and memory configurable,"In some cases, the default 64MB memory is not sufficient. This PR makes the default cpu and memory configurable.

It should help with rook.io (#151) with setting default memory to 512MB.",closed,True,2017-05-24 06:11:09,2017-05-25 03:17:59
frakti,resouer,https://github.com/kubernetes/frakti/pull/153,https://api.github.com/repos/kubernetes/frakti/issues/153,Fix bugs in deployment doc,There are some nits in deploy doc.,closed,True,2017-05-24 06:36:25,2017-05-24 07:34:12
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/154,https://api.github.com/repos/kubernetes/frakti/issues/154,Kubeadm - When reset issued still tries to load a POD,"Is this normal behavior. Under kubernetes without hyperd, I noticed that there is no attempt to spin up DNS pods. However, when I issue a kubeadm reset to start over there is an attempt by hyperd to start a kube-dns pod:

hyperd[1009]: E0524 10:19:59.988202    1009 persist.go:113] Pod[k8s_POD.0_kube-dns-3913472980-2jz1j_kube-system_af1d4552-3f1e-11e7-aeb4-0021ccd48ab5_10cd9672] failed to load sandbox info: leveldb: not found

Have not noticed this behavior under a non-hyperd kubernetes cluster.

Perhaps this is just a remnant but I did perform a kubeadm reset and then decided to reboot before peforming a new kubeadm init. In checking the status of hyperd after the reboot (prior to peforming a new kubeadm init) the above was the result.

Also when a kubeadm reset is done, all files in /etc/cni/net.d are removed. This should be noted in the deploy.md just as a warning or note

Thanks
DB

",closed,False,2017-05-24 16:19:48,2017-06-26 02:31:21
frakti,resouer,https://github.com/kubernetes/frakti/pull/155,https://api.github.com/repos/kubernetes/frakti/issues/155,Claim main differences with linux container runtimes,"We need to claim main differences with linux container runtimes, so developers will not get confused.",closed,True,2017-05-25 07:15:30,2017-05-26 06:43:16
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/156,https://api.github.com/repos/kubernetes/frakti/issues/156,Automatically cherry-pick #152 and #153,Automatically cherry-pick #152 and #153.,closed,True,2017-05-25 07:19:29,2017-05-25 11:43:36
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/157,https://api.github.com/repos/kubernetes/frakti/issues/157,Install CNI plugin via released packages,"CNI is moving its plugins to new repo, we should install via released
packages instead.",closed,True,2017-05-25 08:32:25,2017-05-25 08:52:14
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/158,https://api.github.com/repos/kubernetes/frakti/issues/158,Automatically cherry-pick #157,"CNI is moving its plugins to new repo, we should install via released
packages instead.",closed,True,2017-05-25 08:54:52,2017-05-25 11:15:18
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/159,https://api.github.com/repos/kubernetes/frakti/issues/159,Update README,"- Add hyperd&docker installation
- Fix CNI installation
- Update kubeconfig setting command",closed,True,2017-06-05 04:08:08,2017-06-05 07:41:29
frakti,heartlock,https://github.com/kubernetes/frakti/pull/160,https://api.github.com/repos/kubernetes/frakti/issues/160,Support cni plugin chaining,"This brings with it plugin chaining. ref: #122 
@feiskyer  Ready for review.
Signed-off-by: heartlock <21521209@zju.edu.cn>",closed,True,2017-06-05 04:28:07,2017-06-05 05:55:36
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/161,https://api.github.com/repos/kubernetes/frakti/issues/161,Fix readonly rootfs container,Readonly rootfs is not supported because hyperd. We should fix it after  https://github.com/hyperhq/hyperd/pull/638.,closed,False,2017-06-05 08:02:58,2017-06-16 01:02:15
frakti,heartlock,https://github.com/kubernetes/frakti/pull/162,https://api.github.com/repos/kubernetes/frakti/issues/162,Support portmapping,"What this PR does:
- [x] support port mapping
- [x] enable e2e test for port mapping
- [x] update README

@feiskyer Thanks for your help! Ready for review.
Closes: #122 ",closed,True,2017-06-05 09:35:54,2017-06-09 03:32:01
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/163,https://api.github.com/repos/kubernetes/frakti/issues/163,"[Version] Clone master branch, frakti version?","Does the version need updating in the code. I cloned the master branch, compiled, and result of frakti --version is:

I0605 11:24:34.272388   11749 frakti.go:71] frakti version: 0.1

Should this be 0.2? just wondering as I want to make sure I have the latest code with the ability to specify cpu and mem.

Thanks
DB",closed,False,2017-06-05 16:28:37,2017-06-06 14:31:45
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/164,https://api.github.com/repos/kubernetes/frakti/issues/164,"Compiled from git repo, restart nodes, kubelet fails","1. Compiled current code base for frakti to pick up changes for default cpu/mem
2. Copied frakti binary to 1 master, 5 minon nodes
3. Restart all nodes

Result:
**KUBELET**
â— kubelet.service - kubelet: The Kubernetes Node Agent
   Loaded: loaded (/etc/systemd/system/kubelet.service; enabled; vendor preset: disabled)
  Drop-In: /etc/systemd/system/kubelet.service.d
           â””â”€10-kubeadm.conf
   Active: activating (auto-restart) (Result: exit-code) since Mon 2017-06-05 12:52:23 CDT; 1s ago
     Docs: http://kubernetes.io/docs/
  Process: 7419 ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_SYSTEM_PODS_ARGS $KUBELET_NETWORK_ARGS $KUBELET_DNS_ARGS $KUBELET_AUTHZ_ARGS $KUBELET_CGROUP_ARGS $KUBELET_EXTRA_ARGS (code=exited, status=1/FAILURE)
 Main PID: 7419 (code=exited, status=1/FAILURE)

Jun 05 12:52:23 master01 systemd[1]: kubelet.service: main process exited, code=exited, status=1/FAILURE
Jun 05 12:52:23 master01 systemd[1]: Unit kubelet.service entered failed state.
Jun 05 12:52:23 master01 systemd[1]: kubelet.service failed.

**HYPERD**
â— hyperd.service - hyperd
   Loaded: loaded (/usr/lib/systemd/system/hyperd.service; enabled; vendor preset: disabled)
   Active: active (running) since Mon 2017-06-05 12:50:52 CDT; 4min 46s ago
     Docs: http://docs.hypercontainer.io
 Main PID: 7193 (hyperd)
   CGroup: /system.slice/hyperd.service
           â””â”€7193 /usr/bin/hyperd --log_dir=/var/log/hyper

Jun 05 12:50:52 master01 systemd[1]: Started hyperd.
Jun 05 12:50:52 master01 systemd[1]: Starting hyperd...
Jun 05 12:50:53 master01 hyperd[7193]: time=""2017-06-05T12:50:53-05:00"" level=info msg=""Graph migration to content-addressability took 0.00 seconds""
Jun 05 12:50:53 master01 hyperd[7193]: time=""2017-06-05T12:50:53-05:00"" level=info msg=""Firewalld running: false""
Jun 05 12:50:53 master01 hyperd[7193]: time=""2017-06-05T12:50:53-05:00"" level=info msg=""Loading containers: start.""
Jun 05 12:50:53 master01 hyperd[7193]: ...
Jun 05 12:50:53 master01 hyperd[7193]: time=""2017-06-05T12:50:53-05:00"" level=info msg=""Loading containers: done.""
Jun 05 12:50:53 master01 hyperd[7193]: E0605 12:50:53.215808    7193 persist.go:113] Pod[k8s_POD.0_kube-dns-2612786695-kqqhv_kube-system_4664f72a-409d-11e7-9579-0021ccd48ab5_9acb0442] failed to load sandbox info: leveldb: not found

**FRAKTI**
â— frakti.service - Hypervisor-based container runtime for Kubernetes
   Loaded: loaded (/usr/lib/systemd/system/frakti.service; enabled; vendor preset: disabled)
   Active: active (running) since Mon 2017-06-05 12:50:31 CDT; 5min ago
     Docs: https://github.com/kubernetes/frakti
 Main PID: 7126 (frakti)
   CGroup: /system.slice/frakti.service
           â””â”€7126 /usr/bin/frakti --v=3 --log-dir=/var/log/frakti --logtostderr=false --cgroup-driver=systemd --listen=/var/run/frakti.sock --streaming-server-addr=master01 --hyper-endpoint=127.0.0.1:22318

Jun 05 12:50:31 master01 systemd[1]: Started Hypervisor-based container runtime for Kubernetes.
Jun 05 12:50:31 master01 systemd[1]: Starting Hypervisor-based container runtime for Kubernetes...
Jun 05 12:50:52 master01 frakti[7126]: 2017/06/05 12:50:52 transport: http2Client.notifyError got notified that the client transport was broken EOF.
Jun 05 12:50:52 master01 frakti[7126]: 2017/06/05 12:50:52 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 127.0.0.1:22318: getsockopt: connection refused""; Reconnecting to {127.0.0.1:22318 <nil>}
Jun 05 12:52:22 master01 frakti[7126]: 2017/06/05 12:52:22 transport: http2Server.HandleStreams failed to read frame: read unix /var/run/frakti.sock->@: read: connection reset by peer
Jun 05 12:55:24 master01 frakti[7126]: 2017/06/05 12:55:24 transport: http2Server.HandleStreams failed to read frame: read unix /var/run/frakti.sock->@: read: connection reset by peer
Jun 05 12:55:45 master01 frakti[7126]: 2017/06/05 12:55:45 transport: http2Server.HandleStreams failed to read frame: read unix /var/run/frakti.sock->@: read: connection reset by peer

Another thing I've noticed is that that does not survive reboots all that well.

Thoughts where I should look?
DB",closed,False,2017-06-05 17:57:30,2017-06-06 22:49:33
frakti,DarkBlaez,https://github.com/kubernetes/frakti/issues/165,https://api.github.com/repos/kubernetes/frakti/issues/165,Hyperd - POD  failed to load sandbox info: leveldb: not found,"For some reason hyperd is trying to initialize or load a POD.

1. kubeadm reset
2. systemctl restart hyperd

Result:
**HYPERD**
â— hyperd.service - hyperd
   Loaded: loaded (/usr/lib/systemd/system/hyperd.service; enabled; vendor preset: disabled)
   Active: active (running) since Mon 2017-06-05 13:43:34 CDT; 27s ago
     Docs: http://docs.hypercontainer.io
 Main PID: 12880 (hyperd)
   CGroup: /system.slice/hyperd.service
           â””â”€12880 /usr/bin/hyperd --log_dir=/var/log/hyper

Jun 05 13:43:34 master01 systemd[1]: Started hyperd.
Jun 05 13:43:34 master01 systemd[1]: Starting hyperd...
Jun 05 13:43:34 master01 hyperd[12880]: time=""2017-06-05T13:43:34-05:00"" level=info msg=""Graph migration to content-addressability took 0.00 seconds""
Jun 05 13:43:34 master01 hyperd[12880]: time=""2017-06-05T13:43:34-05:00"" level=info msg=""Firewalld running: false""
Jun 05 13:43:34 master01 hyperd[12880]: time=""2017-06-05T13:43:34-05:00"" level=info msg=""Loading containers: start.""
Jun 05 13:43:34 master01 hyperd[12880]: ...
Jun 05 13:43:34 master01 hyperd[12880]: time=""2017-06-05T13:43:34-05:00"" level=info msg=""Loading containers: done.""
Jun 05 13:43:34 master01 hyperd[12880]: E0605 13:43:34.835819   12880 persist.go:113] Pod[k8s_POD.0_kube-dns-2612786695-kqqhv_kube-system_4664f72a-409d-11e7-9579-0021ccd48ab5_9acb0442] failed to load sandbox info: leveldb: not found
",closed,False,2017-06-05 18:46:24,2017-06-21 01:51:58
frakti,yiqinguo,https://github.com/kubernetes/frakti/issues/166,https://api.github.com/repos/kubernetes/frakti/issues/166,install kubernetes use this guide,"Hello:
I use this guide install kubernetes cluster,when start apiserver have a error like this:
unable to sync kubernetes service: Endpoints ""kubernetes"" is invalid: subsets[0].addresses[0].ip: Invalid value: ""127.0.0.1"": may not be in the loopback range (127.0.0.0/8)

what does that mean?",closed,False,2017-06-06 12:22:42,2017-06-07 02:32:07
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/167,https://api.github.com/repos/kubernetes/frakti/issues/167,Fix version,"Frakti v0.2 has been already released, but its version number is still old. This PR updates frakti version to 0.2.

Fixes #163.",closed,True,2017-06-07 06:28:49,2017-06-08 12:44:35
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/168,https://api.github.com/repos/kubernetes/frakti/issues/168,Update CRI vendor,"CRI package has been renamed to `pkg/kubelet/apis/cri/v1alpha1/runtime`, we should update frakti vendor to work with v1.7. 

Refer https://github.com/kubernetes/kubernetes/pull/47113.",closed,False,2017-06-12 01:37:55,2017-06-13 06:59:36
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/169,https://api.github.com/repos/kubernetes/frakti/issues/169,Update kubernetes vendor,Closes #168 ,closed,True,2017-06-13 05:42:42,2017-06-13 07:11:28
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/170,https://api.github.com/repos/kubernetes/frakti/issues/170,Fix readonlyrootfs for container,Fixes #161.,closed,True,2017-06-14 07:21:49,2017-06-16 02:18:30
frakti,harshapic,https://github.com/kubernetes/frakti/issues/171,https://api.github.com/repos/kubernetes/frakti/issues/171,Not able to join worker nodes with kubeadm join,"Hi,

Followed steps as given in Readme everything is fine upto setting up master node.
But when i try to join worker node with kubeadm it is stuck as below:

kubeadm join --token bxxxxxxx  ip:6443[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[preflight] Running pre-flight checks
[discovery] Trying to connect to API Server ""192.168.63.161:6443""
[discovery] Created cluster-info discovery client, requesting info from ""https://192.168.63.161:6443""
[discovery] Cluster info signature and contents are valid, will use API Server ""https://192.168.63.161:6443""
[discovery] Successfully established connection with API Server ""192.168.63.161:6443""
[bootstrap] Detected server version: v1.8.0-alpha.0
[bootstrap] The server supports the Certificates API (certificates.k8s.io/v1beta1)
[csr] Created API client to obtain unique certificate for this node, generating keys and certificate signing request",closed,False,2017-06-19 11:24:53,2017-06-19 14:36:15
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/172,https://api.github.com/repos/kubernetes/frakti/issues/172,Only setup portmap when hostport is set,"Only setup portmap when hostport is set, or else portmap plugin would report error.

With this PR, frakti should pass full node e2e conformance tests.",closed,True,2017-06-20 08:53:07,2017-06-20 14:20:18
frakti,harshapic,https://github.com/kubernetes/frakti/issues/173,https://api.github.com/repos/kubernetes/frakti/issues/173,Kubectl get nodes - Issue,"https://github.com/kubernetes/frakti/blob/master/docs/deploy.md

followed above steps to deploy frakti,hyperd, kubernetes on vmware-fusion (ubuntu-xenial), with 1master and 2 worker node setup.
workers got successfully registered to master but when i do ""kubectl get nodes"", its only displays master node.

Same setup if i do only with docker runtime it shows all nodes if i do ""kubectl get nodes"" (for this i followed this setup:  https://blog.microideation.com/2017/03/06/setting-up-kubernetes-cluster-for-container-orchestration/ ).

I am not getting what i am doing wrong in frakti deployment steps",closed,False,2017-06-20 16:22:59,2017-06-21 06:17:01
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/174,https://api.github.com/repos/kubernetes/frakti/issues/174,Update CRI version,We should update CRI version after kubernetes/kubernetes#47818 is merged.,closed,False,2017-06-21 01:29:59,2017-06-22 07:48:07
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/175,https://api.github.com/repos/kubernetes/frakti/issues/175,Use kubernetes stable version in deploy guide,"Refer https://github.com/kubernetes/frakti/issues/173#issuecomment-309949774.

kubeadm v1.6 doesn't support deploying v1.7 clusters well, we should recommend stable version in our docs.",closed,True,2017-06-21 03:16:01,2017-06-21 10:29:09
frakti,harshapic,https://github.com/kubernetes/frakti/issues/176,https://api.github.com/repos/kubernetes/frakti/issues/176,Kubectl exec - Socket connection ERROR,"i have setup 1master 2 worker node setup using vmware_fusion (ubuntu xenial 64 vms). I followed all deployment steps given in documentation.

i am facing issue for kubectl exec to pod:

```
root@master-node:~# kubectl get nodes
NAME           STATUS    AGE       VERSION
master-node    Ready     35m       v1.6.5
worker1-node   Ready     33m       v1.6.5
worker2-node   Ready     31m       v1.6.5

root@master-node:~# kubectl exec -it my-nginx-1724589280-lshv0 /bin/bash
Error from server: error dialing backend: dial tcp 192.168.63.179:22521: getsockopt: connection refused
```

Any idea what i am doing wrong?
I am to ping worker-nodes and pod as well, but exec giving problem.
",closed,False,2017-06-21 10:44:06,2017-06-21 16:59:35
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/177,https://api.github.com/repos/kubernetes/frakti/issues/177,Update kubernetes vendor,Fixes #174.,closed,True,2017-06-21 14:54:11,2017-06-22 07:49:32
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/178,https://api.github.com/repos/kubernetes/frakti/issues/178,Refactor alternative runtime to include more runtimes,"1. rename alternativeRuntime to privilegedruntime
2. make alternative runtime more general to include other runtimes, i.e. unikernel runtime

/cc @feiskyer @resouer PTAL, I'll add unikernel runtime skeleton base on this patch.

Signed-off-by: Crazykev <crazykev@zju.edu.cn>",closed,True,2017-06-22 12:46:23,2017-06-30 07:29:38
frakti,harshapic,https://github.com/kubernetes/frakti/issues/179,https://api.github.com/repos/kubernetes/frakti/issues/179,Running Vm images on Frakti?,"Is there is any way to run Vm images like(vmdk, qcow2, img etc) directly on frakti?
Just like rancher vm we can convert Vm images to container and then run as container using rancher vm? is something similar available On frakti?

As per my knowledge i can use qcow2 image directly on kvm if i choose kvm as my hypervisor. Then how can i run same qcow2 image on farkti as well if i choose ""Frakti -> HyperD -> KVM"". 
",closed,False,2017-06-26 05:30:38,2017-08-25 21:00:20
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/180,https://api.github.com/repos/kubernetes/frakti/issues/180,Add basic skeleton of unikernel runtime,"relay on #178 , ref #181 ",closed,True,2017-06-27 07:31:35,2017-07-05 13:39:59
frakti,Crazykev,https://github.com/kubernetes/frakti/issues/181,https://api.github.com/repos/kubernetes/frakti/issues/181,Unikernel runtime Integration TODOs,"Basic framework:
- [ ] Metadata Store.
    - [x] [P0] In-memory metadata store. #180 @Crazykev
    - [ ] [P1] On-disk metadata store.
- [x] [P0] Sandbox Manager #180 @Crazykev
- [x] [P0] Container Manager #180 @Crazykev
- [ ] [P0] Image Manager #227 @Crazykev

Life Cycle:
- [x] Sandbox Management. #223 @Crazykev
    - [x] [P0] RunPodSandbox 
    - [x] [P0] StopPodSandbox
    - [x] [P0] RemovePodSandbox
    - [x] [P0] ListPodSandbox
    - [x] [P0] PodSandboxStatus
- [x] Container Management. #223 @Crazykev
    - [x] [P0] CreateContainer
    - [x] [P0] StartContainer
    - [x] [P0] StopContainer
    - [x] [P0] RemoveContainer
    - [x] [P0] ListContainers
    - [x] [P0] ContainerStatus
- [ ] Image Management. #227 @Crazykev
    - [ ] [P0] ListImages
    - [ ] [P0] PullImages
    - [ ] [P0] RemoveImages
    - [ ] [P0] ImageStatus
    - [ ] [P2] ImageFsInfo

Others:
- [ ] Network:
    - [ ] [P1] Integrate CNI plugin.
- [ ] Volume:
    - [ ] [P2] Flex volume
- [ ] Streaming:
    - [ ] [P2] ExecSync
    - [ ] [P2] Exec
    - [ ] [P2] Attach
    - [ ] [P2] PortForward
- [ ] [P2] Logging #226 

/cc Frakti Maintainers @feiskyer @resouer ",closed,False,2017-06-27 09:30:23,2018-02-08 01:30:58
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/182,https://api.github.com/repos/kubernetes/frakti/issues/182,Releasing frakti v0.3,"We are about to release frakti v0.3 for kubernetes v1.6, which enhanced stability.

TODOs:

- [x] Bump frakti version
- [x] Add release notes
- [x] Add changelog
",closed,False,2017-06-28 00:53:41,2017-06-28 08:03:00
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/183,https://api.github.com/repos/kubernetes/frakti/issues/183,Releasing frakti v1.0,"We are about to release frakti v1.0 for kubernetes v1.7, which enhanced stability.

Depends on https://github.com/hyperhq/hyperd/issues/646.

TODOs:

- [x] Bump frakti version
- [x] Add release notes
- [x] Add changelog",closed,False,2017-06-28 02:36:15,2017-06-29 05:27:53
frakti,resouer,https://github.com/kubernetes/frakti/pull/184,https://api.github.com/repos/kubernetes/frakti/issues/184,Release 0.3 of frakti,"1. Updated the frakti version to v0.3 for kubernetes v1.6
2. Updated CHANGELOG",closed,True,2017-06-28 07:45:32,2017-06-28 10:04:34
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/185,https://api.github.com/repos/kubernetes/frakti/issues/185,Bump frakti to version 1.0,"For #183. 

Bump frakti to version 1.0 and hyperd minversion to 0.8.1.

",closed,True,2017-06-28 10:06:36,2017-06-29 01:48:34
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/186,https://api.github.com/repos/kubernetes/frakti/issues/186,Update CHANGELOG,Closes #183.,closed,True,2017-06-29 03:02:24,2017-06-29 05:27:56
frakti,harshapic,https://github.com/kubernetes/frakti/issues/187,https://api.github.com/repos/kubernetes/frakti/issues/187,"Kubernetes Deployment - ""privileged: true"" Security Context - Runs on Docker instead Hypercontainer","  
Below container i am using in my kubernetes deployment file: 
containers:
      - name: bbva
        image: bbvainnotech/kvm:latest
        imagePullPolicy: Always
        stdin: true
        tty: true
        env:
          - name: AUTO_ATTACH
            value: ""yes""
        securityContext:
          privileged: true
If i use ""privileged: true"" i think its not running on Hypercontainer it automatically runs on ""Docker"" runtime.
I didn't used ""OSContainer: ""true"" annotation in my kubernets file still it runs on docker!",closed,False,2017-06-30 06:12:55,2017-07-11 07:57:14
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/188,https://api.github.com/repos/kubernetes/frakti/issues/188,Fix CNI problems,"- Setup pod name correctly
- Fail out if CNI plugin fails
- Warn if getting checkpoint error",closed,True,2017-07-10 08:27:07,2017-07-10 09:22:09
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/189,https://api.github.com/repos/kubernetes/frakti/issues/189,rollback cni operation when RunPodSandbox failed,"/cc @feiskyer 

Signed-off-by: Crazykev <crazykev@harmonycloud.cn>",closed,True,2017-07-11 07:28:31,2017-07-11 08:52:00
frakti,resouer,https://github.com/kubernetes/frakti/issues/190,https://api.github.com/repos/kubernetes/frakti/issues/190,Add a flexvolume based Cinder volume plugin to frakti,"**Motivation:**

When we use Cinder as volume plugin for containers, we can directly attach Cinder volume to VM Pod instead of ""attach first, then bind mount"", this will give us better performance. We will use a flexvolume to implement this.

**Basic usage:**
```
apiVersion: v1
kind: Pod
metadata:
  name: web
  labels:
    app: nginx
spec:
  containers:
  - name: nginx
    image: nginx
    ports:
    - containerPort: 80
    volumeMounts:
    - name: nginx-persistent-storage
      mountPath: /var/lib/nginx
  volumes:
  - name: nginx-persistent-storage
    flexVolume:
      driver: ""cinder/flexvolume_driver""
      fsType: ext4
      options:
        cinderConfig: /etc/kubernetes/cinder.conf
        volumeID: daa7b4e6-1792-462d-ad47-78e900fed429
```

Put binary in: 
```
/usr/libexec/kubernetes/kubelet-plugins/volume/exec/cinder~flexvolume_driver/flexvolume_driver
```

**Workflow:**
```
1. kubelet (flexvolume) write volume data into a file during doing `Attach`
2. frakti load file and parse data before creating Pod
3. Use volume metadata to configure volume for VM Pod and start it
```
- [x] Add cinder-flexvolume into frakti
- [ ] We need also validate that only `runV` runtime can be used in this volume type
- [x] make /etc/kubernetes/cinder.conf a configMap",closed,False,2017-08-03 02:07:32,2017-08-21 12:07:20
frakti,YaoZengzeng,https://github.com/kubernetes/frakti/issues/191,https://api.github.com/repos/kubernetes/frakti/issues/191,Using relay bridge for better cni compatibility,"Steps:

0. Delete all the network configuration in the net ns

1. Setup one relay bridge in net ns and another one in host

2. Use one pair of veth device to connect the two relay bridge

3. Connect the ""eth0"" in netns to relay bridge in net ns

4. Configure the hyperContainer's network by cni result and the name of relay bridge in host

5. Connect the ""tap0"" device of hyperContainer to relay device in host

Now all works!

Data flow:
veth in host --> veth in ns (the original ""eth0"") --> relay bridge in ns --> veth for connection in ns
--> veth for connection in host --> relay bridge in host --> ""tap0"" of hyperContainer
",closed,False,2017-08-04 08:51:32,2017-08-10 03:27:59
frakti,YaoZengzeng,https://github.com/kubernetes/frakti/pull/192,https://api.github.com/repos/kubernetes/frakti/issues/192,better cni compatibility ,Fix: https://github.com/kubernetes/frakti/issues/191,closed,True,2017-08-04 08:51:40,2017-09-26 07:21:26
frakti,asifdxtreme,https://github.com/kubernetes/frakti/pull/193,https://api.github.com/repos/kubernetes/frakti/issues/193,Split Unit Test and E2E test in seperate Travis CI Stages,Splitted Unit test and E2E test in seperate stages of Travis CI so that it's easy for user to debug what went wrong in the CI,closed,True,2017-08-07 09:43:16,2017-08-08 08:43:23
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/194,https://api.github.com/repos/kubernetes/frakti/issues/194,Can not find container by name,"Frakti reports `Can not find container by name` sometimes, while the container does exist in hyperd, and the container name in log is actually the containerID.

Related frakti logs:

```
Aug 09 08:08:22 ubuntu-1 frakti[29731]: E0809 08:08:22.895300   29731 container.go:187] Get container info for 6d74d9c1ea5c585aefefbc76f6863173fa920ea923aa5845effa2751018ae129 failed: rpc error: code = 2 desc = Can not find container by name(6d74d9c1ea5c585aefefbc76f6863173fa920ea923aa5845effa2751018ae129)
Aug 09 08:08:22 ubuntu-1 frakti[29731]: E0809 08:08:22.895486   29731 manager.go:330] ListContainers from hyper runtime service failed: rpc error: code = 2 desc = Can not find container by name(6d74d9c1ea5c585aefefbc76f6863173fa920ea923aa5845effa2751018ae129)
Aug 09 08:08:23 ubuntu-1 frakti[29731]: E0809 08:08:23.903836   29731 container.go:187] Get container info for 6d74d9c1ea5c585aefefbc76f6863173fa920ea923aa5845effa2751018ae129 failed: rpc error: code = 2 desc = Can not find container by name(6d74d9c1ea5c585aefefbc76f6863173fa920ea923aa5845effa2751018ae129)
Aug 09 08:08:23 ubuntu-1 frakti[29731]: E0809 08:08:23.903862   29731 manager.go:330] ListContainers from hyper runtime service failed: rpc error: code = 2 desc = Can not find container by name(6d74d9c1ea5c585aefefbc76f6863173fa920ea923aa5845effa2751018ae129)
```",closed,False,2017-08-09 08:10:47,2017-08-23 02:59:24
frakti,YaoZengzeng,https://github.com/kubernetes/frakti/pull/195,https://api.github.com/repos/kubernetes/frakti/issues/195,ignore some error messages,"Ignore the error that netns or bridge not exist, when kubelet stop pod multiple times.

Also move RemoveCheckpoint() after teardownRelayBridgeInHost()
in case it get error and return immediately without delete the relay bridge in host.
",closed,True,2017-08-09 08:48:59,2017-08-14 06:47:22
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/196,https://api.github.com/repos/kubernetes/frakti/issues/196,"Add support for more network plugins, e.g. flannel and calico","This PR makes CNI supports old-versioned plugins. And also adds support for more network plugins, e.g. flannel and calico

Closes: #69 #150 ",closed,True,2017-08-09 12:47:15,2017-08-10 03:12:35
frakti,resouer,https://github.com/kubernetes/frakti/issues/197,https://api.github.com/repos/kubernetes/frakti/issues/197,Restart kubelet failed due to running docker containers,"Restart kubelet will not succeed, unless we manually delete running docker containers (kube-system containers).

Not very sure if it's a bug or only problem in my env.",closed,False,2017-08-10 06:56:59,2017-08-21 07:49:33
frakti,resouer,https://github.com/kubernetes/frakti/issues/198,https://api.github.com/repos/kubernetes/frakti/issues/198,Network namespace is not properly cleaned,"When delete and create a Pod with same name, there's chance to get this error:

```
failed: rpc error: code = 2 desc = error of symlink \""/var/run/netns/harry\"": symlink /var/run/netns/cni-185f1017-1225-2bdf-43b8-bf469c53bfbd /var/run/netns/harry: file exists""
```",closed,False,2017-08-11 12:51:33,2017-08-18 05:52:10
frakti,resouer,https://github.com/kubernetes/frakti/pull/199,https://api.github.com/repos/kubernetes/frakti/issues/199,Use flexvolume to handle Cinder volume without bind mount,"Fixes #190 

**Note:** 

~~Please set `--enable-controller-attach-detach=false` to your kubelet configure~~ because there's a know issue on upstream breaks flexovlume plugin discovery, see https://github.com/kubernetes/kubernetes/issues/47109#issuecomment-307376041

No sure in which release the fix will be cherry picked.

**Usage:**

```
kubectl create -f ~/pod.yaml 

Events:
  FirstSeen     LastSeen        Count   From                    SubObjectPath           Type            Reason                  Message
  ---------     --------        -----   ----                    -------------           --------        ------                  -------
  20s           20s             1       default-scheduler                               Normal          Scheduled               Successfully assigned web to haha
  20s           20s             1       kubelet, haha                                   Normal          SuccessfulMountVolume   MountVolume.SetUp succeeded for volume ""default-token-bnw50
"" 
  18s           18s             1       kubelet, haha                                   Normal          SuccessfulMountVolume   MountVolume.SetUp succeeded for volume ""nginx-persistent-st
orage"" 
  12s           12s             1       kubelet, haha           spec.containers{nginx}  Normal          Pulling                 pulling image ""nginx""
  3s            3s              1       kubelet, haha           spec.containers{nginx}  Normal          Pulled                  Successfully pulled image ""nginx""
  3s            3s              1       kubelet, haha           spec.containers{nginx}  Normal          Created                 Created container
  2s            2s              1       kubelet, haha           spec.containers{nginx}  Normal          Started                 Started container
```
Write a file in the volume path inside container:
```
root@web:/# touch /var/lib/nginx/test.txt
root@web:/# echo hello > /var/lib/nginx/test.txt
root@web:/# cat /var/lib/nginx/test.txt
hello
```

Delete the `web` pod, then create a new pod claim to use the existing volume, the file still there:
```
kubectl delete -f ~/pod.yaml 
kubectl create -f ~/pod.yaml 
root@web:/# cat /var/lib/nginx/test.txt 
hello
```
",closed,True,2017-08-12 01:33:41,2017-08-22 03:12:36
frakti,resouer,https://github.com/kubernetes/frakti/issues/200,https://api.github.com/repos/kubernetes/frakti/issues/200,Newly installed frakti streaming seems not work,"```
kubectl exec -it web -- /bin/bash
Error from server: error dialing backend: remote error: tls: internal error
```

Not sure it is related to deployment doc or a bug in frakti for now.",closed,False,2017-08-12 08:49:48,2017-08-14 07:21:16
frakti,mbssaiakhil,https://github.com/kubernetes/frakti/pull/201,https://api.github.com/repos/kubernetes/frakti/issues/201,Fixed grammatical issue,,closed,True,2017-08-13 09:26:52,2017-08-13 11:46:34
frakti,mbssaiakhil,https://github.com/kubernetes/frakti/pull/202,https://api.github.com/repos/kubernetes/frakti/issues/202,Fix Typo in Contributor Code of Conduct,,closed,True,2017-08-13 09:55:24,2017-08-13 11:46:06
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/203,https://api.github.com/repos/kubernetes/frakti/issues/203,Add docs for approving kubelet's csr,Fixes #200.,closed,True,2017-08-14 06:45:43,2019-01-29 01:34:26
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/204,https://api.github.com/repos/kubernetes/frakti/issues/204,kube-dns pods crash consistently,"kube-dns pods crash consistently because of too small memory limits (they are running in hyperd). we should increase the memory limits for it, e.g.

```sh
kubectl -n kube-system patch deployment kube-dns -p '{""spec"":{""template"":{""spec"":{""containers"":[{""name"":""kubedns"",""resources"":{""limits"":{""memory"":""256Mi""}}},{""name"":""dnsmasq"",""resources"":{""limits"":{""memory"":""128Mi""}}},{""name"":""sidecar"",""resources"":{""limits"":{""memory"":""64Mi""}}}]}}}}'
```
",closed,False,2017-08-15 03:30:47,2017-08-15 10:41:30
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/205,https://api.github.com/repos/kubernetes/frakti/issues/205,increase memory limits for kube-dns,Fix #204.,closed,True,2017-08-15 03:34:24,2017-08-15 10:59:47
frakti,mbssaiakhil,https://github.com/kubernetes/frakti/pull/206,https://api.github.com/repos/kubernetes/frakti/issues/206,Update Community Code of Conduct,Update Community Code of Conduct from kubernetes/kubernetes-template-project,closed,True,2017-08-15 13:03:26,2017-08-16 01:12:18
frakti,resouer,https://github.com/kubernetes/frakti/pull/207,https://api.github.com/repos/kubernetes/frakti/issues/207,Deploy flexvolume by DaemonSet,"Workflow (This will be added to Stackube after this PR is merged):

```shell
    cat >flexvolume-configmap.yaml <<EOF
kind: ConfigMap
apiVersion: v1
metadata:
  name: flexvolume-config
  namespace: kube-system
data:
  auth-url: ""https://${SERVICE_HOST}/identity_admin/v2.0""
  username: ""admin""
  password: ""${ADMIN_PASSWORD}""
  tenant-name: ""admin""
  region: ""RegionOne""
EOF
    kubectl create -f flexvolume-configmap.yaml
    kubectl create -f ${FRAKTI_ROOT}/deployment/flexvolume/flexvolume-ds.yaml
```

The `/usr/libexec/kubernetes/kubelet-plugins/volume/exec/cinder~flexvolume_driver/` should be created automatically with binary inside.

And `/etc/kubernetes/cinder` should have also be created with right content.

",closed,True,2017-08-15 14:30:25,2017-08-17 00:58:40
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/208,https://api.github.com/repos/kubernetes/frakti/issues/208,Improve cni network plugin workflow,"Fixes #198.

- Clean up cni network on error
- Checkpoint ip addresses and host bridge
- Restore ip addresses before teardown cni",closed,True,2017-08-17 09:41:43,2017-08-18 05:59:10
frakti,resouer,https://github.com/kubernetes/frakti/pull/209,https://api.github.com/repos/kubernetes/frakti/issues/209,Fix deploy nits,"The 1.0 tag on dockerhub is broken, change it to 0.1",closed,True,2017-08-17 13:36:41,2017-08-18 02:02:54
frakti,resouer,https://github.com/kubernetes/frakti/pull/210,https://api.github.com/repos/kubernetes/frakti/issues/210,Claim cinder volume is ready,Update the narrative about block device as volume.,closed,True,2017-08-18 02:51:35,2017-08-18 07:02:38
frakti,LilyFaFa,https://github.com/kubernetes/frakti/pull/211,https://api.github.com/repos/kubernetes/frakti/issues/211,Add checkpoint_store test,,closed,True,2017-08-19 13:42:02,2017-08-20 13:10:34
frakti,LilyFaFa,https://github.com/kubernetes/frakti/pull/212,https://api.github.com/repos/kubernetes/frakti/issues/212,Add container test,,closed,True,2017-08-20 13:23:07,2017-08-26 11:57:13
frakti,resouer,https://github.com/kubernetes/frakti/pull/213,https://api.github.com/repos/kubernetes/frakti/issues/213,Fix tenant wrong word,Should be TENANT_NAME,closed,True,2017-08-21 14:10:14,2017-08-21 15:18:55
frakti,resouer,https://github.com/kubernetes/frakti/pull/214,https://api.github.com/repos/kubernetes/frakti/issues/214,Fix nits in makefile,version should be 0.1,closed,True,2017-08-21 15:19:55,2017-08-22 01:13:19
frakti,resouer,https://github.com/kubernetes/frakti/pull/215,https://api.github.com/repos/kubernetes/frakti/issues/215,Use default cinder config,Use cinder config path as const,closed,True,2017-08-22 02:58:38,2017-08-22 06:14:00
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/216,https://api.github.com/repos/kubernetes/frakti/issues/216,Pods with weave network plugin are always creating,"Pods with weave network plugin are always creating, this is because weave plugin creates a veth pair based on a truncated sandboxID, e.g. vethweplk8s_POD. But for hyper runtime, sandboxID always have same prefix `k8s_POD.`, which results in same veth name `vethweplk8s_POD` in weave plugin.",closed,False,2017-08-23 09:24:05,2017-08-23 14:23:58
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/217,https://api.github.com/repos/kubernetes/frakti/issues/217,Support weave network plugin,"Fix #216.

To use weave network plugin, run

```sh
  kubectl apply -f ""https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d '\n')""
```",closed,True,2017-08-23 10:55:16,2017-08-23 14:23:58
frakti,jiangpengcheng,https://github.com/kubernetes/frakti/issues/218,https://api.github.com/repos/kubernetes/frakti/issues/218,volume name too long,"Hi

I met a problem that when a docker image has a `volume`, then the deployment using that image will be failed and complain: 

```
Error: Name ""hyper-volume-pool-k8s_POD.0_test-565844431-w3h8p_default_a6c7fd06-88ac-11e7-980c-aeb2c2cd871a_e9d4855f-35b276bb33045047bfe70ec6383da13b7631727e1b6df71cd9a115b4ce80d967_temp"" too long. Command failed
```

the test docker image's docker file is quiet simple:

```dockerfile
FROM busybox

volume /temp
```

the frakti version is 1.0, and hyperd 0.8.1

I'm not sure whether this problem is related to frakti or hyperd, as it depends on how to resolve this 'name' error",closed,False,2017-08-24 09:31:15,2017-08-25 14:03:34
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/219,https://api.github.com/repos/kubernetes/frakti/issues/219,Add metadata store and basic unikernel service,"1. add container/sandbox metadata store
2. add basic service skeleton

Will bring container and VM workflow when test is enough
@feiskyer @resouer PTAL",closed,True,2017-08-25 09:27:22,2017-08-30 04:38:42
frakti,drinktee,https://github.com/kubernetes/frakti/pull/220,https://api.github.com/repos/kubernetes/frakti/issues/220,Fix flannel typo in readme.md,Fix flannel typo in readme.md,closed,True,2017-08-25 09:53:31,2017-08-25 12:40:26
frakti,LilyFaFa,https://github.com/kubernetes/frakti/pull/221,https://api.github.com/repos/kubernetes/frakti/issues/221,Add hyperTest and imagesTest,,closed,True,2017-08-27 06:05:50,2017-08-28 00:10:47
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/222,https://api.github.com/repos/kubernetes/frakti/issues/222,Fix UpdateRuntimeConfig,"We always return success on UpdateRuntimeConfig now, should fix it when podCIDR updates.",open,False,2017-08-28 01:00:27,2018-01-05 23:25:16
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/223,https://api.github.com/repos/kubernetes/frakti/issues/223,Unikernel sandbox/container lifecycle implement,"Build based on #219 

1. Implement VM management.
2. Implement container/sandbox lifecycle management.
3. fix some multi-runtime workflow issues in manager

Still lack image management and I need to add some e2e test case.

I've test this manually with critool, with a [memory only redis image](http://downloads.osv.io.s3.amazonaws.com/cloudius/osv-redis-memonly/osv-redis-memonly-v0.24.qemu.qcow2) download from OSv official site. And should store in `/var/lib/frakti/unikernel/image/test-image.qcow2` as test image.

```bash
# cat sandbox.json 
{
    ""metadata"": {
        ""name"": """",
        ""namespace"": ""default"",
        ""attempt"": 1,
        ""uid"": ""hdishd83djaidwnduwk28bcsb""
    },
    ""dns_config"": {
        ""servers"": [
               ""server1.redhat.com"",
               ""server2.redhat.com""
         ],
         ""searches"": [
               ""8.8.8.8""
         ]
    },
    ""annotations"": {
        ""runtime.frakti.alpha.kubernetes.io/Unikernel"": ""true""
    },
    ""linux"": {
        ""security_context"": {
            ""namespace_options"": {
                ""host_network"": false
            }
        }
    }
}
# cat busybox.json 
{
    ""metadata"": {
        ""name"": ""busybox""
    },
    ""image"": {
        ""image"": ""busybox""
    },
    ""command"": [
        ""cat"",
	""/etc/resolv.conf""
    ],
    ""tty"": false,
    ""stdin"": true
}
# crictl runs sandbox.json
cf198d57-8c21-11e7-8461-4ccc6a36dc71
# crictl sandboxes
SANDBOX ID                             NAME                STATE
cf198d57-8c21-11e7-8461-4ccc6a36dc71                       SANDBOX_READY
# crictl inspects cf198d57-8c21-11e7-8461-4ccc6a36dc71
ID: cf198d57-8c21-11e7-8461-4ccc6a36dc71
UID: hdishd83djaidwnduwk28bcsb
Namespace: default
Attempt: 1
Status: SANDBOX_READY
Created: 2017-08-29 02:50:49.44573354 +0800 CST
Annotations:
	runtime.frakti.alpha.kubernetes.io/Unikernel -> true
# crictl create cf198d57-8c21-11e7-8461-4ccc6a36dc71 busybox.json sandbox.json
08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
# crictl inspect 08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
ID: 08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
Name: busybox
State: CONTAINER_CREATED
Created: 47 seconds ago
# crictl start 08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
ID: 08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
Name: busybox
State: CONTAINER_RUNNING
Created: About a minute ago
Started: 3 seconds ago
# crictl stop 08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
# crictl inspect 08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
ID: 08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
Name: busybox
State: CONTAINER_EXITED
Created: About a minute ago
Started: 23 seconds ago
Finished: 2 seconds ago
Exit Code: 0
# crictl stops cf198d57-8c21-11e7-8461-4ccc6a36dc71
ID: cf198d57-8c21-11e7-8461-4ccc6a36dc71
UID: hdishd83djaidwnduwk28bcsb
Namespace: default
Attempt: 1
Status: SANDBOX_NOTREADY
Created: 2017-08-29 02:50:49.44573354 +0800 CST
Annotations:
	runtime.frakti.alpha.kubernetes.io/Unikernel -> true
# crictl rm 08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
08535aec76277c34ea130828dff4390beb275a2efcfde308d3ff8364671ab054
# crictl ps
# crictl rms cf198d57-8c21-11e7-8461-4ccc6a36dc71
Removed sandbox cf198d57-8c21-11e7-8461-4ccc6a36dc71
# crictl sandboxes
```
@feiskyer @resouer PTAL",closed,True,2017-08-28 19:59:53,2017-08-30 14:12:56
frakti,LilyFaFa,https://github.com/kubernetes/frakti/pull/224,https://api.github.com/repos/kubernetes/frakti/issues/224,Add streaming Test,Add unit test to streaming part.,closed,True,2017-08-31 13:34:08,2017-09-06 01:57:55
frakti,resouer,https://github.com/kubernetes/frakti/issues/225,https://api.github.com/repos/kubernetes/frakti/issues/225,Evaluate and remove tmpfs workaround in favor of kubernetes/50596,"See: https://github.com/kubernetes/kubernetes/pull/50596

Will evaluate and remove tmpfs workaround.",closed,False,2017-09-04 03:39:54,2017-09-07 15:05:15
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/226,https://api.github.com/repos/kubernetes/frakti/issues/226,Enable unikernel runtime log,"1. enable basic unikernel log, we still need vm wrapper to reformat log from qemu.
2. enable vm ACPI, if not, it will hang at start time.
3. fix domain copy in ListDomains
4. enable basic libvirt bridge network for debug purpose.

/cc @feiskyer @resouer PTAL",closed,True,2017-09-04 15:03:02,2017-09-12 09:12:39
frakti,Crazykev,https://github.com/kubernetes/frakti/pull/227,https://api.github.com/repos/kubernetes/frakti/issues/227,Add unikernel runtime image management,"Ref #181, based on #226 

**`Image`**
Image is a tar file(could be compressed), which contains a json formated file `manifest` to describe the image and several image files whose relative path is described in `manifest`.
A typical manifest may look like:
```bash
{
    ""unikernelType"": ""osv"",
    ""format"": ""qcow2"",
    ""imageFile"": ""osv-unikernel.qcow2""
}
```
**`For Every Container`**
When create container(or sandbox/VM), we clone a copy of image files to new directory, this copy of image is only prepared for this container.
**Limitations**
For now, we only support qcow2 format image, common raw/initrd+kernel format is under development. And also want to support linuxkit yaml file live build when create container.

/cc @feiskyer @resouer  PTAL",closed,True,2017-09-04 15:24:49,2017-09-12 09:13:36
frakti,resouer,https://github.com/kubernetes/frakti/pull/228,https://api.github.com/repos/kubernetes/frakti/issues/228,Remove tmpfs workaround,"Fixes: #225 
Also, fix bug when `cinderConfigFile` is not provided there will be nil value.

~~[DO NOT MERGE] This does not work yet, `unmount` is skipped somehow.~~

Confirmed, this work with kubelet 1.7.5+",closed,True,2017-09-07 13:12:59,2017-09-07 15:34:25
frakti,resouer,https://github.com/kubernetes/frakti/pull/229,https://api.github.com/repos/kubernetes/frakti/issues/229,Make image version configurable,"Usage:

```
export IMAGE_VERSION=your_version
make docker
```",closed,True,2017-09-08 02:58:34,2017-09-10 14:03:44
frakti,LilyFaFa,https://github.com/kubernetes/frakti/pull/230,https://api.github.com/repos/kubernetes/frakti/issues/230,add sanbox_test.go,,closed,True,2017-09-08 06:05:03,2017-09-08 23:36:26
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/231,https://api.github.com/repos/kubernetes/frakti/issues/231,Update kubernetes vendors,"Kubelet CRI has added MountPropagation, we should update kubernetes vendors to include this change.

Refer to https://github.com/kubernetes/kubernetes/pull/46444.",closed,False,2017-09-15 11:37:51,2017-09-27 07:09:27
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/232,https://api.github.com/repos/kubernetes/frakti/issues/232,Evaluate vendor manage tools,"We are using godep for managing vendors today, but it is not so easy to update standalone packages with godep. We should consider an alternative one. Some candidates include:

- [vndr](https://github.com/LK4D4/vndr): containerd and moby are using it.
- [glide](https://github.com/Masterminds/glide): helm and kompose are using it.
- [dep](https://github.com/golang/dep): dashboard is using it. But it's still not stable now, hoping to be the official toolchain in go 1.10.

I'd prefer vndr now, and we should switch to dep when it is stable.",closed,False,2017-09-15 11:54:04,2017-09-18 09:58:55
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/233,https://api.github.com/repos/kubernetes/frakti/issues/233,Golint warnings,"There are some golint warnings (see [here](https://goreportcard.com/report/github.com/kubernetes/frakti) for the list), we'd better to fix them.",closed,False,2017-09-15 11:56:24,2018-03-17 17:25:35
frakti,resouer,https://github.com/kubernetes/frakti/pull/234,https://api.github.com/repos/kubernetes/frakti/issues/234,Use dep instead of godeps,"This is PR to use dep to replace godep

Fixes #232

I can not successfully use vndr, so I chose dep. Also, vndr is maintained by one person while dep is a promising official tool.",closed,True,2017-09-18 02:11:41,2017-09-18 10:39:58
frakti,resouer,https://github.com/kubernetes/frakti/pull/235,https://api.github.com/repos/kubernetes/frakti/issues/235,Reverts kubernetes/frakti#234,"Reverts kubernetes/frakti#234

`dep` does not work well during upgrade k8s",closed,True,2017-09-19 14:19:11,2017-09-19 14:21:10
frakti,resouer,https://github.com/kubernetes/frakti/pull/236,https://api.github.com/repos/kubernetes/frakti/issues/236,Use govendor to replace godep,"Use govendor to replace godep

Please note the forked part also supported:

```
 +		{
 +			""checksumSHA1"": ""wWUycQ9aeECeB57Mn5mJwegnZus="",
 +			""origin"": ""github.com/resouer/libvirt-go-xml"",
 +			""path"": ""github.com/libvirt/libvirt-go-xml"",
 +			""revision"": ""d63c62d633e0ceb2bc814f6d2396b78235c45451"",
 +			""revisionTime"": ""2017-09-18T08:20:19Z"",
 +			""tree"": true
 +		},
```

It is generated by 
```
govendor fetch github.com/libvirt/libvirt-go-xml/^::github.com/resouer/libvirt-go-xml@d63c62d633e0ceb2bc814f6d2396b78235c45451
```",closed,True,2017-09-19 14:25:00,2017-09-20 02:30:40
frakti,resouer,https://github.com/kubernetes/frakti/pull/237,https://api.github.com/repos/kubernetes/frakti/issues/237,Update frakti vendor to Kubernetes 1.8 release,"The vendored Kubernetes commit ID is: bfab46cf2543ac17f8c0e75b80631555ac7a6aed 

Fixes: #231 ",closed,True,2017-09-22 16:02:18,2017-09-27 07:12:58
frakti,nikhita,https://github.com/kubernetes/frakti/pull/238,https://api.github.com/repos/kubernetes/frakti/issues/238,Fix link after design proposal move,The design proposals were organized according to SIGs in kubernetes/community#1010. This led to a broken link in the README.,closed,True,2017-09-25 19:11:14,2017-09-26 00:24:10
frakti,resouer,https://github.com/kubernetes/frakti/issues/239,https://api.github.com/repos/kubernetes/frakti/issues/239,[BUG] Master branch compiled frakti can not ping host machine,"**BUG:**
Master branch compiled frakti can not ping host machine

**Reproduce:**
Compile frakti from master branch. Install a kubernetes to test against it.

**Report:**
The pods are assigned with right IP addresses and can ping each other.
But non of them can ping address of host machine.",closed,False,2017-09-26 07:49:53,2017-09-26 13:14:09
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/240,https://api.github.com/repos/kubernetes/frakti/issues/240,Bypass netfilter for the bridge.,"This is because bridge-nf-call-iptables=1 is required for kubernetes. 

Fixes #239.",closed,True,2017-09-26 12:36:52,2017-09-26 13:45:33
frakti,feiskyer,https://github.com/kubernetes/frakti/issues/241,https://api.github.com/repos/kubernetes/frakti/issues/241,Releasing Frakti v1.1,"## TODOs

- [x] Bump version to v1.1 #242 
- [x] Release with v1.1 tag with release notes
- [x] Update changelog

## Draft release notes

Frakti v1.1 upgrades to kubernetes v1.8, enhances CNI network plugins and adds experimental unikernel support. It also includes various of enhancements and bug fixes.

## Features and Updates

- #192 Improves CNI plugin compatibility
- #196 #208 Adds general support for CNI plugins, e.g. flannel and calico plugin
- #219 #223 #226 Adds experimental support for unikernel
- #217 Fixes problem of weave plugin
- #199 #207 Adds cinder flexvolume plugin
- #188 Fixes CNI podName problem
- #189 Fixes CNI cleanup when sandbox runs failure
- #205 Increases memory limits for kube-dns
- #211 #212 #221 #224 #230 Adds unit tests for various packages

## External Dependency Version Information

- Kubernetes v1.8
- Hyperd v1.0
- Docker v1.12-v17.03
",closed,False,2017-09-27 06:40:12,2017-09-27 15:57:42
frakti,feiskyer,https://github.com/kubernetes/frakti/pull/242,https://api.github.com/repos/kubernetes/frakti/issues/242,Bump frakti version to 1.1,For #241.,closed,True,2017-09-27 11:47:39,2017-09-27 12:43:18
frakti,resouer,https://github.com/kubernetes/frakti/pull/243,https://api.github.com/repos/kubernetes/frakti/issues/243,Update change log,Just update the change log with frakti v1.1,closed,True,2017-09-27 15:44:42,2017-09-27 15:58:01
frakti,resouer,https://github.com/kubernetes/frakti/pull/244,https://api.github.com/repos/kubernetes/frakti/issues/244,Use k8s style owners,The assignee style owner file has been deprecated.,closed,True,2017-10-13 06:33:40,2017-10-17 06:20:22
frakti,resouer,https://github.com/kubernetes/frakti/issues/245,https://api.github.com/repos/kubernetes/frakti/issues/245,"Migrate frakti to ""Kata"" in next two releases","[Roadmap]

`runV` and `ClearContainer` will be merged soon, the new project is about to released.

We should migrate Frakti to the new container runtime after the merge. More specifically:

1. Remove dependency on hyperd
2. Move some necessary hyperd code to frakti",closed,False,2017-10-13 06:45:50,2018-03-17 17:25:53
frakti,resouer,https://github.com/kubernetes/frakti/pull/246,https://api.github.com/repos/kubernetes/frakti/issues/246,Fix nil pointer when hostpath is invalid,The previous code omit a error when hostpath is invalid.,closed,True,2017-10-13 07:48:39,2017-10-17 06:24:24
frakti,ZouRui89,https://github.com/kubernetes/frakti/pull/247,https://api.github.com/repos/kubernetes/frakti/issues/247,fixed grammatical issues and alternative images url,An alternative image website is available when google website can not be reached with successful network connection.,closed,True,2017-10-16 03:28:17,2018-08-09 22:31:38
frakti,Dewey-Ding,https://github.com/kubernetes/frakti/pull/248,https://api.github.com/repos/kubernetes/frakti/issues/248,grammar issues.,grammar issues.,closed,True,2017-10-17 04:50:44,2017-10-17 06:23:06
frakti,ZouRui89,https://github.com/kubernetes/frakti/pull/249,https://api.github.com/repos/kubernetes/frakti/issues/249,grammar issues,fixed some grammar issues,closed,True,2017-10-18 02:57:53,2017-10-18 05:41:13
frakti,resouer,https://github.com/kubernetes/frakti/issues/250,https://api.github.com/repos/kubernetes/frakti/issues/250,CI failed when install hypercontainer,"https://travis-ci.org/kubernetes/frakti/jobs/289321878

```
Making all in cmd
make[1]: Entering directory `/tmp/src/github.com/hyperhq/hyperd/cmd'
Making all in hyperd
make[2]: Entering directory `/tmp/src/github.com/hyperhq/hyperd/cmd/hyperd'
go build -tags ""static_build  with_libvirt btrfs_noversion libdm_no_deferred_remove"" -ldflags ""-X github.com/hyperhq/hyperd/utils.VERSION=0.8.1 -X github.com/hyperhq/hyperd/utils.GITCOMMIT=`git describe --dirty --always --tags 2> /dev/null || true`"" hyperd.go
make[2]: Leaving directory `/tmp/src/github.com/hyperhq/hyperd/cmd/hyperd'
Making all in hyperctl
make[2]: Entering directory `/tmp/src/github.com/hyperhq/hyperd/cmd/hyperctl'
go build -ldflags ""-X github.com/hyperhq/hyperd/utils.VERSION=0.8.1 -X github.com/hyperhq/hyperd/utils.GITCOMMIT=`git describe --dirty --always --tags 2> /dev/null || true`"" hyperctl.go
make[2]: Leaving directory `/tmp/src/github.com/hyperhq/hyperd/cmd/hyperctl'
Making all in vmlogd
make[2]: Entering directory `/tmp/src/github.com/hyperhq/hyperd/cmd/vmlogd'
go build -ldflags ""-X github.com/hyperhq/hyperd/utils.VERSION=0.8.1 -X github.com/hyperhq/hyperd/utils.GITCOMMIT=`git describe --dirty --always --tags 2> /dev/null || true`"" vmlogd.go
make[2]: Leaving directory `/tmp/src/github.com/hyperhq/hyperd/cmd/vmlogd'
make[2]: Entering directory `/tmp/src/github.com/hyperhq/hyperd/cmd'
make[2]: Nothing to be done for `all-am'.
make[2]: Leaving directory `/tmp/src/github.com/hyperhq/hyperd/cmd'
make[1]: Leaving directory `/tmp/src/github.com/hyperhq/hyperd/cmd'
make[1]: Entering directory `/tmp/src/github.com/hyperhq/hyperd'
make[1]: Nothing to be done for `all-am'.
make[1]: Leaving directory `/tmp/src/github.com/hyperhq/hyperd'
!!! Error in /home/travis/gopath/src/k8s.io/frakti/hack/lib/hyper.sh:75
  'return 1' exited with status 1
Call stack:
  1: /home/travis/gopath/src/k8s.io/frakti/hack/lib/hyper.sh:75 frakti::hyper::install_hypercontainer(...)
  2: hack/install-hypercontainer.sh:23 main(...)
Exiting with status 1
!!! Error in /home/travis/gopath/src/k8s.io/frakti/hack/lib/hyper.sh:21
  '( export GOPATH=${HYPERD_TEMP}; mkdir -p ""${GO_HYPERHQ_PATH}""; frakti::log::status ""install necessary tools""; frakti::hyper::preinstall; frakti::log::status ""build hyperd""; frakti::hyper::build_hyperd; frakti::log::status ""build hyperstart""; frakti::hyper::build_hyperstart )' exited with status 1
Call stack:
  1: /home/travis/gopath/src/k8s.io/frakti/hack/lib/hyper.sh:21 frakti::hyper::install_hypercontainer(...)
  2: hack/install-hypercontainer.sh:23 main(...)
Exiting with status 1
The command ""hack/install-hypercontainer.sh"" failed and exited with 1 during .
```
",closed,False,2017-10-18 05:40:27,2017-10-27 07:17:52
frakti,resouer,https://github.com/kubernetes/frakti/pull/251,https://api.github.com/repos/kubernetes/frakti/issues/251,Annotate kube-dns for good,"The default resource limit of kube-dns is tend to be not enough even though we changed the default limit of hypervisor runtime.

And we really don't want to let kube-dns reserve a huge amount of memory resource of host.

So let's use Linux container runtime to handle it by annotating.",closed,True,2017-10-20 13:45:30,2017-10-23 11:20:51
frakti,resouer,https://github.com/kubernetes/frakti/issues/252,https://api.github.com/repos/kubernetes/frakti/issues/252,kube-proxy does not work for hypervisor runtime but OK for OS container,"Very easy to re-produce:

```
apiVersion: v1
kind: Pod
metadata:
  name: nginx
  namespace: default
  labels:
    app: nginx
spec:
  containers:
  - image: nginx
    imagePullPolicy: IfNotPresent
    name: nginx
    ports:
    - containerPort: 80
  restartPolicy: Always
---
apiVersion: v1
kind: Service
metadata:
  name: nginx
spec:
  selector:
    app: nginx
  ports:
  - name: default
    protocol: TCP
    port: 8001
    targetPort: 80
```

```
kubectl get ep
nginx         <none>               3m
```

And if add OSContainer annotation to Pod, it will be back as endpoint

[Update] Only happens for latest hyperd upstream master.",closed,False,2017-10-20 15:41:38,2017-10-23 12:09:35
frakti,resouer,https://github.com/kubernetes/frakti/issues/253,https://api.github.com/repos/kubernetes/frakti/issues/253,Image pull is fail for hyper runtime,"```
Events:
  Type     Reason                 Age               From               Message
  ----     ------                 ----              ----               -------
  Normal   Scheduled              3m                default-scheduler  Successfully assigned echo-cb8695578-ns9n9 to only
  Normal   SuccessfulMountVolume  3m                kubelet, only      MountVolume.SetUp succeeded for volume ""default-token-p6l9c""
  Normal   Pulling                2m (x4 over 3m)   kubelet, only      pulling image ""alexellis/faas-nodejs-echo""
  Warning  Failed                 2m (x4 over 3m)   kubelet, only      Failed to pull image ""alexellis/faas-nodejs-echo"": rpc error: code = Unknown desc = PullImage from hyper image service failed: image ""docker.io/alexellis/faas-nodejs-echo"" with tag ""latest"" not found
  Warning  FailedSync             1m (x10 over 3m)  kubelet, only      Error syncing pod
  Normal   BackOff                1m (x6 over 3m)   kubelet, only      Back-off pulling image ""alexellis/faas-nodejs-echo""
```

Even though the image is definitely valid. Maybe related to the change in docker to deal with lib path.",closed,False,2017-10-20 16:08:19,2017-10-27 07:17:32
frakti,resouer,https://github.com/kubernetes/frakti/pull/254,https://api.github.com/repos/kubernetes/frakti/issues/254,Fix full docker image path inconsistency,"`kuberuntime` relies on `docker/distribution` to parse image name to
full image path and pass it to `runtime.GetImageInfo(fullImagePath)`:
e.g.
```
nginx -> docker.io/library/nginx
alexellis/echo  -> docker.io/alexellis/echo
```

But hyper only returns `alexellis/echo` in imageList, so we
need to fix the inconsistency here before doing filter. Otherwise it will report image not found.",closed,True,2017-10-21 08:05:11,2017-10-23 12:51:32
frakti,bergwolf,https://github.com/kubernetes/frakti/pull/255,https://api.github.com/repos/kubernetes/frakti/issues/255,fix ci build failures,Do not use subshell so that it is easier to see where ci fails.,closed,True,2017-10-21 19:01:23,2017-10-22 02:40:55
frakti,resouer,https://github.com/kubernetes/frakti/pull/256,https://api.github.com/repos/kubernetes/frakti/issues/256,Fix ip with mask in pod status,"Fixes: #252 

Ref: https://github.com/hyperhq/hyperd/issues/671

cc @bergwolf ",closed,True,2017-10-23 09:33:12,2017-10-23 12:49:53
frakti,resouer,https://github.com/kubernetes/frakti/pull/257,https://api.github.com/repos/kubernetes/frakti/issues/257,Bump to frakti 1.1.1,"Bump to frakti 1.1.1

Fixes: #258

Change log see: https://github.com/kubernetes/frakti/releases/tag/v1.1.1",closed,True,2017-10-27 09:17:28,2017-10-28 14:27:38
frakti,resouer,https://github.com/kubernetes/frakti/issues/258,https://api.github.com/repos/kubernetes/frakti/issues/258,Release frakti 1.1.1,"There're several bug fixes after 1.1 release. We need to release a new 1.1.1 to include them.

And, I also noticed seems come back: https://github.com/kubernetes/frakti/issues/53

While not confirmed yet.",closed,False,2017-10-27 09:29:43,2017-10-28 14:27:33
frakti,resouer,https://github.com/kubernetes/frakti/issues/259,https://api.github.com/repos/kubernetes/frakti/issues/259,CI failed because hyperstart build fail,"```
gcc -Wall -Werror -DVERSIONCOMMIT=\""""1.0.0, commit: `git describe --dirty --always --tags 2> /dev/null || true`""\"" -g -O2   -o hyperstart init.o jsmn.o net.o util.o parse.o parson.o container.o exec.o event.o portmapping.o netlink.o   
make[2]: Leaving directory `/tmp/src/github.com/hyperhq/hyperstart/src'
Making all in build
make[2]: Entering directory `/tmp/src/github.com/hyperhq/hyperstart/build'
bash ./make-initrd.sh
36295 blocks
make[2]: Leaving directory `/tmp/src/github.com/hyperhq/hyperstart/build'
make[2]: Entering directory `/tmp/src/github.com/hyperhq/hyperstart'
make[2]: Leaving directory `/tmp/src/github.com/hyperhq/hyperstart'
make[1]: Leaving directory `/tmp/src/github.com/hyperhq/hyperstart'
!!! Error in /home/travis/gopath/src/k8s.io/frakti/hack/lib/hyper.sh:52
  'return 1' exited with status 1
Call stack:
  1: /home/travis/gopath/src/k8s.io/frakti/hack/lib/hyper.sh:52 frakti::hyper::install_hypercontainer(...)
  2: hack/install-hypercontainer.sh:23 main(...)
Exiting with status 1
```

cc @bergwolf similar to the previous issue?",closed,False,2017-10-27 09:33:04,2017-10-28 04:49:23
frakti,bergwolf,https://github.com/kubernetes/frakti/pull/260,https://api.github.com/repos/kubernetes/frakti/issues/260,hyperstart kernel path has been changed,fixes #259,closed,True,2017-10-28 04:20:47,2017-10-28 04:49:23
frakti,resouer,https://github.com/kubernetes/frakti/pull/261,https://api.github.com/repos/kubernetes/frakti/issues/261,Claim using cni plugins for frakti,Claim to use flannel in deploy doc.,closed,True,2017-10-31 14:03:52,2017-10-31 14:04:10
frakti,resouer,https://github.com/kubernetes/frakti/pull/262,https://api.github.com/repos/kubernetes/frakti/issues/262,Update picture of frakti,Update pic to runv instead of hyperd,closed,True,2017-10-31 14:58:01,2017-10-31 14:58:18
frakti,xuchenhao001,https://github.com/kubernetes/frakti/pull/263,https://api.github.com/repos/kubernetes/frakti/issues/263,Update frakti version,"Update frakti version.
Fix bug that if `/usr/bin/frakti` exists, bash will return with error. Now remove old frakti automatically and then download a new one.",closed,True,2017-11-06 06:42:01,2017-11-06 07:41:15
frakti,youzibaby,https://github.com/kubernetes/frakti/issues/264,https://api.github.com/repos/kubernetes/frakti/issues/264,kubelet error when start a hypercontainer ,"```
kubelet: E1107 15:02:08.750988   27959 remote_image.go:146] ImageFsInfo from image service failed: rpc error: code = Unknown desc = not implemented
kubelet: E1107 15:02:08.751139   27959 kubelet.go:1230] Image garbage collection failed multiple times in a row: rpc error: code = Unknown desc = not implemented
```",closed,False,2017-11-07 07:05:13,2017-11-07 14:46:54
frakti,resouer,https://github.com/kubernetes/frakti/pull/265,https://api.github.com/repos/kubernetes/frakti/issues/265,Update to use runv instead of hypercontainer,We need to update to use runV instead.,closed,True,2017-11-13 14:37:03,2017-11-14 02:26:28
frakti,resouer,https://github.com/kubernetes/frakti/pull/266,https://api.github.com/repos/kubernetes/frakti/issues/266,Use the latest frakti version in doc,"Also, we may need to find reliable a way to get latest release version. See: #267 ",closed,True,2017-11-15 04:17:49,2017-11-15 07:56:19
frakti,resouer,https://github.com/kubernetes/frakti/issues/267,https://api.github.com/repos/kubernetes/frakti/issues/267,Consider use the same Kubernetes release version for frakti.,"Since frakti is a 100% Kubernetes container runtime, I would suggest use Kubernetes release version as the frakti release version from 1.9. So we would benefits from:

1. Detectable Frakti & Kubernetes version by:  `curl -sSL dl.k8s.io/release/${KUBE_RELEASE}.txt`

2. Predictable Frakti version for any given Kubernetes version.

cc @bergwolf ",closed,False,2017-11-15 04:34:13,2017-12-15 22:23:37
frakti,resouer,https://github.com/kubernetes/frakti/issues/268,https://api.github.com/repos/kubernetes/frakti/issues/268,Validate with Kubernetes 1.9,CNI version will be upgraded to 0.6.0  in 1.9: https://github.com/kubernetes/kubernetes/issues/49480,closed,False,2017-11-21 08:45:02,2017-12-14 06:28:43
frakti,youzibaby,https://github.com/kubernetes/frakti/issues/269,https://api.github.com/repos/kubernetes/frakti/issues/269,Use Docker + runV + Kubernetes?,"emm...I have a questionï¼Œwhy k8s can't direct post a pod json to docker with runv, I mean use frakti to reserve requests post to hyperd is goodwayï¼Ÿ      [runv](https://feisky.xyz/container/runv.html)",closed,False,2017-12-01 03:20:07,2017-12-10 21:34:54
frakti,resouer,https://github.com/kubernetes/frakti/pull/270,https://api.github.com/repos/kubernetes/frakti/issues/270,Upgrade CNI to 0.6.0 and vendor dockershim to 1.9,"As the title said. 

Fixes: #268 , #271",closed,True,2017-12-01 09:48:39,2017-12-14 06:32:37
frakti,resouer,https://github.com/kubernetes/frakti/issues/271,https://api.github.com/repos/kubernetes/frakti/issues/271,Do not use 0.0.0.0 for streaming server address,"Apiserver will got this `0.0.0.0` and send redirected request to it, while then reach the address of master node.

cc reported by @liwei ",closed,False,2017-12-05 16:38:22,2017-12-15 22:23:22
frakti,spiffxp,https://github.com/kubernetes/frakti/pull/272,https://api.github.com/repos/kubernetes/frakti/issues/272,Update code-of-conduct.md,"Refer to kubernetes/community as authoritative source for code of conduct

ref: kubernetes/community#1527",closed,True,2017-12-20 18:32:18,2018-01-03 00:48:30
frakti,AceHack,https://github.com/kubernetes/frakti/issues/273,https://api.github.com/repos/kubernetes/frakti/issues/273,Consider support for Windows Hyper-V,please support windows hyper-v hypervisor,closed,False,2017-12-27 16:06:48,2018-08-04 04:39:28
frakti,youzibaby,https://github.com/kubernetes/frakti/issues/274,https://api.github.com/repos/kubernetes/frakti/issues/274,frakti 1.9 error,"![image](https://user-images.githubusercontent.com/15883162/34811491-15084fa4-f6dc-11e7-8b2f-67f8f93ab447.png)
",closed,False,2018-01-11 06:31:36,2018-02-02 00:11:43
frakti,resouer,https://github.com/kubernetes/frakti/pull/275,https://api.github.com/repos/kubernetes/frakti/issues/275,Add streaming server log for debug,Add a log for debugging streaming server address. ,closed,True,2018-01-12 07:44:51,2018-01-12 18:18:17
frakti,xuchenhao001,https://github.com/kubernetes/frakti/issues/276,https://api.github.com/repos/kubernetes/frakti/issues/276,hyperctl exec cannot find container,"When I want to get into the pod created by k8s, there is an error:
```bash
$ hyperctl list
POD ID                                                                                                      POD Name                                                                                                    VM name             Status
k8s_POD.0_kubernetes-dashboard-6647b86788-fr9j6_kube-system_2a3aee87-f9d9-11e7-98d8-4437e681a382_b6189b36   k8s_POD.0_kubernetes-dashboard-6647b86788-fr9j6_kube-system_2a3aee87-f9d9-11e7-98d8-4437e681a382_b6189b36   vm-JeGSNecgxw       running
k8s_POD.0_tomcat-846bf4bbcc-h9wlk_xchxubj_4ac4aa5b-fa7e-11e7-8deb-4437e681a382_e13e787f                     k8s_POD.0_tomcat-846bf4bbcc-h9wlk_xchxubj_4ac4aa5b-fa7e-11e7-8deb-4437e681a382_e13e787f                     vm-jIHuQCsUTf       running
ubuntu-16.04-9230593623                                                                                     ubuntu-16.04-9230593623                                                                                     vm-XOhoqSNZsG       running
k8s_POD.0_kube-dns-547d5d9ffb-hxhc2_kube-system_51325360-f9d6-11e7-98d8-4437e681a382_df91e542               k8s_POD.0_kube-dns-547d5d9ffb-hxhc2_kube-system_51325360-f9d6-11e7-98d8-4437e681a382_df91e542               vm-xJTxpQyNed       running
$ hyperctl exec -t k8s_POD.0_tomcat-846bf4bbcc-h9wlk_xchxubj_4ac4aa5b-fa7e-11e7-8deb-4437e681a382_e13e787f /bin/bash
hyperctl ERROR: Error from daemon's response: cannot find container k8s_POD.0_tomcat-846bf4bbcc-h9wlk_xchxubj_4ac4aa5b-fa7e-11e7-8deb-4437e681a382_e13e787f
```
However, the pod created by `hyperctl run -d ubuntu:16.04` can be accessed by `hyperctl exec -t ubuntu-16.04-9230593623 bash`",closed,False,2018-01-16 05:49:15,2018-01-16 06:47:52
frakti,resouer,https://github.com/kubernetes/frakti/issues/277,https://api.github.com/repos/kubernetes/frakti/issues/277,Support GCE Persistent Disk device as Pod volume,"We should support GCE Persistent Disk device as Pod volume. So we can run `Kubernetes + frakti` on GCE production env, because it should give us better performance than 9p volumes",closed,False,2018-01-19 07:34:11,2018-02-05 18:42:40
frakti,resouer,https://github.com/kubernetes/frakti/pull/278,https://api.github.com/repos/kubernetes/frakti/issues/278,Implement flexvolume for GCE PD,"Fixes: #277

In this PR:
- [x] Implemented flexvolume for GCE PD.

Leave to next PR:
- [ ] Remove duplicated logic
- [ ] Fix TODOs to make code robust
- [ ] Create a ConfigMap to store GCE api json
- [ ] Create a DaemonSet yaml to install GCE PD driver, export GCE api json path from ConfigMap
- [ ] Make a new 1.9.x release

How to test:

1. Compile frakti
```
make install
# The binaries will be put in ./out

# Skipped: install frakti

cp out/frakti /usr/bin/
```

2. In every Node
```
# Create driver directory and install GCE PD driver into it:
cp out/pd /usr/libexec/kubernetes/kubelet-plugins/volume/exec/gce~pd/pd

# Put GCE API json file here:
/root/gcp/hyper-test-4be009a5b924.json

# Add this ENV to frakti to call GCE API
GOOGLE_APPLICATION_CREDENTIALS=/root/gcp/hyper-test-4be009a5b924.json

```

3. Install Kubernetes as normal
```
# Skipped: install Kubernetes with kubeadm

# Enable frakti runtime
sed -i '2 i\Environment=""KUBELET_EXTRA_ARGS=--container-runtime=remote --container-runtime-endpoint=/var/run/frakti.sock --feature-gates=AllAlpha=true --enable-controller-attach-detach=false""' /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
systemctl daemon-reload

# Please note:  `--enable-controller-attach-detach=false` is necessary.
```
4. Create a gce-pod.yaml, please note: frakti does not require `size` filed.
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: web
  labels:
    app: nginx
spec:
  containers:
  - name: nginx
    image: nginx
    imagePullPolicy: IfNotPresent
    ports:
    - containerPort: 80
    volumeMounts:
    - name: nginx-persistent-storage
      mountPath: /var/lib/nginx
  volumes:
  - name: nginx-persistent-storage
    flexVolume:
      driver: ""gce/pd""
      fsType: ""ext4""
      options:
        project: ""hyper-test-142007""
        zone: ""asia-east1-a""
        volumeID: ""v-31bfb7dbd0494646b4a096bdfe0de098-vol2""
```

5.  Use gcloud or console to create a volume in given zone & project, with name ""v-31bfb7dbd0494646b4a096bdfe0de098-vol2""

6. Test
```bash
$ kubectl create -f gce-pod.yaml
$ lsblk -n -o FSTYPE /dev/disk/by-id/google-v-31bfb7dbd0494646b4a096bdfe0de098-vol2
ext4
$ kubectl delete -f gce-pod.yaml
$ ls /dev/disk/by-id/google-v-31bfb7dbd0494646b4a096bdfe0de098-vol2
ext4
No such file or directory
```",closed,True,2018-01-29 05:37:05,2018-02-08 01:28:29
frakti,resouer,https://github.com/kubernetes/frakti/issues/279,https://api.github.com/repos/kubernetes/frakti/issues/279,[1.10] Change to new fields in CRI of namespace sharing,"A break change targeting 1.10 is: https://github.com/kubernetes/kubernetes/pull/58973

Should update CRI manager when it got merged.",closed,False,2018-01-30 20:05:11,2018-04-11 02:43:49
frakti,gnawux,https://github.com/kubernetes/frakti/pull/280,https://api.github.com/repos/kubernetes/frakti/issues/280,GetImageInfo: use Filter to get image instead of a full list,"the current GetImageInfo list all images and filter them in frakti.

The `Filter` parameter in the request could be used for filter it
in the hyperd side, which could avoid transferring the full image 
list and dropping them then.",closed,True,2018-02-01 07:15:47,2018-02-05 02:27:57
frakti,sandromello,https://github.com/kubernetes/frakti/issues/281,https://api.github.com/repos/kubernetes/frakti/issues/281,Integration with CNI + calico v3.0 fail,"I've followed the `deploy.md` guide and installed frakti with success along with kubernetes (dns, calico, etc). Instead of running the self hosted install of calico in the `docs/networking.md` instructions, I followed the `v3.0` guide of calico: `kubectl apply -f https://docs.projectcalico.org/v3.0/getting-started/kubernetes/installation/hosted/kubeadm/1.7/calico.yaml`
The logs of frakti informs an error when updating the data store (calico etcd).

Because of this error the POD doesn't start. Above there're the logs of frakti:

```
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.129 [INFO][19037] calico.go 68: Extracted identifiers EndpointIDs=&utils.WEPIdentifiers{Namespace:""default"", WEPName:"""", WorkloadEndpointIdentifiers:names.WorkloadEndpointIdentifiers{Node:""ip-10-0-83-184"", Orchestrator:""k8s"", Endpoint:""eth0"", Workload:"""", Pod:""nginx"", ContainerID:""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173""}}
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.129 [INFO][19037] calico.go 69: Loaded CNI NetConf NetConfg=types.NetConf{CNIVersion:""0.3.0"", Name:""k8s-pod-network"", Type:""calico"", IPAM:struct { Name string; Type string ""json:\""type\""""; Subnet string ""json:\""subnet\""""; AssignIpv4 *string ""json:\""assign_ipv4\""""; AssignIpv6 *string ""json:\""assign_ipv6\""""; IPv4Pools []string ""json:\""ipv4_pools,omitempty\""""; IPv6Pools []string ""json:\""ipv6_pools,omitempty\"""" }{Name:"""", Type:""calico-ipam"", Subnet:"""", AssignIpv4:(*string)(nil), AssignIpv6:(*string)(nil), IPv4Pools:[]string(nil), IPv6Pools:[]string(nil)}, MTU:1500, Hostname:"""", Nodename:"""", DatastoreType:"""", EtcdAuthority:"""", EtcdEndpoints:""http://10.96.232.136:6666"", LogLevel:""info"", Policy:types.Policy{PolicyType:""k8s"", K8sAPIRoot:""https://10.96.0.1:443"", K8sAuthToken:""eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJjYWxpY28tY25pLXBsdWdpbi10b2tlbi1zdDd3cyIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJjYWxpY28tY25pLXBsdWdpbiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjAxNmUyOGMwLTA4MjQtMTFlOC1iM2M0LTBlYTU3MzFmMmY1ZSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpjYWxpY28tY25pLXBsdWdpbiJ9.AC5lyPL1v-y6_XHBQyAdMr4OOJGDCEWuxfA4NhO_GvbqbwVpYC5ekj8meYIsh1bjEgSdVOU5fN8AQYpGA1qR8JCMPhifKUbIzvlcJVNoBbscDEpvsXjKEhv-Aev_LQ1yrCClczSXg77xwhwXcz5vaQx_gQd5u-BIYtp2V0ZqT3aQJL1WOMF-VZdbOuGST1hMOWsj6uGnSw2gZJmmbRYvS3idfTsKNgUNVm5XB2yfDxmQE7DCHWcXf-KMW8cJ7n6pHocu22IBwngj3aNUfRqcVbsvmryTxOB5tuiir6HmDu8S7KVQlL_DdxMCF9CumNPMkB28Kur0vqDLKyFfmCGSOw"", K8sClientCertificate:"""", K8sClientKey:"""", K8sCertificateAuthority:""""}, Kubernetes:types.Kubernetes{K8sAPIRoot:"""", Kubeconfig:""/etc/cni/net.d/calico-kubeconfig"", NodeName:""""}, Args:types.Args{Mesos:types.Mesos{NetworkInfo:types.NetworkInfo{Name:"""", Labels:struct { Labels []struct { Key string ""json:\""key\""""; Value string ""json:\""value\"""" } ""json:\""la
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: bels,omitempty\"""" }{Labels:[]struct { Key string ""json:\""key\""""; Value string ""json:\""value\"""" }(nil)}}}}, EtcdScheme:"""", EtcdKeyFile:"""", EtcdCertFile:"""", EtcdCaCertFile:""""}
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.129 [INFO][19037] utils.go 327: Configured environment: [CNI_COMMAND=ADD CNI_CONTAINERID=k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173 CNI_NETNS=/var/run/netns/cni-76bf6400-2f69-64ad-77b1-8cd337b88a4b CNI_ARGS=IgnoreUnknown=1;IgnoreUnknown=1;K8S_POD_NAME=nginx;K8S_POD_NAMESPACE=default;K8S_POD_INFRA_CONTAINER_ID=k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173 CNI_IFNAME=eth0 CNI_PATH=/opt/cni/bin:/opt/calico/bin PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin ETCD_ENDPOINTS=http://10.96.232.136:6666 KUBECONFIG=/etc/cni/net.d/calico-kubeconfig K8S_API_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJjYWxpY28tY25pLXBsdWdpbi10b2tlbi1zdDd3cyIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJjYWxpY28tY25pLXBsdWdpbiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjAxNmUyOGMwLTA4MjQtMTFlOC1iM2M0LTBlYTU3MzFmMmY1ZSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpjYWxpY28tY25pLXBsdWdpbiJ9.AC5lyPL1v-y6_XHBQyAdMr4OOJGDCEWuxfA4NhO_GvbqbwVpYC5ekj8meYIsh1bjEgSdVOU5fN8AQYpGA1qR8JCMPhifKUbIzvlcJVNoBbscDEpvsXjKEhv-Aev_LQ1yrCClczSXg77xwhwXcz5vaQx_gQd5u-BIYtp2V0ZqT3aQJL1WOMF-VZdbOuGST1hMOWsj6uGnSw2gZJmmbRYvS3idfTsKNgUNVm5XB2yfDxmQE7DCHWcXf-KMW8cJ7n6pHocu22IBwngj3aNUfRqcVbsvmryTxOB5tuiir6HmDu8S7KVQlL_DdxMCF9CumNPMkB28Kur0vqDLKyFfmCGSOw]
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.131 [INFO][19037] k8s.go 59: Extracted identifiers for CmdAddK8s ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Namespace=""default"" Pod=""nginx"" WorkloadEndpoint=""ip--10--0--83--184-k8s-nginx-eth0""
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.182 [INFO][19037] k8s.go 648: pod info &Pod{ObjectMeta:k8s_io_apimachinery_pkg_apis_meta_v1.ObjectMeta{Name:nginx,GenerateName:,Namespace:default,SelfLink:/api/v1/namespaces/default/pods/nginx,UID:6430a93d-0824-11e8-b3c4-0ea5731f2f5e,ResourceVersion:757,Generation:0,CreationTimestamp:2018-02-02 14:21:42 +0000 UTC,DeletionTimestamp:<nil>,DeletionGracePeriodSeconds:nil,Labels:map[string]string{},Annotations:map[string]string{},OwnerReferences:[],Finalizers:[],ClusterName:,Initializers:nil,},Spec:PodSpec{Volumes:[{default-token-sfnpc {nil nil nil nil nil SecretVolumeSource{SecretName:default-token-sfnpc,Items:[],DefaultMode:*420,Optional:nil,} nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil nil}}],Containers:[{nginx nginx:1.7.9 [] []  [{ 0 80 TCP }] [] [] {map[] map[]} [{default-token-sfnpc true /var/run/secrets/kubernetes.io/serviceaccount  <nil>}] nil nil nil /dev/termination-log File IfNotPresent nil false false false}],RestartPolicy:Always,TerminationGracePeriodSeconds:*30,ActiveDeadlineSeconds:nil,DNSPolicy:ClusterFirst,NodeSelector:map[string]string{},ServiceAccountName:default,DeprecatedServiceAccount:default,NodeName:ip-10-0-83-184,HostNetwork:false,HostPID:false,HostIPC:false,SecurityContext:&PodSecurityContext{SELinuxOptions:nil,RunAsUser:nil,RunAsNonRoot:nil,SupplementalGroups:[],FSGroup:nil,},ImagePullSecrets:[],Hostname:,Subdomain:,Affinity:nil,SchedulerName:default-scheduler,InitContainers:[],AutomountServiceAccountToken:nil,Tolerations:[{node.kubernetes.io/not-ready Exists  NoExecute 0xc4203df360} {node.kubernetes.io/unreachable Exists  NoExecute 0xc4203df380}],HostAliases:[],PriorityClassName:,Priority:nil,},Status:PodStatus{Phase:Pending,Conditions:[{Initialized True 0001-01-01 00:00:00 +0000 UTC 2018-02-02 14:21:42 +0000 UTC  } {Ready False 0001-01-01 00:00:00 +0000 UTC 2018-02-02 14:21:42 +0000 UTC ContainersNotReady containers with unready status: [nginx]} {PodScheduled True 0001-01-01 00:00:00 +0000 UTC 2018-02-02 14:21:42 +0000 UTC  }],Message
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: :,Reason:,HostIP:10.0.83.184,PodIP:,StartTime:2018-02-02 14:21:42 +0000 UTC,ContainerStatuses:[{nginx {ContainerStateWaiting{Reason:ContainerCreating,Message:,} nil nil} {nil nil nil} false 0 nginx:1.7.9  }],QOSClass:BestEffort,InitContainerStatuses:[],},}
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.245 [INFO][19043] utils.go 327: Configured environment: [CNI_COMMAND=ADD CNI_CONTAINERID=k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173 CNI_NETNS=/var/run/netns/cni-76bf6400-2f69-64ad-77b1-8cd337b88a4b CNI_ARGS=IgnoreUnknown=1;IgnoreUnknown=1;K8S_POD_NAME=nginx;K8S_POD_NAMESPACE=default;K8S_POD_INFRA_CONTAINER_ID=k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173 CNI_IFNAME=eth0 CNI_PATH=/opt/cni/bin:/opt/calico/bin PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin ETCD_ENDPOINTS=http://10.96.232.136:6666 KUBECONFIG=/etc/cni/net.d/calico-kubeconfig K8S_API_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJjYWxpY28tY25pLXBsdWdpbi10b2tlbi1zdDd3cyIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJjYWxpY28tY25pLXBsdWdpbiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjAxNmUyOGMwLTA4MjQtMTFlOC1iM2M0LTBlYTU3MzFmMmY1ZSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpjYWxpY28tY25pLXBsdWdpbiJ9.AC5lyPL1v-y6_XHBQyAdMr4OOJGDCEWuxfA4NhO_GvbqbwVpYC5ekj8meYIsh1bjEgSdVOU5fN8AQYpGA1qR8JCMPhifKUbIzvlcJVNoBbscDEpvsXjKEhv-Aev_LQ1yrCClczSXg77xwhwXcz5vaQx_gQd5u-BIYtp2V0ZqT3aQJL1WOMF-VZdbOuGST1hMOWsj6uGnSw2gZJmmbRYvS3idfTsKNgUNVm5XB2yfDxmQE7DCHWcXf-KMW8cJ7n6pHocu22IBwngj3aNUfRqcVbsvmryTxOB5tuiir6HmDu8S7KVQlL_DdxMCF9CumNPMkB28Kur0vqDLKyFfmCGSOw]
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: Calico CNI IPAM request count IPv4=1 IPv6=0
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: Calico CNI IPAM handle=k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.246 [INFO][19043] calico-ipam.go 186: Auto assigning IP ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" HandleID=""k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Workload=""ip--10--0--83--184-k8s-nginx-eth0"" assignArgs=ipam.AutoAssignArgs{Num4:1, Num6:0, HandleID:(*string)(0xc420188130), Attrs:map[string]string(nil), Hostname:""ip-10-0-83-184"", IPv4Pools:[]net.IPNet{}, IPv6Pools:[]net.IPNet{}}
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.246 [INFO][19043] ipam.go 66: Auto-assign 1 ipv4, 0 ipv6 addrs for host 'ip-10-0-83-184'
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.247 [INFO][19043] ipam_block.go 344: New allocation attribute: {AttrPrimary:0xc420188130 AttrSecondary:map[]}
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.248 [INFO][19043] ipam.go 752: Creating new handle: k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.252 [INFO][19043] ipam.go 223: Auto-assigned 1 out of 1 IPv4s: [192.168.142.195]
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: Calico CNI IPAM assigned addresses IPv4=[192.168.142.195] IPv6=[]
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.252 [INFO][19043] calico-ipam.go 214: IPAM Result ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" HandleID=""k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Workload=""ip--10--0--83--184-k8s-nginx-eth0"" result.IPs=[]*current.IPConfig{(*current.IPConfig)(0xc4203fc180)}
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.254 [INFO][19037] k8s.go 268: Populated endpoint ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Namespace=""default"" Pod=""nginx"" WorkloadEndpoint=""ip--10--0--83--184-k8s-nginx-eth0"" endpoint=&v3.WorkloadEndpoint{TypeMeta:v1.TypeMeta{Kind:""WorkloadEndpoint"", APIVersion:""projectcalico.org/v3""}, ObjectMeta:v1.ObjectMeta{Name:""ip--10--0--83--184-k8s-nginx-eth0"", GenerateName:"""", Namespace:""default"", SelfLink:"""", UID:"""", ResourceVersion:"""", Generation:0, CreationTimestamp:v1.Time{Time:time.Time{wall:0x0, ext:0, loc:(*time.Location)(nil)}}, DeletionTimestamp:(*v1.Time)(nil), DeletionGracePeriodSeconds:(*int64)(nil), Labels:map[string]string{""projectcalico.org/namespace"":""default"", ""projectcalico.org/orchestrator"":""k8s""}, Annotations:map[string]string(nil), OwnerReferences:[]v1.OwnerReference(nil), Initializers:(*v1.Initializers)(nil), Finalizers:[]string(nil), ClusterName:""""}, Spec:v3.WorkloadEndpointSpec{Orchestrator:""k8s"", Workload:"""", Node:""ip-10-0-83-184"", ContainerID:"""", Pod:""nginx"", Endpoint:""eth0"", IPNetworks:[]string{""192.168.142.195/32""}, IPNATs:[]v3.IPNAT(nil), IPv4Gateway:"""", IPv6Gateway:"""", Profiles:[]string{""kns.default""}, InterfaceName:"""", MAC:"""", Ports:[]v3.EndpointPort(nil)}}
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: Calico CNI using IPs: [192.168.142.195/32]
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.254 [INFO][19037] network.go 31: Setting the host side veth name to calic440f455693 ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Namespace=""default"" Pod=""nginx"" WorkloadEndpoint=""ip--10--0--83--184-k8s-nginx-eth0""
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.263 [INFO][19037] k8s.go 303: Added Mac, interface name, and active container ID to endpoint ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Namespace=""default"" Pod=""nginx"" WorkloadEndpoint=""ip--10--0--83--184-k8s-nginx-eth0"" endpoint=&v3.WorkloadEndpoint{TypeMeta:v1.TypeMeta{Kind:""WorkloadEndpoint"", APIVersion:""projectcalico.org/v3""}, ObjectMeta:v1.ObjectMeta{Name:""ip--10--0--83--184-k8s-nginx-eth0"", GenerateName:"""", Namespace:""default"", SelfLink:"""", UID:"""", ResourceVersion:"""", Generation:0, CreationTimestamp:v1.Time{Time:time.Time{wall:0x0, ext:0, loc:(*time.Location)(nil)}}, DeletionTimestamp:(*v1.Time)(nil), DeletionGracePeriodSeconds:(*int64)(nil), Labels:map[string]string{""projectcalico.org/namespace"":""default"", ""projectcalico.org/orchestrator"":""k8s""}, Annotations:map[string]string(nil), OwnerReferences:[]v1.OwnerReference(nil), Initializers:(*v1.Initializers)(nil), Finalizers:[]string(nil), ClusterName:""""}, Spec:v3.WorkloadEndpointSpec{Orchestrator:""k8s"", Workload:"""", Node:""ip-10-0-83-184"", ContainerID:""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"", Pod:""nginx"", Endpoint:""eth0"", IPNetworks:[]string{""192.168.142.195/32""}, IPNATs:[]v3.IPNAT(nil), IPv4Gateway:"""", IPv6Gateway:"""", Profiles:[]string{""kns.default""}, InterfaceName:""calic440f455693"", MAC:""e2:ed:d6:21:06:6d"", Ports:[]v3.EndpointPort(nil)}}
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.264 [ERROR][19037] k8s.go 307: Error creating/updating endpoint in datastore. ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Namespace=""default"" Pod=""nginx"" WorkloadEndpoint=""ip--10--0--83--184-k8s-nginx-eth0"" error=error with field containerID = 'k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173'
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.264 [INFO][19037] k8s.go 281: Releasing IPAM allocation after failure ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" IPs=[]string{""192.168.142.195/32""} Namespace=""default"" Pod=""nginx"" WorkloadEndpoint=""ip--10--0--83--184-k8s-nginx-eth0""
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.264 [INFO][19037] utils.go 346: Cleaning up IP allocations for failed ADD ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" IPs=[]string{""192.168.142.195/32""} Namespace=""default"" Pod=""nginx"" WorkloadEndpoint=""ip--10--0--83--184-k8s-nginx-eth0""
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.328 [INFO][19050] utils.go 327: Configured environment: [CNI_COMMAND=DEL CNI_CONTAINERID=k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173 CNI_NETNS=/var/run/netns/cni-76bf6400-2f69-64ad-77b1-8cd337b88a4b CNI_ARGS=IgnoreUnknown=1;IgnoreUnknown=1;K8S_POD_NAME=nginx;K8S_POD_NAMESPACE=default;K8S_POD_INFRA_CONTAINER_ID=k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173 CNI_IFNAME=eth0 CNI_PATH=/opt/cni/bin:/opt/calico/bin PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin ETCD_ENDPOINTS=http://10.96.232.136:6666 KUBECONFIG=/etc/cni/net.d/calico-kubeconfig K8S_API_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJjYWxpY28tY25pLXBsdWdpbi10b2tlbi1zdDd3cyIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJjYWxpY28tY25pLXBsdWdpbiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjAxNmUyOGMwLTA4MjQtMTFlOC1iM2M0LTBlYTU3MzFmMmY1ZSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpjYWxpY28tY25pLXBsdWdpbiJ9.AC5lyPL1v-y6_XHBQyAdMr4OOJGDCEWuxfA4NhO_GvbqbwVpYC5ekj8meYIsh1bjEgSdVOU5fN8AQYpGA1qR8JCMPhifKUbIzvlcJVNoBbscDEpvsXjKEhv-Aev_LQ1yrCClczSXg77xwhwXcz5vaQx_gQd5u-BIYtp2V0ZqT3aQJL1WOMF-VZdbOuGST1hMOWsj6uGnSw2gZJmmbRYvS3idfTsKNgUNVm5XB2yfDxmQE7DCHWcXf-KMW8cJ7n6pHocu22IBwngj3aNUfRqcVbsvmryTxOB5tuiir6HmDu8S7KVQlL_DdxMCF9CumNPMkB28Kur0vqDLKyFfmCGSOw]
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.329 [INFO][19050] calico-ipam.go 258: Releasing address using handleID ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" HandleID=""k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Workload=""ip--10--0--83--184-k8s-nginx-eth0""
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.329 [INFO][19050] ipam.go 676: Releasing all IPs with handle 'k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173'
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.332 [INFO][19050] ipam.go 813: Decremented handle 'k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173' by 1
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.332 [INFO][19050] calico-ipam.go 267: Released address using handleID ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" HandleID=""k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Workload=""ip--10--0--83--184-k8s-nginx-eth0""
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.332 [INFO][19050] calico-ipam.go 276: Releasing address using workloadID ContainerID=""k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" HandleID=""k8s-pod-network.k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173"" Workload=""ip--10--0--83--184-k8s-nginx-eth0""
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: 2018-02-02 14:21:43.332 [INFO][19050] ipam.go 676: Releasing all IPs with handle 'default.nginx'
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: E0202 14:21:43.334799   16160 ocicni.go:197] Pod: k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173, Netns: /var/run/netns/cni-76bf6400-2f69-64ad-77b1-8cd337b88a4b, Error adding network: error with field containerID = 'k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: E0202 14:21:43.334828   16160 ocicni.go:170] Error while adding to cni network: error with field containerID = 'k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173'
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: E0202 14:21:43.334895   16160 sandbox.go:87] Setup network for sandbox ""&PodSandboxConfig{Metadata:&PodSandboxMetadata{Name:nginx,Uid:6430a93d-0824-11e8-b3c4-0ea5731f2f5e,Namespace:default,Attempt:0,},Hostname:nginx,LogDirectory:/var/log/pods/6430a93d-0824-11e8-b3c4-0ea5731f2f5e,DnsConfig:&DNSConfig{Servers:[10.96.0.10],Searches:[default.svc.cluster.local svc.cluster.local cluster.local ec2.internal],Options:[ndots:5],},PortMappings:[&PortMapping{Protocol:TCP,ContainerPort:80,HostPort:0,HostIp:,}],Labels:map[string]string{NETNS: /var/run/netns/cni-76bf6400-2f69-64ad-77b1-8cd337b88a4b,io.kubernetes.frakti.annotations: {\""kubernetes.io/config.seen\"":\""2018-02-02T14:21:42.763310438Z\"",\""kubernetes.io/config.source\"":\""api\""},io.kubernetes.pod.name: nginx,io.kubernetes.pod.namespace: default,io.kubernetes.pod.uid: 6430a93d-0824-11e8-b3c4-0ea5731f2f5e,},Annotations:map[string]string{kubernetes.io/config.seen: 2018-02-02T14:21:42.763310438Z,kubernetes.io/config.source: api,},Linux:&LinuxPodSandboxConfig{CgroupParent:/kubepods/besteffort/pod6430a93d-0824-11e8-b3c4-0ea5731f2f5e,SecurityContext:&LinuxSandboxSecurityContext{NamespaceOptions:&NamespaceOption{HostNetwork:false,HostPid:false,HostIpc:false,},SelinuxOptions:nil,RunAsUser:nil,ReadonlyRootfs:false,SupplementalGroups:[],Privileged:false,SeccompProfilePath:,},Sysctls:map[string]string{},},}"" by cni plugin failed: error with field containerID = 'k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173'
Feb 02 14:21:43 ip-10-0-83-184 frakti[16160]: E0202 14:21:43.347186   16160 manager.go:214] RunPodSandbox from hyper runtime service failed: error with field containerID = 'k8s_POD.0_nginx_default_6430a93d-0824-11e8-b3c4-0ea5731f2f5e_04273173'
```

> **Note:** When testing with `v2.4` the problem doesn't happen.

I've tracked down the source of error and found the error comes from this line:
https://github.com/projectcalico/cni-plugin/blob/fc96bde550232f5fddb13109b844e63ae8c0377e/k8s/k8s.go#L306

I've tested with a Ubuntu 16.04 LTS machine on AWS.",closed,False,2018-02-03 15:36:38,2018-11-02 04:33:40
frakti,cjhomour,https://github.com/kubernetes/frakti/pull/282,https://api.github.com/repos/kubernetes/frakti/issues/282,fix typo in README.md,,closed,True,2018-02-05 03:38:18,2018-02-05 04:20:34
frakti,hangyan,https://github.com/kubernetes/frakti/pull/283,https://api.github.com/repos/kubernetes/frakti/issues/283,Fix variable name typo,,closed,True,2018-02-05 04:37:30,2018-02-12 05:54:30
frakti,tunblr,https://github.com/kubernetes/frakti/pull/284,https://api.github.com/repos/kubernetes/frakti/issues/284,Fix typo: faild -> failed,,closed,True,2018-02-05 09:51:57,2018-02-24 03:54:48
frakti,tunblr,https://github.com/kubernetes/frakti/pull/285,https://api.github.com/repos/kubernetes/frakti/issues/285,fix typos in comments,,closed,True,2018-02-06 07:54:25,2018-02-12 05:56:02
frakti,resouer,https://github.com/kubernetes/frakti/issues/286,https://api.github.com/repos/kubernetes/frakti/issues/286,[Image] public image with digest should be pulled and removed [Conformance] [It],"```
723256bc4448680e
DEBU[0218] Trying to pull busybox from https://registry-1.docker.io v2 
DEBU[0218] Pulling ref from V2 registry: busybox@sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e 
DEBU[0218] pulling blob ""sha256:4b0bc1c4050b03c95ef2a8e36e25feac42fd31283e8c30b3ee5df6b043155d3c"" 
DEBU[0219] Downloaded 4b0bc1c4050b to tempfile /var/lib/hyper/tmp/GetImageBlob791312495 
DEBU[0219] Start untar layer                            
DEBU[0219] Untar time: 0.14998958s                      
DEBU[0219] Applied tar sha256:38ac8d0f5bb30c8b742ad97a328b77870afaec92b33faf7e121161bc78a3fec8 to f60e98aac1cc8fefc59a43ffd020a0749d90a6716f1017b3b03ca355604717dc, size: 1109996 
I0206 06:41:38.899214   25831 server.go:406] got image: busybox@sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e
I0206 06:41:38.899885   25831 images.go:16] ImageList with request filter:""busybox@sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e"" 
E0206 06:41:38.900863    1363 images.go:74] Get image info for ""busybox@sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e"" failed: image ""busybox"" with tag ""sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e"" not found
I0206 06:41:38.940769    1363 kube_docker_client.go:348] Stop pulling image ""busybox@sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e"": ""Status: Downloaded newer image for busybox@sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e""
E0206 06:41:38.942137    1363 manager.go:617] PullImage from hyper image service failed: image ""busybox"" with tag ""sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e"" not found
E0206 06:41:38.942438    2328 remote_image.go:108] PullImage ""busybox@sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e"" from image service failed: rpc error: code = Unknown desc = PullImage from hyper image service failed: image ""busybox"" with tag ""sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e"" not found
Feb  6 06:41:38.942: INFO: Unexpected error occurred: rpc error: code = Unknown desc = PullImage from hyper image service failed: image ""busybox"" with tag ""sha256:817a12c32a39bbe394944ba49de563e085f1d3c5266eb8e9723256bc4448680e"" not found
[AfterEach] [k8s.io] Image Manager
```",closed,False,2018-02-06 08:10:01,2018-02-12 06:00:08
frakti,resouer,https://github.com/kubernetes/frakti/issues/287,https://api.github.com/repos/kubernetes/frakti/issues/287,Upgrade vendored dockershim to v1.9.2 release,"Should verify:

1. CNI networking is fine
2. Container lifecycle works fine
3. Flexvolume (GCE pd) works fine",closed,False,2018-02-08 01:33:06,2018-03-14 17:12:47
frakti,resouer,https://github.com/kubernetes/frakti/issues/288,https://api.github.com/repos/kubernetes/frakti/issues/288,Implement ImageStats API,"For now, `ImageStats` is not implemented. Should fix it.

Caller in kubelet:

https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/kuberuntime/kuberuntime_image.go#L133",closed,False,2018-02-08 01:35:49,2019-01-03 11:57:30
frakti,gnawux,https://github.com/kubernetes/frakti/issues/289,https://api.github.com/repos/kubernetes/frakti/issues/289,hyperd api field update,"just merged hyperhq/hyperd#699, which added `mtu`  field in the network interface description, and removed deprecated `tap` field. 

please update the proto when upgrading to next version of hyperd.",closed,False,2018-02-08 10:00:01,2018-02-12 05:59:51
frakti,bergwolf,https://github.com/kubernetes/frakti/pull/290,https://api.github.com/repos/kubernetes/frakti/issues/290,Share flexvolume option file json format,"Share volume options json format between cinder and gcepd
flex volumes so that we use the json file contents rather
than hostpath to identify different flex volume types.",closed,True,2018-02-08 12:25:32,2018-02-12 05:59:06
frakti,resouer,https://github.com/kubernetes/frakti/pull/291,https://api.github.com/repos/kubernetes/frakti/issues/291,Fix cri-tools inconsistency,"Let's fix CI by a temporary workaround.

Ref #289 
Ref #286 ",closed,True,2018-02-09 05:27:55,2018-02-12 00:14:01
frakti,yank1,https://github.com/kubernetes/frakti/pull/292,https://api.github.com/repos/kubernetes/frakti/issues/292,fix a typo in alternativeruntime,fix a typo in alternativeruntime,closed,True,2018-02-09 07:05:35,2018-02-12 05:55:48
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/293,https://api.github.com/repos/kubernetes/frakti/issues/293,Fix: fix pkg/manager golint warnings,"1.Describe what this PR did
fix pkg/manager golint warnings

2.Does this pull request fix one issue?
fixes part of #233 

3.Describe how you did it
refine codes

4.Describe how to verify it
âžœ  frakti git:(golint) golint pkg/manager/*    
âžœ  frakti git:(golint) 

5.Special notes for reviews
NONE",closed,True,2018-02-09 07:15:12,2018-02-24 06:05:28
frakti,huanwei,https://github.com/kubernetes/frakti/pull/294,https://api.github.com/repos/kubernetes/frakti/issues/294,Fix comments on Spec Duration.,Fix comments on Spec Duration.,closed,True,2018-02-09 09:46:34,2018-02-24 02:03:11
frakti,bergwolf,https://github.com/kubernetes/frakti/pull/295,https://api.github.com/repos/kubernetes/frakti/issues/295,hyper: filter images with image name,"The hyper ImageList API does not support filter format
<name@tag>. Just filter with image name.

Fixes #286 ",closed,True,2018-02-11 09:41:47,2018-02-12 00:14:51
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/296,https://api.github.com/repos/kubernetes/frakti/issues/296,Dockershim,"## 1.Describe what this PR did
Upgrade vendored dockershim to v1.9.2

## 2.Does this pull request fix one issue?
#287 

## 3.Describe how you did it
update vendored dockershim to v1.9.2

## 4.Describe how to verify it
### **cri-tool(v0.2):** 
[root@frakti1 critest]# ./critest -r=/var/run/frakti.sock --focus=""Conformance"" --skip=""port mapping"" validation

Summarizing 2 Failures:

[Fail] [k8s.io] Image Manager [It] public image with digest should be pulled and removed [Conformance] 
/root/go/src/github.com/kubernetes-incubator/cri-tools/pkg/framework/util.go:237

[Fail] [k8s.io] Container runtime should support adding volume and device [Conformance] [It] runtime should support starting container with volume when host path doesn't exist 
/root/go/src/github.com/kubernetes-incubator/cri-tools/pkg/framework/util.go:202

Ran 22 of 54 Specs in 157.961 seconds
FAIL! -- 20 Passed | 2 Failed | 0 Pending | 32 Skipped --- FAIL: TestE2ECRI (157.97s)
FAIL

### **Kubernetes**:
**runtime-docker:**
[root@frakti1 ~]# cat frakti-docker.yaml 
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frakti-docker
  namespace: default
  labels:
    frakti: frakti
spec:
  selector:
    matchLabels:
      frakti: frakti
  template:
    metadata:
      _annotations:
        runtime.frakti.alpha.kubernetes.io/OSContainer: ""true""_
      labels:
        frakti: frakti
    spec:
      containers:
      - name: frakti
        image: gcr.io/google_containers/nginx

[root@frakti1 ~]# kubectl create -f frakti-docker.yaml 
deployment ""frakti-docker"" created

[root@frakti1 ~]# kubectl get pod
NAME                           READY     STATUS    RESTARTS   AGE
frakti-docker-94c545b5-rv84f   1/1       Running   0          1m

[root@frakti1 ~]# docker ps | grep frakti-docker
335a696018bf        gcr.io/google_containers/nginx@sha256:f49a843c290594dcf4d193535d1f4ba8af7d56cea2cf79d1e9554f077f1e7aaa   ""nginx""                  About a minute ago   Up About a minute                       k8s_frakti_frakti-docker-9
4c545b5-rv84f_default_94d0c77d-0f20-11e8-8c0c-42010a8c0002_0
8a9f37809d32        gcr.io/google_containers/pause-amd64:3.0                                                                 ""/pause""                 About a minute ago   Up About a minute                       k8s_POD_frakti-docker-94c5
45b5-rv84f_default_94d0c77d-0f20-11e8-8c0c-42010a8c0002_0

**runtime-hyperd:**
[root@frakti1 ~]# cat frakti-hyperd.yaml 
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fraktihy
  namespace: default
  labels:
    frakti: fraktihy
spec:
  selector:
    matchLabels:
      frakti: fraktihy
  template:
    metadata:
      labels:
        frakti: fraktihy
    spec:
      containers:
      - name: frakti
        image: gcr.io/google_containers/nginx

[root@frakti1 ~]# kubectl create -f frakti-hyperd.yaml 
deployment ""fraktihy"" created

[root@frakti1 ~]# kubectl get pod
NAME                           READY     STATUS    RESTARTS   AGE
frakti-docker-94c545b5-rv84f   1/1       Running   0          2m
fraktihy-78fd8b8878-lctlf      1/1       Running   0          16s

[root@frakti1 ~]# hyperctl list
POD ID                                                                                      POD Name                                                                                    VM name             Status
k8s_POD.0_fraktihy-78fd8b8878-lctlf_default_e8250c60-0f20-11e8-8c0c-42010a8c0002_40cf8a97   k8s_POD.0_fraktihy-78fd8b8878-lctlf_default_e8250c60-0f20-11e8-8c0c-42010a8c0002_40cf8a97   vm-mHBhInMCIK       running

## 5.Special notes for reviews
NONE",closed,True,2018-02-11 11:48:04,2018-03-02 08:33:50
frakti,liyanyanli,https://github.com/kubernetes/frakti/issues/297,https://api.github.com/repos/kubernetes/frakti/issues/297,Upgrade cri to v1alpha2,"**cri-tool version: master branch**
`[root@frakti1 crictl]# ./crictl ps
DEBU[0000] ListContainerRequest: &ListContainersRequest{Filter:&ContainerFilter{Id:,State:&ContainerStateValue{State:CONTAINER_RUNNING,},PodSandboxId:,LabelSelector:map[string]string{},},} 
DEBU[0000] ListContainerResponse: nil                   
FATA[0000] listing containers failed: rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.RuntimeService `

I think, it is necessary to upgrade v1alpha1 to v1alpha2ï¼

",closed,False,2018-02-11 12:01:19,2018-02-11 19:46:48
frakti,resouer,https://github.com/kubernetes/frakti/issues/298,https://api.github.com/repos/kubernetes/frakti/issues/298,finished with errors: map[addInterface:allocate device failed],"```

[91m[1mÃ¢â‚¬Â¢ Failure [4.928 seconds][0m
[k8s.io] Streaming
[90m/home/travis/gopath/src/github.com/kubernetes-incubator/cri-tools/pkg/framework/framework.go:72[0m
  runtime should support streaming interfaces
  [90m/home/travis/gopath/src/github.com/kubernetes-incubator/cri-tools/pkg/validate/streaming.go:55[0m
    [91m[1mruntime should support exec [Conformance] [It][0m
    [90m/home/travis/gopath/src/github.com/kubernetes-incubator/cri-tools/pkg/validate/streaming.go:66[0m

    [91mfailed to create PodSandbox: rpc error: code = Unknown desc = finished with errors: map[addInterface:allocate device failed]
    Expected error:
        <*status.statusError | 0xc420307e30>: {
            Code: 2,
            Message: ""finished with errors: map[addInterface:allocate device failed]"",
            Details: nil,
        }
        rpc error: code = Unknown desc = finished with errors: map[addInterface:allocate device failed]
    not to have occurred[0m

    /home/travis/gopath/src/github.com/kubernetes-incubator/cri-tools/pkg/framework/util.go:147
[90m------------------------------[0m
[0m[k8s.io] Image Manager[0m 
  [1mpublic image with tag should be pulled and removed [Conformance][0m
  [37m/home/travis/gopath/src/github.com/kubernetes-incubator/cri-tools/pkg/validate/image.go:50[0m
[BeforeEach] [k8s.io] Image Manager
  /home/travis/gopath/src/github.com/kubernetes-incubator/cri-tools/pkg/framework/framework.go:50
[BeforeEach] [k8s.io] Image Manager
  /home/travis/gopath/src/github.com/kubernetes-incubator/cri-tools/pkg/validate/image.go:46
[It] public image with tag should be pulled and removed [Conformance]
  /home/travis/gopath/src/github.com/kubernetes-incubator/cri-tools/pkg/validate/image.go:50
[1mSTEP[0m: Pull image : busybox:1.26.2
I0212 02:40:27.151017     772 manager.go:584] PullImage with request &PullImageRequest{Image:&ImageSpec{Image:busybox:1.26.2,},Auth:nil,SandboxConfig:nil,}
I0212 02:40:27.151292   25279 images.go:44] ImagePull with request image:""busybox"" tag:""1.26.2"" auth:<> 
I0212 02:40:27.151352   25279 server.go:388] getting image: busybox:1.26.2
```

There should still be some mismatch of API.",closed,False,2018-02-12 03:05:44,2018-02-23 05:16:46
frakti,hangyan,https://github.com/kubernetes/frakti/pull/299,https://api.github.com/repos/kubernetes/frakti/issues/299,Fix various var name typo,,closed,True,2018-02-12 08:10:14,2018-02-24 06:05:18
frakti,hangyan,https://github.com/kubernetes/frakti/pull/300,https://api.github.com/repos/kubernetes/frakti/issues/300,Fix function name typo,,closed,True,2018-02-12 08:15:39,2018-02-24 03:55:07
frakti,hangyan,https://github.com/kubernetes/frakti/pull/301,https://api.github.com/repos/kubernetes/frakti/issues/301,Refactor image name standardize actions to a function,,closed,True,2018-02-13 04:33:01,2018-02-24 05:28:47
frakti,bergwolf,https://github.com/kubernetes/frakti/pull/302,https://api.github.com/repos/kubernetes/frakti/issues/302,hyper: supply interface MTU,"It is actually a required field now.

Fixes: #298 ",closed,True,2018-02-23 01:02:35,2018-02-23 05:16:46
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/303,https://api.github.com/repos/kubernetes/frakti/issues/303,upgrade kubernetes like dockershim,"## 1.Describe what this PR did
Upgrade vendored Kubernetes  v1.9.0-alpha.3 to v1.9.2
We've already upgraded dockershim to 1.9.2 and I think Kubernetes is also necessary to upgrade to 1.9.2.(1.9.2 is more stable)

## 2.Does this pull request fix one issue?
Derivation of #287 

## 3.Describe how you did it
Upgrade vendored Kubernetes to v1.9.2

### Other vendores:
add github.com/aws/aws-sdk-go/service/elbv2/...
update k8s.io/api/...
update k8s.io/client-go/...
update k8s.io/apiserver/...            
update k8s.io/utils/...
update github.com/google/cadvisor/...
update golang.org/x/sys/unix/...

## 4.Describe how to verify it
### **cri-tool:** 
NONE

### **Kubernetes**:
**runtime-docker:**
[root@frakti1 ~]# cat frakti-docker.yaml 
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frakti-docker
  namespace: default
  labels:
    frakti: frakti
spec:
  selector:
    matchLabels:
      frakti: frakti
  template:
    metadata:
      _annotations:
        runtime.frakti.alpha.kubernetes.io/OSContainer: ""true""_
      labels:
        frakti: frakti
    spec:
      containers:
      - name: frakti
        image: gcr.io/google_containers/nginx

[root@frakti1 ~]# kubectl create -f frakti-docker.yaml 
deployment ""frakti-docker"" created

[root@frakti1 ~]# kubectl get pod
NAME                           READY     STATUS    RESTARTS   AGE
frakti-docker-94c545b5-rv84f   1/1       Running   0          1m

[root@frakti1 ~]# docker ps | grep frakti-docker
19ae3086b2ff        gcr.io/google_containers/nginx@sha256:f49a843c290594dcf4d193535d1f4ba8af7d56cea2cf79d1e9554f077f1e7aaa                           ""nginx""                  26 seconds ago       Up 25 seconds                           k8s_frakti_frakti-docker-94c545b5-8h4k6_default_33549ba2-1adf-11e8-9dc7-42010a8c0002_0
c75506fe7c9e        gcr.io/google_containers/pause-amd64:3.0                                                                                         ""/pause""                 29 seconds ago       Up 28 seconds                           k8s_POD_frakti-docker-94c545b5-8h4k6_default_33549ba2-1adf-11e8-9dc7-42010a8c0002_0

## 5.Special notes for reviews
NONE",closed,True,2018-02-26 10:25:42,2018-03-12 11:32:21
frakti,diffsz,https://github.com/kubernetes/frakti/issues/304,https://api.github.com/repos/kubernetes/frakti/issues/304,kubelet node register has failed,"we want to try the k8s+frakti+hyperd program recently, after I deploy according to wiki on the steps, start kubelet node found node has not been successfully registered, node status is always NOTREADY, check the fraktiâ€™s log found imagefsinfo wrong, see the frakti code found this func is returned nil, do not know if this is not the cause of the problem? Or do I need another configuration? Thanks

frakti logï¼š
E0306 14:40:47.577493   25964 remote_image.go:146] ImageFsInfo from image service failed: rpc error: code = Unknown desc = not implemented
E0306 14:40:47.577516   25964 kubelet.go:1234] Image garbage collection failed once. Stats initialization may not have completed yet: rpc error:
I0306 14:40:47.579173   25964 certificate_manager.go:361] Requesting new certificate.
I0306 14:40:47.579345   25964 server.go:296] Adding debug handlers to kubelet server.",closed,False,2018-03-06 06:47:21,2018-03-17 17:26:36
frakti,dixudx,https://github.com/kubernetes/frakti/pull/305,https://api.github.com/repos/kubernetes/frakti/issues/305,add a new flag pod-infra-container-image to override default sandbox image,Fixes kubernetes/kubernetes#55676,closed,True,2018-03-07 14:43:48,2018-03-19 02:34:06
frakti,bergwolf,https://github.com/kubernetes/frakti/pull/306,https://api.github.com/repos/kubernetes/frakti/issues/306,Cleanup flexvolume,,closed,True,2018-03-12 03:05:21,2018-03-13 17:28:44
frakti,yu-yang2,https://github.com/kubernetes/frakti/issues/307,https://api.github.com/repos/kubernetes/frakti/issues/307,"kubelet Failed create pod sandbox got wiretype 0, want 2","I use [https://github.com/kubernetes/frakti/blob/master/docs/deploy.md](url) this guide to deploy k8s with frakti, everything works fine except I run a deploy with `kubectl run nginx --image=nginx`
```
[root@yangyu-pc plugins]# kubectl describe po nginx-8586cf59-gvxpv 
Name:           nginx-8586cf59-gvxpv
Namespace:      default
Node:           yangyu-pc/192.168.0.100
Start Time:     Mon, 12 Mar 2018 05:13:58 -0400
Labels:         pod-template-hash=41427915
                run=nginx
Annotations:    <none>
Status:         Pending
IP:             
Controlled By:  ReplicaSet/nginx-8586cf59
Containers:
  nginx:
    Container ID:   
    Image:          nginx
    Image ID:       
    Port:           <none>
    State:          Waiting
      Reason:       ContainerCreating
    Ready:          False
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-nx6ls (ro)
Conditions:
  Type           Status
  Initialized    True 
  Ready          False 
  PodScheduled   True 
Volumes:
  default-token-nx6ls:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-nx6ls
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s
                 node.kubernetes.io/unreachable:NoExecute for 300s
Events:
  Type     Reason                  Age               From                Message
  ----     ------                  ----              ----                -------
  Normal   Scheduled               4m                default-scheduler   Successfully assigned nginx-8586cf59-gvxpv to yangyu-pc
  Normal   SuccessfulMountVolume   4m                kubelet, yangyu-pc  MountVolume.SetUp succeeded for volume ""default-token-nx6ls""
  Warning  FailedCreatePodSandBox  0s (x20 over 4m)  kubelet, yangyu-pc  Failed create pod sandbox.
```
and kubelet logs
```
Mar 12 05:15:08 yangyu-pc kubelet[4735]: E0312 05:15:08.122961    4735 kuberuntime_manager.go:647] createPodSandbox for pod ""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)"" failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2
Mar 12 05:15:08 yangyu-pc kubelet[4735]: E0312 05:15:08.122996    4735 pod_workers.go:186] Error syncing pod b271e42e-25d5-11e8-8842-74d435e40eea (""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)""), skipping: failed to ""CreatePodSandbox"" for ""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)"" with CreatePodSandboxError: ""CreatePodSandbox for pod \""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)\"" failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2""
Mar 12 05:15:18 yangyu-pc kubelet[4735]: E0312 05:15:18.131876    4735 remote_runtime.go:92] RunPodSandbox from runtime service failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2
Mar 12 05:15:18 yangyu-pc kubelet[4735]: E0312 05:15:18.131913    4735 kuberuntime_sandbox.go:54] CreatePodSandbox for pod ""kube-dns-6f4fd4bdf-5jl8n_kube-system(7aa7cb6f-25d5-11e8-8842-74d435e40eea)"" failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2
Mar 12 05:15:18 yangyu-pc kubelet[4735]: E0312 05:15:18.131921    4735 kuberuntime_manager.go:647] createPodSandbox for pod ""kube-dns-6f4fd4bdf-5jl8n_kube-system(7aa7cb6f-25d5-11e8-8842-74d435e40eea)"" failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2
Mar 12 05:15:18 yangyu-pc kubelet[4735]: E0312 05:15:18.131960    4735 pod_workers.go:186] Error syncing pod 7aa7cb6f-25d5-11e8-8842-74d435e40eea (""kube-dns-6f4fd4bdf-5jl8n_kube-system(7aa7cb6f-25d5-11e8-8842-74d435e40eea)""), skipping: failed to ""CreatePodSandbox"" for ""kube-dns-6f4fd4bdf-5jl8n_kube-system(7aa7cb6f-25d5-11e8-8842-74d435e40eea)"" with CreatePodSandboxError: ""CreatePodSandbox for pod \""kube-dns-6f4fd4bdf-5jl8n_kube-system(7aa7cb6f-25d5-11e8-8842-74d435e40eea)\"" failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2""
Mar 12 05:15:20 yangyu-pc kubelet[4735]: E0312 05:15:20.131007    4735 remote_runtime.go:92] RunPodSandbox from runtime service failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2
Mar 12 05:15:20 yangyu-pc kubelet[4735]: E0312 05:15:20.131042    4735 kuberuntime_sandbox.go:54] CreatePodSandbox for pod ""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)"" failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2
Mar 12 05:15:20 yangyu-pc kubelet[4735]: E0312 05:15:20.131053    4735 kuberuntime_manager.go:647] createPodSandbox for pod ""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)"" failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2
Mar 12 05:15:20 yangyu-pc kubelet[4735]: E0312 05:15:20.131116    4735 pod_workers.go:186] Error syncing pod b271e42e-25d5-11e8-8842-74d435e40eea (""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)""), skipping: failed to ""CreatePodSandbox"" for ""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)"" with CreatePodSandboxError: ""CreatePodSandbox for pod \""nginx-8586cf59-gvxpv_default(b271e42e-25d5-11e8-8842-74d435e40eea)\"" failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2""
```",closed,False,2018-03-12 09:19:58,2018-03-14 02:08:07
frakti,AdamDang,https://github.com/kubernetes/frakti/pull/308,https://api.github.com/repos/kubernetes/frakti/issues/308,"Typo fix ""Fannel""->""Flannel""","""Fannel""->""Flannel""",closed,True,2018-03-12 16:17:09,2018-03-12 17:24:29
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/309,https://api.github.com/repos/kubernetes/frakti/issues/309,Fix: update frakti version,"1.Describe what this PR did
update frakti version

2.Does this pull request fix one issue?
NONE

3.Describe how you did it
NONE

4.Describe how to verify it
NONE

5.Special notes for reviews
NONE",closed,True,2018-03-13 12:02:49,2018-03-16 17:34:46
frakti,yu-yang2,https://github.com/kubernetes/frakti/issues/310,https://api.github.com/repos/kubernetes/frakti/issues/310,"k8s can't exec to pod, unknown runtime: remote","k8s version: v1.6.4
frakti: v1.9.1
docker: 17.06.1
kubectl exec to a pod timeout with below errors:
```
E0313 22:13:48.792996   29004 kubelet.go:1661] Failed to check if disk space is available for the runtime: failed to get fs info for ""runtime"": ImagesFsInfo: unknown runtime: remote
I0313 22:13:58.325868   29004 eviction_manager.go:197] eviction manager: synchronize housekeeping
E0313 22:13:58.797001   29004 kubelet.go:1661] Failed to check if disk space is available for the runtime: failed to get fs info for ""runtime"": ImagesFsInfo: unknown runtime: remote
I0313 22:14:08.326076   29004 eviction_manager.go:197] eviction manager: synchronize housekeeping
E0313 22:14:08.801738   29004 kubelet.go:1661] Failed to check if disk space is available for the runtime: failed to get fs info for ""runtime"": ImagesFsInfo: unknown runtime: remote
I0313 22:14:17.976319   29004 server.go:235] Checking API server for new Kubelet configuration.
I0313 22:14:17.977987   29004 server.go:244] Did not find a configuration for this Kubelet via API server: cloud provider was nil, and attempt to use hostname to find config resulted in: configmaps ""kubelet-127.0.0.1"" not found
I0313 22:14:18.326263   29004 eviction_manager.go:197] eviction manager: synchronize housekeeping
E0313 22:14:18.805822   29004 kubelet.go:1661] Failed to check if disk space is available for the runtime: failed to get fs info for ""runtime"": ImagesFsInfo: unknown runtime: remote
I0313 22:14:28.326460   29004 eviction_manager.go:197] eviction manager: synchronize housekeeping
E0313 22:14:28.809806   29004 kubelet.go:1661] Failed to check if disk space is available for the runtime: failed to get fs info for ""runtime"": ImagesFsInfo: unknown runtime: remote
```",closed,False,2018-03-14 02:18:47,2018-03-14 03:45:32
frakti,gavinmy15,https://github.com/kubernetes/frakti/issues/311,https://api.github.com/repos/kubernetes/frakti/issues/311,Network in POD doesn't work fine,"I follow this [document](https://github.com/kubernetes/frakti/blob/master/docs/deploy.md) to establish a one-node k8s cluster with flannel network, hyperd at commit [d493b1bf1f9d21277203d18f08928fd56a3a73af](https://github.com/hyperhq/hyperd/commit/d493b1bf1f9d21277203d18f08928fd56a3a73af) (to avoid using Interface.Mtu because of other issue) and frakti 1.9.1 release.

POD can be created but there is a problem with networking.
I execute bash in the POD, and try to ping other POD's IPs then I fail.

I find a workaround that ping the POD IP from master node, the networking of that POD will recover,
but the WA is weird, do I miss some configurations?
Thanks",closed,False,2018-03-16 03:41:53,2018-09-07 01:58:03
frakti,hangyan,https://github.com/kubernetes/frakti/pull/312,https://api.github.com/repos/kubernetes/frakti/issues/312,Fix various typos,,closed,True,2018-03-16 03:57:28,2018-03-17 05:17:25
frakti,resouer,https://github.com/kubernetes/frakti/pull/313,https://api.github.com/repos/kubernetes/frakti/issues/313,Install right version of critool,Download from release directly.,closed,True,2018-03-16 04:07:32,2018-03-17 04:55:19
frakti,jonyhy96,https://github.com/kubernetes/frakti/pull/314,https://api.github.com/repos/kubernetes/frakti/issues/314,fix url error,"the git url was https://github.com/containernetworking/plugins should be https://github.com/containernetworking/plugins.git

```release-note
None
```",closed,True,2018-03-16 08:54:54,2018-03-16 17:29:14
frakti,jonyhy96,https://github.com/kubernetes/frakti/pull/315,https://api.github.com/repos/kubernetes/frakti/issues/315,Fix url,"fix frakti download link error in frakti/docs/deploy.md 
chaned https://github.com/kubernetes/frakti/releases/download/v1.9/frakti
to         https://github.com/kubernetes/frakti/releases/download/1.9/frakti

```release-note
None
```",closed,True,2018-03-16 09:08:03,2018-03-16 20:10:58
frakti,resouer,https://github.com/kubernetes/frakti/issues/316,https://api.github.com/repos/kubernetes/frakti/issues/316,Upgrade dockershim to 1.10,"Update the dockershim to 1.10

Release check: https://github.com/kubernetes/kubernetes/releases ",closed,False,2018-03-16 17:36:42,2018-08-09 22:31:39
frakti,resouer,https://github.com/kubernetes/frakti/pull/317,https://api.github.com/repos/kubernetes/frakti/issues/317,Update OWNERS file to track latest commit history,Update OWNERS file to track latest commit history,closed,True,2018-03-16 17:49:04,2018-03-16 17:49:13
frakti,resouer,https://github.com/kubernetes/frakti/pull/318,https://api.github.com/repos/kubernetes/frakti/issues/318,Update CHANGELOG.md,Update CHANGELOG.md with change from 1.9,closed,True,2018-03-16 20:18:37,2018-03-16 20:18:49
frakti,urvil38,https://github.com/kubernetes/frakti/issues/319,https://api.github.com/repos/kubernetes/frakti/issues/319,[GSoC] Give more technical inside about containerd plugin for kata-container runtime,"Hello, I am interested in plugin of containerd for kata-container runtime.I read the preliminary design doc for containerd plugin.but I am confused about architecture that showed in a doc.Correct me if I am wrong but we are trying to build a replacement for docker runtime ""runc"" with ""kata-container"" runtime for kubernetes and later for docker.Is that right?Please give me more information about following ""architecture of plugin"" which showed an image:

![image](https://user-images.githubusercontent.com/22164233/37713350-a8d22d36-2d3c-11e8-9679-01bdd77c3fed.png)

I am familiar with docker container state diagram which is: dockerd -> containerd -> runc.
Can someone Please give me some inside of how this same thing works on kata-container runtime and which security benefits they provide? ",closed,False,2018-03-21 18:12:15,2018-03-24 05:08:56
frakti,ZeroMagic,https://github.com/kubernetes/frakti/issues/320,https://api.github.com/repos/kubernetes/frakti/issues/320,"[GSoC] Some questions about ""containerd-kata""","Now, I am writing the proposal of ""containerd-kata"". There are some questions.

1. I want to know if we need to add image management in the project ""containerd-kata"".  @laijs

2. I think that in the project ""containerd-kata"", what I need to do is transfer the variables in annotations.go(https://github.com/containerd/cri/blob/master/pkg/annotations/annotations.go) to containerd so that containerd can distinguish kata sandbox from other container runtimes. Do I understand correctly? And what else do I need to do in respect of CRI. @Random-Liu ",closed,False,2018-03-22 05:09:54,2018-03-23 03:21:11
frakti,urvil38,https://github.com/kubernetes/frakti/issues/321,https://api.github.com/repos/kubernetes/frakti/issues/321,[GSoC] Which Category to choose for this GSoC project,"which category is applied for this project?There is no category regarding to **containerd**.Should I applied for **kubernetes** or **security**?

",closed,False,2018-03-24 05:33:14,2018-03-24 19:03:46
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/322,https://api.github.com/repos/kubernetes/frakti/issues/322,Fix: Upgrade vendored dockershim to v1.10.0,"**1.Describe what this PR did**

Upgrade vendored Kubernetes to 1.10.0

**_PrivilegedRuntime is still just a skeleton. If this skeleton is appropriate, I will continue..._**

**2.Does this pull request fix one issue?**

Derivation of #316 

**3.Describe how you did it**

Upgrade vendored Kubernetes to v1.10.0

**4.Describe how to verify it**
**critool:** 
    versionï¼š master branch

```
root@frakti-u-1:~/ferry# ./crictl ps
CONTAINER ID        IMAGE               CREATED             STATE               NAME                ATTEMPT
root@frakti-u-1:~/ferry# ./crictl --runtime-endpoint /var/run/frakti.sock ps
CONTAINER ID        IMAGE               CREATED             STATE               NAME                ATTEMPT

```

**5.Special notes for reviews**
None",closed,True,2018-03-29 09:40:59,2018-04-10 23:09:25
frakti,resouer,https://github.com/kubernetes/frakti/issues/323,https://api.github.com/repos/kubernetes/frakti/issues/323,Deprecate dockershim in vendor and change to use new containerd based architecture,"As the title said.

The code change will happen in this branch: https://github.com/kubernetes/frakti/tree/containerd-kata

And eventually be spitted to merge part to containerd org and others frakti master branch.",closed,False,2018-03-30 17:44:08,2018-09-30 16:48:06
frakti,AdamDang,https://github.com/kubernetes/frakti/pull/324,https://api.github.com/repos/kubernetes/frakti/issues/324,Correct the returned message,Correct the returned message.,closed,True,2018-04-17 05:50:19,2018-05-01 02:27:31
frakti,resouer,https://github.com/kubernetes/frakti/pull/325,https://api.github.com/repos/kubernetes/frakti/issues/325,Update runtime with kata in README,As the title said. We need to update the README with new arch diagram.,closed,True,2018-04-17 23:32:15,2018-04-17 23:32:23
frakti,AdamDang,https://github.com/kubernetes/frakti/pull/326,https://api.github.com/repos/kubernetes/frakti/issues/326,Update flexvolume.go,"Line 214:   ""volume directory: %v does not exists""
The word ""exists"" should be corrected to ""exist"" there.",closed,True,2018-04-22 15:30:16,2018-05-01 02:17:08
frakti,mahuihuang,https://github.com/kubernetes/frakti/pull/327,https://api.github.com/repos/kubernetes/frakti/issues/327,fix grammar msitake.,Fix grammar msitake.,closed,True,2018-04-23 01:31:14,2018-04-23 18:13:52
frakti,resouer,https://github.com/kubernetes/frakti/pull/328,https://api.github.com/repos/kubernetes/frakti/issues/328,Clean docs for v1.10.0,We need to abandon the `allinone.sh` since we have kubeadm guide now.,closed,True,2018-05-15 06:23:13,2018-05-15 06:55:11
frakti,resouer,https://github.com/kubernetes/frakti/pull/329,https://api.github.com/repos/kubernetes/frakti/issues/329,Release 1.10.0,Update master with 1.10.0 release,closed,True,2018-05-15 07:01:27,2018-05-15 07:01:36
frakti,ZeroMagic,https://github.com/kubernetes/frakti/pull/330,https://api.github.com/repos/kubernetes/frakti/issues/330,Add the basic skeleton and update travis,"- add the basic skeleton

- update Makefile

- update travis

- remove unused vendor and update vendor version

@resouer  PTAL.


Signed-off-by: ZeroMagic <anthonyliu@zju.edu.cn>",closed,True,2018-05-15 10:05:37,2018-05-23 17:49:59
frakti,jessfraz,https://github.com/kubernetes/frakti/issues/331,https://api.github.com/repos/kubernetes/frakti/issues/331,Create a SECURITY_CONTACTS file.,"As per the email sent to kubernetes-dev[1], please create a SECURITY_CONTACTS
file.

The template for the file can be found in the kubernetes-template repository[2].
A description for the file is in the steering-committee docs[3], you might need
to search that page for ""Security Contacts"".

Please feel free to ping me on the PR when you make it, otherwise I will see when
you close this issue. :)

Thanks so much, let me know if you have any questions.

(This issue was generated from a tool, apologies for any weirdness.)

[1] https://groups.google.com/forum/#!topic/kubernetes-dev/codeiIoQ6QE
[2] https://github.com/kubernetes/kubernetes-template-project/blob/master/SECURITY_CONTACTS
[3] https://github.com/kubernetes/community/blob/master/committee-steering/governance/sig-governance-template-short.md
",closed,False,2018-05-24 14:37:33,2018-05-25 16:32:46
frakti,ZeroMagic,https://github.com/kubernetes/frakti/pull/332,https://api.github.com/repos/kubernetes/frakti/issues/332,Implement some tasks,"- Implement some functions of sandbox and container

- Add the functions of process

- Implement some tasks, such as task create, task start, task state, etc.

- Update travis and add necessary vendors",closed,True,2018-06-05 12:23:20,2018-06-21 10:31:37
frakti,enzian,https://github.com/kubernetes/frakti/issues/333,https://api.github.com/repos/kubernetes/frakti/issues/333,"Hyperd: got wiretype 0, want 2","After installing according to the deployment guide, I get an error from frakti when calling hyperd:

```
E0606 17:54:29.893393    5824 manager.go:215] RunPodSandbox from hyper runtime service failed: rpc error: code = Unknown desc = proto: bad wiretype for field types.UserInterface.Gateway: got wiretype 0, want 2
```
Anybody know what I did wrong? Is this caused by a mismatch of version between frakti and hyperd?",closed,False,2018-06-06 16:01:36,2018-06-15 06:15:27
frakti,resouer,https://github.com/kubernetes/frakti/issues/334,https://api.github.com/repos/kubernetes/frakti/issues/334,Update frakti to 1.11,"As the title said :-)

cc @liyanyanli ",closed,False,2018-06-26 04:09:28,2018-09-18 05:09:30
frakti,ZeroMagic,https://github.com/kubernetes/frakti/pull/335,https://api.github.com/repos/kubernetes/frakti/issues/335,Implement five tasks,"- Process() returns a process within the task for the provided id

- Metrics() returns the stats of a container

- CloseIO() closes the provided IO on the task

- Pause() pauses the container process

- Resume() unpauses the container process",closed,True,2018-06-26 06:08:48,2018-07-02 03:32:23
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/336,https://api.github.com/repos/kubernetes/frakti/issues/336,Fix: Upgrade vendored to v1.11.0,"**1.Describe what this PR did**

Upgrade vendored Kubernetes to v1.11.0-rc.2

**2.Does this pull request fix one issue?**

Derivation of #334 

**3.Describe how you did it**

Upgrade vendored Kubernetes to v1.11.0-rc.2

**4.Describe how to verify it**
**Env:**
k8s:v1.10.5
networkPlugin: weave:2.3.0

**cri-tool:**

NONE

**Kubernetes:**

runtime-docker:

Create pod:
```
[root@newfrakti example]# kubectl create -f frakti-docker1.yaml
deployment.apps ""frakti-docker-1"" created
[root@newfrakti example]# kubectl create -f frakti-docker2.yaml
deployment.apps ""frakti-docker"" created
[root@newfrakti example]# kubectl get pod -owide
NAME                               READY     STATUS    RESTARTS   AGE       IP          NODE
frakti-docker-1-66dd486485-j4wsv   1/1       Running   0          16s       10.32.0.5   newfrakti
frakti-docker-7b5959c6f-5ngvc      1/1       Running   0          10s       10.44.0.1   newfrakti2
```
Cross host network:
```
[root@newfrakti example]# docker exec -it b436edcd1f50 bash
[ root@frakti-docker-1-66dd486485-j4wsv:/etc/nginx ]$ curl 10.44.0.1
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx on Debian!</title>
<style>
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
</style>
</head>
<body>
<h1>Welcome to nginx on Debian!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working on Debian. Further configuration is required.</p>
<p>For online documentation and support please refer to
<a href=""http://nginx.org/"">nginx.org</a></p>
<p>
      Please use the <tt>reportbug</tt> tool to report bugs in the
      nginx package with Debian. However, check <a
      href=""http://bugs.debian.org/cgi-bin/pkgreport.cgi?ordering=normal;archive=0;src=nginx;repeatmerged=0"">existi
ng
      bug reports</a> before reporting a new bug.
</p>
<p><em>Thank you for using debian and nginx.</em></p>
</body>
</html>

```
Delete deployment:
```
[root@newfrakti example]# kubectl get deployment 
NAME              DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
frakti-docker     1         1         1            1           3m
frakti-docker-1   1         1         1            1           3m
[root@newfrakti example]# kubectl delete deployment frakti-docker
deployment.extensions ""frakti-docker"" deleted
[root@newfrakti example]# kubectl delete deployment frakti-docker-1
deployment.extensions ""frakti-docker-1"" deleted
[root@newfrakti example]# kubectl get deployment
No resources found.
[root@newfrakti example]# kubectl get pod
No resources found.
```
Example yaml:
```
[root@newfrakti example]# cat frakti-docker1.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frakti-docker-1
  labels:
    frakti: frakti
spec:
  selector:
    matchLabels:
      frakti: frakti
  template:
    metadata:
      annotations:
        runtime.frakti.alpha.kubernetes.io/OSContainer: ""true""
      labels:
        frakti: frakti
    spec:
      nodeName: newfrakti
      containers:
      - name: frakti
        image: gcr.io/google_containers/nginx
        env:
          - name: TESTNAME
            valueFrom:
              fieldRef:
                fieldPath: status.hostIP
```

**5.Special notes for reviews**
None",closed,True,2018-06-26 13:36:46,2018-06-29 07:30:53
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/337,https://api.github.com/repos/kubernetes/frakti/issues/337,Fix: deploy document,"**1.Describe what this PR did**
Modify deploy.md

**2.Does this pull request fix one issue?**
None

**3.Describe how you did it**
None

**4.Describe how to verify it**
None

**5.Special notes for reviews**
None",closed,True,2018-07-02 11:15:30,2018-07-11 09:08:27
frakti,ZeroMagic,https://github.com/kubernetes/frakti/pull/338,https://api.github.com/repos/kubernetes/frakti/issues/338,Add ExecProcess related functionalities,"-  Exec() adds a process into the container

- DeleteProcess() deletes a specific exec process via its id

- change `execProcess` to `ExecProcess`",closed,True,2018-07-06 02:12:51,2018-07-12 08:16:16
frakti,ZeroMagic,https://github.com/kubernetes/frakti/pull/339,https://api.github.com/repos/kubernetes/frakti/issues/339,Implement runtime's fundamental functions,"### Sandbox

- run a new sandbox
- stop the sandbox

### Container

- create a new container
- start an existing container
- stop a running container

### Others

Here I modify unix addr which is parsed by grpc in vendor. Because containerd's grpc version is different from kata-runtime's grpc version. The version difference causes us to be unable to run the project.

",closed,True,2018-07-24 08:15:31,2018-07-28 08:18:26
frakti,bergwolf,https://github.com/kubernetes/frakti/pull/340,https://api.github.com/repos/kubernetes/frakti/issues/340,add ceph rbd flexvolume for hyper,"It invokes rbd command to format the disk and saves rbd volume
info for hyper runtime to use.

1. copy built cephrbd binary to flexvolume dir:
`cp out/cephrbd /usr/libexec/kubernetes/kubelet-plugins/volume/exec/hyper~cephrbd/cephrbd`
2. create a rbd volume:
`rbd create -p hyper --size 1G frakti-rbd-vol2`
3. create pod with a `hyper/cephrbd` flexvolume in the yaml (`pool` is optional and default to `hyepr` pool): 
```
$ cat rbd-pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-rbd-pod
  labels:
    app: nginx
spec:
  containers:
  - name: nginx
    image: nginx
    imagePullPolicy: IfNotPresent
    ports:
    - containerPort: 80
    volumeMounts:
    - name: nginx-persistent-storage
      mountPath: /var/lib/nginx
  volumes:
  - name: nginx-persistent-storage
    flexVolume:
      driver: ""hyper/cephrbd""
      fsType: ""ext4""
      options:
        pool: ""hyper""
        volumeID: ""frakti-rbd-vol1""
```

Results:
```
~/bergwolf$ sudo kubectl get pods
NAME                      READY     STATUS             RESTARTS   AGE
alpine                    0/1       Succeeded          0          1d
alpine-6fd4d479cd-5mdcl   0/1       CrashLoopBackOff   25         12h
~/bergwolf$ sudo kubectl create -f rbd-pod.yaml
pod ""nginx-rbd-pod"" created
~/bergwolf$ sudo kubectl get pods
NAME                      READY     STATUS             RESTARTS   AGE
alpine                    0/1       Succeeded          0          1d
alpine-6fd4d479cd-5mdcl   0/1       CrashLoopBackOff   26         12h
nginx-rbd-pod             1/1       Running            0          6s
~/bergwolf$ sudo kubectl exec nginx-rbd-pod df
Filesystem     1K-blocks     Used Available Use% Mounted on
share_dir       80603936 50201268  26285164  66% /
devtmpfs           58664        0     58664   0% /dev
tmpfs              60864        0     60864   0% /dev/shm
rootfs             58664    12748     45916  22% /etc/hostname
/dev/sda          999320     1288    929220   1% /var/lib/nginx
```",closed,True,2018-08-06 03:00:51,2018-08-07 06:17:31
frakti,AdamDang,https://github.com/kubernetes/frakti/pull/341,https://api.github.com/repos/kubernetes/frakti/issues/341,Fix some grammatical errors in message,"Fix some grammatical errors in message:
doesn't existed->doesn't exist",closed,True,2018-08-30 03:43:18,2018-08-30 04:11:14
frakti,mmsakura,https://github.com/kubernetes/frakti/pull/342,https://api.github.com/repos/kubernetes/frakti/issues/342,Update,"It should be ""All"" instead of ""ALl"" ... LOL",closed,True,2018-08-30 12:57:26,2018-08-30 13:21:29
frakti,spiffxp,https://github.com/kubernetes/frakti/issues/343,https://api.github.com/repos/kubernetes/frakti/issues/343,Use tide for PR merging,"This is a [core repository](https://github.com/kubernetes/community/blob/master/github-management/kubernetes-repositories.md#core-repositories).  As such, it [needs to use the same merge automation as the rest of the project](https://github.com/kubernetes/community/blob/master/github-management/kubernetes-repositories.md#rules-1)

I have a PR open that will address this at an org-wide level: https://github.com/kubernetes/test-infra/pull/9342.  It will:
- enable the approve plugin, to allow use of the `/approve` plugin
- enable the blunderbuss plugin, to assign reviews based on OWNERS files
- add all repos in the kubernetes org to tide's query

Can one of the repo maintainers here drop an LGTM (or objections) on the linked PR?  Alternatively, if I hear no objections by Monday 10am PT of next week, I will merge the PR.",closed,False,2018-09-11 22:24:24,2018-09-17 17:11:16
frakti,resouer,https://github.com/kubernetes/frakti/issues/344,https://api.github.com/repos/kubernetes/frakti/issues/344,Upgrade frakti to Kubernetes v1.12,"The Kubernetes v1.12 release is on-the-fly.

@liyanyanli Would you be able to help?
",closed,False,2018-09-18 05:10:45,2019-01-17 21:51:31
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/345,https://api.github.com/repos/kubernetes/frakti/issues/345,Fix: Upgrade vendored to v1.12.0,"**1.Describe what this PR did**

Upgrade vendored Kubernetes to v1.12.0

**2.Does this pull request fix one issue?**

Derivation of #344 

**3.Describe how you did it**

Upgrade vendored Kubernetes to v1.12.0

**4.Describe how to verify it**
Env:
k8s:v1.12.0
networkPlugin: weave:2.4.1

**cri-tool:**

NONE

**Kubernetes:**

runtime-docker:

Create pod:
```
[root@frakti1-12-1 ~]# kubectl create -f frakti-docker-1.yaml 
deployment.apps/frakti-docker-1 created
[root@frakti1-12-1 ~]# kubectl create -f frakti-docker-2.yaml 
deployment.apps/frakti-docker-2 created
[root@frakti1-12-1 ~]# kubectl get pod -n frakti -owide
NAME                               READY   STATUS    RESTARTS   AGE   IP           NODE           NOMINATED NODE
frakti-docker-1-6b479dbcb5-kskmz   1/1     Running   0          73s   10.32.0.14   frakti1-12-1   <none>
frakti-docker-2-79c9db55d-sffjv    1/1     Running   0          44s   10.44.0.5    frakti1-12-2   <none>
```
Cross host network:
```
[root@frakti1-12-2 ~]# docker exec -it 454ec8c7bb53 bash
[ root@frakti-docker-2-79c9db55d-sffjv:/etc/nginx ]$ ping 10.32.0.14
PING 10.32.0.14 (10.32.0.14) 56(84) bytes of data.
64 bytes from 10.32.0.14: icmp_seq=1 ttl=64 time=163 ms
64 bytes from 10.32.0.14: icmp_seq=2 ttl=64 time=63.0 ms
64 bytes from 10.32.0.14: icmp_seq=3 ttl=64 time=63.1 ms
--- 10.32.0.14 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 63.021/96.581/163.594/47.386 ms
[ root@frakti-docker-2-79c9db55d-sffjv:/etc/nginx ]$ ping 10.44.0.5
PING 10.44.0.5 (10.44.0.5) 56(84) bytes of data.
64 bytes from 10.44.0.5: icmp_seq=1 ttl=64 time=0.054 ms
64 bytes from 10.44.0.5: icmp_seq=2 ttl=64 time=0.064 ms
64 bytes from 10.44.0.5: icmp_seq=3 ttl=64 time=0.070 ms
--- 10.44.0.5 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1999ms
rtt min/avg/max/mdev = 0.054/0.062/0.070/0.011 ms
[ root@frakti-docker-2-79c9db55d-sffjv:/etc/nginx ]$ 
```
Delete deployment:
```
[root@frakti1-12-1 ~]# kubectl get deployment -n frakti
NAME              DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
frakti-docker-1   1         1         1            1           10m
frakti-docker-2   1         1         1            1           10m
[root@frakti1-12-1 ~]# kubectl delete deployment frakti-docker-1 -n frakti
deployment.extensions ""frakti-docker-1"" deleted
[root@frakti1-12-1 ~]# kubectl delete deployment frakti-docker-2 -n frakti
deployment.extensions ""frakti-docker-2"" deleted
[root@frakti1-12-1 ~]# kubectl get deployment -n frakit
No resources found.
[root@frakti1-12-1 ~]# kubectl get pod -n frakti
No resources found.
```
Example yaml:
```
[root@frakti1-12-1 ~]# cat frakti-docker-1.yaml 
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: frakti
  name: frakti-docker-1
  labels:
    frakti: frakti
spec:
  selector:
    matchLabels:
      frakti: frakti
  template:
    metadata:
      annotations:
        runtime.frakti.alpha.kubernetes.io/OSContainer: ""true""
      labels:
        frakti: frakti
    spec:
      nodeName: frakti1-12-1
      containers:
      - name: frakti
        image: gcr.io/google_containers/nginx
        env:
          - name: TESTNAME
            valueFrom:
              fieldRef:
                fieldPath: status.hostIP
```
",closed,True,2018-10-26 10:32:11,2018-11-09 14:33:52
frakti,hintss,https://github.com/kubernetes/frakti/pull/346,https://api.github.com/repos/kubernetes/frakti/issues/346,Fix kubernetes blog link,,closed,True,2018-10-31 06:21:22,2018-11-02 05:30:24
frakti,xichengliudui,https://github.com/kubernetes/frakti/pull/347,https://api.github.com/repos/kubernetes/frakti/issues/347,Fix typoï¼š workaroud -> workaround,Fix typoï¼š workaroud -> workaround,closed,True,2018-11-05 08:28:41,2018-11-07 05:23:24
frakti,cblecker,https://github.com/kubernetes/frakti/issues/348,https://api.github.com/repos/kubernetes/frakti/issues/348,frakti permissions cleanup,"Hey frakti team!

I'd like to help clean up some of the github permissions to this repo.

Right now there are the following teams with permissions to this repo:
- @kubernetes/frakti-admins - admin access
- @kubernetes/frakti-maintainers - write access

And in addition, there are the following collaborators with direct permission:
- @bergwolf - write
- @Crazykev - read
- @heartlock - read
- @ZeroMagic - write

I'd like to propose the following changes:
- If @bergwolf and @ZeroMagic are still active with the project, they can be added to @kubernetes/frakti-maintainers to maintain write access, but they should go through the [community membership process](https://git.k8s.io/community/community-membership.md#member) first, to be added to the @kubernetes github org.
- If @Crazykev and @heartlock are still active with the project, and they need the ability to be assigned issues, they should go through the [community membership process](https://git.k8s.io/community/community-membership.md#member) to be added to the @kubernetes github org, which will automatically give them the read access they currently have.
- After the above is done, the direct permissions can be pulled back.

How does this sound? Please let me know ðŸ˜„.

cc: @kubernetes/owners ",open,False,2018-11-15 22:29:58,2019-02-14 19:29:54
frakti,liyanyanli,https://github.com/kubernetes/frakti/pull/350,https://api.github.com/repos/kubernetes/frakti/issues/350,Fix: Upgrade vendored to v1.13.0 & Replace glog to klog,"**1.Describe what this PR did**

Upgrade vendored Kubernetes to v1.13.0 & Replace glog to klog

**2.Does this pull request fix one issue?**

NONE

**3.Describe how you did it**

Upgrade vendored Kubernetes to v1.13.0 & Replace glog to klog

**4.Describe how to verify it**
**Env:**
k8s:v1.13.0
networkPlugin: weave:2.5.0
docker:18.06.1-ce

**cri-tool:**
NONE

**Kubernetes:**
runtime-docker:
```
[root@frakti1-13-1 ~]# kubectl create -f frakti-docker-1.yaml 
deployment.apps/frakti-docker-1 created
[root@frakti1-13-1 ~]# kubectl create -f frakti-docker-2.yaml 
deployment.apps/frakti-docker-2 created
[root@frakti1-13-1 ~]# kubectl get pod  -owide
NAME                               READY   STATUS    RESTARTS   AGE   IP          NODE           NOMINATED NODE   READINESS GATES
frakti-docker-1-984f44ff9-nlsqx    1/1     Running   0          43s   10.32.0.3   frakti1-13-1   <none>           <none>
frakti-docker-2-6c7d559876-fwvql   1/1     Running   0          39s   10.40.0.7   frakti1-13-2   <none>           <none>
```

Cross host network:
```
[root@frakti1-13-1 ~]# docker exec -it e53f5e5d0987 bash
[ root@frakti-docker-1-984f44ff9-nlsqx:/etc/nginx ]$ ping 10.32.0.3
PING 10.32.0.3 (10.32.0.3) 56(84) bytes of data.
64 bytes from 10.32.0.3: icmp_seq=1 ttl=64 time=0.066 ms
64 bytes from 10.32.0.3: icmp_seq=2 ttl=64 time=0.080 ms
--- 10.32.0.3 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min/avg/max/mdev = 0.066/0.073/0.080/0.007 ms
[ root@frakti-docker-1-984f44ff9-nlsqx:/etc/nginx ]$ ping 10.40.0.7
PING 10.40.0.7 (10.40.0.7) 56(84) bytes of data.
64 bytes from 10.40.0.7: icmp_seq=1 ttl=64 time=44.2 ms
64 bytes from 10.40.0.7: icmp_seq=2 ttl=64 time=0.569 ms
64 bytes from 10.40.0.7: icmp_seq=3 ttl=64 time=0.615 ms
--- 10.40.0.7 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2001ms
rtt min/avg/max/mdev = 0.569/15.159/44.294/20.601 ms
```

Delete deployment:
```
[root@frakti1-13-1 ~]# kubectl get deployment 
NAME              READY   UP-TO-DATE   AVAILABLE   AGE
frakti-docker-1   1/1     1            1           2m48s
frakti-docker-2   1/1     1            1           2m44s
[root@frakti1-13-1 ~]# kubectl delete deployment frakti-docker-1
deployment.extensions ""frakti-docker-1"" deleted
[root@frakti1-13-1 ~]# kubectl delete deployment frakti-docker-2
deployment.extensions ""frakti-docker-2"" deleted
[root@frakti1-13-1 ~]# kubectl get deployment 
No resources found.
[root@frakti1-13-1 ~]# kubectl get pod
No resources found.
```

Example yaml:
[root@frakti1-13-1 ~]# cat frakti-docker-1.yaml 
```
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frakti-docker-1
  labels:
    frakti: frakti
spec:
  selector:
    matchLabels:
      frakti: frakti
  template:
    metadata:
      annotations:
        runtime.frakti.alpha.kubernetes.io/OSContainer: ""true""
      labels:
        frakti: frakti
    spec:
      nodeName: frakti1-13-1
      containers:
      - name: frakti
        image: gcr.io/google_containers/nginx
        env:
          - name: TESTNAME
            valueFrom:
              fieldRef:
                fieldPath: status.hostIP
```
",closed,True,2018-12-10 07:43:10,2018-12-21 01:08:08
frakti,eduartua,https://github.com/kubernetes/frakti/pull/351,https://api.github.com/repos/kubernetes/frakti/issues/351,Updated URL docs/guide/collab.md,"We have moved this file to the k/community/contributors/guide folder.

/sig node
/assign @dchen1107 @derekwaynecarr 

/kind feature",closed,True,2019-01-15 22:19:28,2019-01-17 21:50:15
frakti,mikeroyal,https://github.com/kubernetes/frakti/issues/352,https://api.github.com/repos/kubernetes/frakti/issues/352,Snap package suppport ,"I was thinking the install and setup could be improved for Ubuntu and other Linux distros by having a [snap package](https://snapcraft.io/) version. If it's not a priority would you mind if I made the snap as a contribution?

[Crafting your first snap](https://tutorials.ubuntu.com/tutorial/create-your-first-snap#0)

[Build and test snap](https://snapcraft.io/build)

[Getting Started snap template](https://github.com/snapcrafters/fork-and-rename-me)",open,False,2019-02-01 01:54:47,2019-02-01 01:54:47
frakti,joelsmith,https://github.com/kubernetes/frakti/pull/353,https://api.github.com/repos/kubernetes/frakti/issues/353,Update embargo doc link in SECURITY_CONTACTS and change PST to PSC,See https://github.com/kubernetes/security/issues/8 for more information,closed,True,2019-03-08 18:05:11,2019-03-09 00:19:38
